<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.7.32">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <meta name="author" content="Johannes Zauner, Aaron Nicholls, Lisa Ostrin, and Manuel Spitschan">
    <meta name="dcterms.date" content="2025-07-08">

    <title>Tutorial on analysis pipelines for visual experience datasets</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      html { -webkit-text-size-adjust: 100%; }
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      /* CSS for citations */
      div.csl-bib-body { }
      div.csl-entry {
        clear: both;
        margin-bottom: 0em;
      }
      .hanging-indent div.csl-entry {
        margin-left:2em;
        text-indent:-2em;
      }
      div.csl-left-margin {
        min-width:2em;
        float:left;
      }
      div.csl-right-inline {
        margin-left:2em;
        padding-left:1em;
      }
      div.csl-indent {
        margin-left: 2em;
      }    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = "index.html";
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="site_libs/manuscript-notebook/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-b9aedc3c581de397c3385a5acc9783b4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
     <script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>   <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script> 
        <link rel="stylesheet" href="styles.css">
      <meta name="citation_title" content="Tutorial on analysis pipelines for visual experience datasets">
<meta name="citation_author" content="Johannes Zauner, Aaron Nicholls, Lisa Ostrin, and Manuel Spitschan">
<meta name="citation_publication_date" content="2025-07-08">
<meta name="citation_cover_date" content="2025-07-08">
<meta name="citation_year" content="2025">
<meta name="citation_online_date" content="2025-07-08">
<meta name="citation_fulltext_html_url" content="https://tscnlab.github.io/ZaunerEtAl2025JOV/index-preview.html">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Continuous objective assessment of near work;,citation_author=Rachel Williams;,citation_author=Suyash Bakshi;,citation_author=Edwin J Ostrin;,citation_author=Lisa A Ostrin;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_issue=1;,citation_volume=9;,citation_journal_title=Scientific reports;,citation_publisher=Nature Publishing Group UK London;">
<meta name="citation_reference" content="citation_title=Validation of the clouclip and utility in measuring viewing distance in adults;,citation_abstract=Abstract Purpose To validate the Clouclip, a continuously measuring objective rangefinder, and examine viewing behaviours during various near tasks in non-myopic and myopic adults. Methods In experiment 1, five Clouclip devices were utilised. An infrared camera was used to visualise and measure infrared beam size and angle. Repeatability for distance tracking was assessed from 5 to 120 cm in 5 cm increments. Accuracy of distance tracking was investigated for paper and iPad targets, spatial integration was calculated, effects of target tilt were determined and light measurements were compared to a lux meter. In experiment 2, viewing behaviour was assessed in 41 subjects (21 non-myopic, 20 myopic) during four 15-min near tasks; (1) passive reading of printed material, (2) active writing on printed material, (3) passive viewing on an electronic device and (4) active engagement on an electronic device. Working distance was compared between tasks and refractive error groups. Results Clouclip distance tracking showed good repeatability, with a mean difference of 0.34 cm and limits of agreement of ±2.0 cm. Clouclip-measured and actual distances were highly correlated for paper and electronic targets from 5 to 120 cm, with mean differences and limits of agreement of 3.96 ± 13.78 cm and 4.48 ± 8.92 cm, respectively; variability increased for distances &amp;amp;amp;gt;100 cm. Tracking ability increased with larger target sizes; tracking was accurate when the target occupied 1.5%–20.3% of tracking beam area, depending on distance and with target tilt up to ±60 degrees. Clouclip- and lux meter-measured ambient illumination were highly correlated for a wide range of intensities (r = 0.96, p &amp;lt; 0.001), but with greater variability for intensities &amp;gt;20 000 lux. The Clouclip infrared beam was measured to have a diameter of 25.6 ± 2.2° and a downward angle of 10.3 ± 0.5°. For subject testing, viewing distance was significantly closer for active and passive printed tasks (29.5 ± 6.7 cm and 33.2 ± 8.8 cm, respectively) than for active and passive electronic tasks (35.4 ± 8.0 cm and 40.8 ± 10.4 cm, respectively), with no differences between refractive error groups (p = 0.88). Conclusions The Clouclip performed well in measuring near and intermediate distances and could distinguish between indoor (&amp;lt;1000 lux) and outdoor (>1000 lux) illumination. A closer working distance was observed for printed tasks compared to those on an iPad, with no difference in viewing distance between non-myopic and myopic adults.;,citation_author=Khob R Bhandari;,citation_author=Lisa A Ostrin;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_fulltext_html_url=https://onlinelibrary.wiley.com/doi/abs/10.1111/opo.12735;,citation_issue=6;,citation_doi=https://doi.org/10.1111/opo.12735;,citation_volume=40;,citation_journal_title=Ophthalmic and Physiological Optics;">
<meta name="citation_reference" content="citation_title=An objective comparison of light intensity and near-visual tasks between rural and urban school children in china by a wearable device clouclip;,citation_abstract=To compare light intensity and near-visual tasks objectively between rural and urban children. Clouclip, a wearable device, was applied to assess metrics of these two factors in 78 fifth-grade students from an urban and from a rural school. The light intensity experienced by urban students was found significantly lower both in the school period (614.05 ± 178.77 vs. 918.41 ± 257.81 lux, P &amp;amp;amp;lt; 0.001) and on the weekend (444.53 ± 216.65 vs. 882.21 ± 536.67 lux, P &amp;lt; 0.001). The duration of exposure to bright light (&amp;gt;1000 lux) was also substantially shorter for urban students. Although no significant difference was found in near work–related behaviors during the school period and the weekend, for the after-school period the urban students had a shorter average viewing distance (30.94 ± 4.14 vs. 34.81 ± 3.93 cm, P &amp;lt; 0.001), a longer accumulated duration of near work (2.25 ± 0.53 vs. 1.95 ± 0.46 hours, P = 0.010), a greater time ratio of near work (56% ± 14% vs. 49% ± 14%, P = 0.045), and a greater time ratio of excessively close near work (49% ± 13% vs. 40% ± 12%, P = 0.001). Our data indicate there were substantial differences in light exposure and near-work metrics between the two regions. The correlation between these differences and the discrepancy in regional myopia prevalence needs further investigation. The objective quantification of these metrics might help explain the varied myopia prevalence among regions.;,citation_author=Longbo Wen;,citation_author=Qian Cheng;,citation_author=Weizhong Lan;,citation_author=Yingpin Cao;,citation_author=Xiaoning Li;,citation_author=Yiqiu Lu;,citation_author=Zhenghua Lin;,citation_author=Lun Pan;,citation_author=Haogang Zhu;,citation_author=Zhikuan Yang;,citation_publication_date=2019-11;,citation_cover_date=2019-11;,citation_year=2019;,citation_fulltext_html_url=https://doi.org/10.1167/tvst.8.6.15;,citation_issue=6;,citation_doi=10.1167/tvst.8.6.15;,citation_issn=2164-2591;,citation_volume=8;,citation_journal_title=Translational Vision Science &amp;amp; Technology;">
<meta name="citation_reference" content="citation_title=Objectively measured near work, outdoor exposure and myopia in children;,citation_abstract=Aim To reassess the association between near work, outdoor exposure and myopia in children through an objective approach.Methods Eighty-six children (10.130.48 years) were asked to wear Clouclip, a newly developed wearable device that is able to measure working distance and eye-level illuminance, for a complete week to obtain information on near work and outdoor exposure. The mean daily Clouclip wearing time was 11.721.14 hour. The spherical equivalent refraction was determined by cycloplegic autorefraction.Results The myopic children were found to be exposed to light intensities &amp;amp;amp;gt;3000 lux (0.680.50 hour vs 1.020.53 hour, p=0.012) and &amp;gt;5000 lux (0.420.35 hour vs 0.630.31 hour, p=0.004) for shorter durations on average each day than the non-myopic children. Additionally, the myopic children spent more time on average each day on activities at a distance of &amp;lt;20 cm than non-myopic children (1.890.61 hour vs 1.520.77 hour, p=0.019). In the multivariate logistic analysis, the time spent with a higher light intensity (&amp;gt;3000 lux (OR=0.27, 95% CI: 0.10 to 0.72, p=0.009); &amp;gt;5000 lux (OR=0.11, 95% CI: 0.02 to 0.56, p=0.008)) and a working distance of &amp;lt;20 cm (in a circumstance of &amp;gt;3000 lux (OR=1.17, 95% CI: 1.09 to 1.86, p=0.038) or in that of &amp;gt;5000 lux (OR=1.12, 95% CI: 1.03 to 1.77, p=0.046)) were the independent protective factors and risk factors, respectively.Conclusion The current study provides novel evidence, based on objective data, to support the association between the intensity of near work, light intensity and myopia. However, the causality and the dose-effect relationship need to be investigated further.;,citation_author=Longbo Wen;,citation_author=Yingpin Cao;,citation_author=Qian Cheng;,citation_author=Xiaoning Li;,citation_author=Lun Pan;,citation_author=Lei Li;,citation_author=HaoGang Zhu;,citation_author=Weizhong Lan;,citation_author=Zhikuan Yang;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_fulltext_html_url=https://bjo.bmj.com/content/104/11/1542;,citation_issue=11;,citation_doi=10.1136/bjophthalmol-2019-315258;,citation_issn=0007-1161;,citation_volume=104;,citation_journal_title=British Journal of Ophthalmology;,citation_publisher=BMJ Publishing Group Ltd;">
<meta name="citation_reference" content="citation_title=Using light meters to investigate the light-myopia association–a literature review of devices and research methods;,citation_author=Astrid Hönekopp;,citation_author=Sarah Weigelt;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_journal_title=Clinical Ophthalmology;,citation_publisher=Taylor &amp;amp;amp; Francis;">
<meta name="citation_reference" content="citation_title=Power analysis for personal light exposure measurements and interventions;,citation_abstract=Background Light exposure regulates the human circadian system and more widely affects health, well-being, and performance. With the rise in field studies on light exposure’s effects, the amount of data collected through wearable loggers and dosimeters has also grown. These data are more complex than stationary laboratory measurements. Determining sample sizes in field studies is challenging, as the literature shows a wide range of sample sizes (between 2 and 1,887 from a recent review of the field and approaching 105 participants in first studies using large-scale “biobank” databases). Current decisions on sample size for light exposure data collection lack a specific basis rooted in power analysis. Therefore, there is a need for clear guidance on selecting sample sizes. Methods Here, we introduce a novel procedure based on hierarchical bootstrapping for calculating statistical power and required sample size for wearable light and optical radiation logging data and derived summary metrics, taking into account the hierarchical data structure (mixed-effects model) through stepwise resampling. Alongside this method, we publish a dataset that serves as one possible basis to perform these calculations: one week of continuous data in winter and summer, respectively, for 13 early-day shift-work participants (collected in Dortmund, Germany; lat. 51.514° N, lon. 7.468° E). Results Applying our method on the dataset for twelve different summary metrics (luminous exposure, geometric mean, and standard deviation, timing/time above/below threshold, mean/midpoint of darkest/brightest hours, intradaily variability) with a target comparison across winter and summer, reveals required sample sizes ranging from as few as 3 to more than 50. About half of the metrics–those that focus on the bright time of day–showed sufficient power already with the smallest sample. In contrast, metrics centered around the dark time of the day and daily patterns required higher sample sizes: mean timing of light below mel EDI of 10 lux (5), intradaily variability (17), mean of darkest 5 hours (24), and mean timing of light above mel EDI of 250 lux (45). The geometric standard deviation and the midpoint of the darkest 5 hours lacked sufficient power within the tested sample size. Conclusions Our novel method provides an effective technique for estimating sample size in light exposure studies. It is specific to the used light exposure or dosimetry metric and the effect size inherent in the light exposure data at the basis of the bootstrap. Notably, the method goes beyond typical implementations of bootstrapping to appropriately address the structure of the data. It can be applied to other datasets, enabling comparisons across scenarios beyond seasonal differences and activity patterns. With an ever-growing pool of data from the emerging literature, the utility of this method will increase and provide a solid statistical basis for the selection of sample sizes.;,citation_author=Ljiljana AND Spitschan Zauner;,citation_publication_date=2024-12;,citation_cover_date=2024-12;,citation_year=2024;,citation_fulltext_html_url=https://doi.org/10.1371/journal.pone.0308768;,citation_issue=12;,citation_doi=10.1371/journal.pone.0308768;,citation_volume=19;,citation_journal_title=PLOS ONE;,citation_publisher=Public Library of Science;">
<meta name="citation_reference" content="citation_title=A novel wearable sensor for objective measurement of distance and illumination;,citation_abstract=Abstract Purpose To evaluate the rangefinding and light sensing capabilities of a novel wearable sensor, the Visual Environment Evaluation Tool (VEET) developed for myopia research. Methods The VEET 1.0 (Meta, LLC) is a temple-integrated system mounted on a spectacle frame. Both the left and right temples house four sensors each, angled straight ahead and 20° downward/4° nasal, respectively. For validation, VEET-mounted spectacles were placed on a mannequin head. An infrared camera was used to capture the spatial characteristics of the rangefinding beam. Distance measurements were collected against a wall for 5–400 cm. The accuracy of distance measurements for different target types, sizes and tilt was assessed. Ambient illumination was captured in different indoor and outdoor settings and compared to a lux meter. Results All devices (N = 20) were capable of capturing distances for the full range evaluated, 5–400 cm, against a wall. There was a strong relationship between the actual and measured distances, with a slope of 1.01 ± 0.003 and 0.95 ± 0.007, for the left and right temples, respectively. Distance measurements were repeatable across different target types, including paper and tablet. Mean beam diameter of five tested devices was 52.2° ± 7.5°. The VEET effectively measured distances across different target sizes, ranging from 2 × 2 cm and larger and target tilt ±60°. Illumination measurements across different indoor and outdoor settings demonstrated a strong linear relationship with lux meter readings (R2 = 0.99 and 0.78 for the left and right temples, respectively), effectively distinguishing indoor (&amp;amp;amp;lt;1000 lux) and outdoor (≥1000 lux) illumination levels. Conclusion The VEET provides accurate quantification of real-time distances across different target types and sizes and is capable of effectively distinguishing indoor and outdoor illumination levels. The VEET will be valuable in studies evaluating risk factors for myopia to gain a better understanding of the role of near work and light exposure.;,citation_author=Raman Prasad Sah;,citation_author=Pavan Kalyan Narra;,citation_author=Lisa A. Ostrin;,citation_publication_date=2025;,citation_cover_date=2025;,citation_year=2025;,citation_fulltext_html_url=https://onlinelibrary.wiley.com/doi/abs/10.1111/opo.13523;,citation_issue=n/a;,citation_doi=https://doi.org/10.1111/opo.13523;,citation_volume=00;,citation_journal_title=Ophthalmic and Physiological Optics;">
<meta name="citation_reference" content="citation_title=The clouclip, a wearable device for measuring near-work and outdoor time: Validation and comparison of objective measures with questionnaire estimates;,citation_abstract=Abstract Purpose To validate a novel wearable device that can measure both viewing distance and light exposure, Clouclip, and compare questionnaire estimates regarding near-work and outdoor time with the objective measures obtained using Clouclip. Methods Fifteen Clouclips were selected to measure different distances and levels of illuminance. With each Clouclip, five measurements at different distances and light intensities were measured and recorded. Eighty participants wore Clouclips for a week and completed an activity questionnaire afterwards. Results The intra- and inter-Clouclip coefficients were 1.00 and 0.99 for measuring distance and 1.00 and 1.00 for illuminance, respectively. Within the measurement limit, the maximum relative error was 2.07% for distance and 2.23% for illuminance. Assuming that &amp;amp;amp;lt;30&nbsp;cm was the typical distance for near-work activities and &amp;gt;1000 Lux was the typical cut-off for outdoor environments, the questionnaire showed a trend of overestimation for both. The greatest overestimation of near-work occurred during the school period [Questionnaire: 4.73&nbsp;hr (4.73, 5.07) versus Clouclip: 2.16&nbsp;hr (1.74, 2.78); p&nbsp;&amp;lt;&nbsp;0.01]. The greatest overestimation of outdoor activity also occurred during the school period [Questionnaire: 1.60&nbsp;hr (1.33, 1.85) versus Clouclip: 1.21&nbsp;hr (0.96, 1.50); p&nbsp;<&nbsp;0.01]. Based on Clouclip, the total time spent outdoors was estimated to be 1.55&nbsp;hr on school days, of which 0.34&nbsp;hr occurred after school. For weekend days, however, the duration was only 0.17&nbsp;hr. Conclusions Clouclip had excellent precision and accuracy. Although the agreement between the questionnaire and Clouclip was relatively poor, they were able to complement each other to provide a more logical and feasible assessment of exposure to near-work and outdoor activity. Indoor-oriented lifestyles were found to predominate in Chinese children.;,citation_author=Longbo Wen;,citation_author=Qian Cheng;,citation_author=Yingpin Cao;,citation_author=Xiaoning Li;,citation_author=Lun Pan;,citation_author=Lei Li;,citation_author=Haogang Zhu;,citation_author=Ian Mogran;,citation_author=Weizhong Lan;,citation_author=Zhikuan Yang;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=https://onlinelibrary.wiley.com/doi/abs/10.1111/aos.14785;,citation_issue=7;,citation_doi=https://doi.org/10.1111/aos.14785;,citation_volume=99;,citation_journal_title=Acta Ophthalmologica;">
<meta name="citation_reference" content="citation_title=Protocol for a prospective, multicentre, cross-sectional cohort study to assess personal light exposure;,citation_abstract=Light profoundly impacts many aspects of human physiology and behaviour, including the synchronization of the circadian clock, the production of melatonin, and cognition. These effects of light, termed the non-visual effects of light, have been primarily investigated in laboratory settings, where light intensity, spectrum and timing can be carefully controlled to draw associations with physiological outcomes of interest. Recently, the increasing availability of wearable light loggers has opened the possibility of studying personal light exposure in free-living conditions where people engage in activities of daily living, yielding findings associating aspects of light exposure and health outcomes, supporting the importance of adequate light exposure at appropriate times for human health. However, comprehensive protocols capturing environmental (e.g., geographical location, season, climate, photoperiod) and individual factors (e.g., culture, personal habits, behaviour, commute type, profession) contributing to the measured light exposure are currently lacking. Here, we present a protocol that combines smartphone-based experience sampling (experience sampling implementing Karolinska Sleepiness Scale, KSS ratings) and high-quality light exposure data collection at three body sites (near-corneal plane between the two eyes mounted on spectacle, neck-worn pendant/badge, and wrist-worn watch-like design) to capture daily factors related to individuals’ light exposure. We will implement the protocol in an international multi-centre study to investigate the environmental and socio-cultural factors influencing light exposure patterns in Germany, Ghana, Netherlands, Spain, Sweden, and Turkey (minimum n = 15, target n = 30 per site, minimum n = 90, target n = 180 across all sites). With the resulting dataset, lifestyle and context-specific factors that contribute to healthy light exposure will be identified. This information is essential in designing effective public health interventions.;,citation_author=C. Guidolin;,citation_author=S. Aerts;,citation_author=G. K. Agbeshie;,citation_author=K. O. Akuffo;,citation_author=S. N. Aydin;,citation_author=D. Baeza-Moyano;,citation_author=J. Bolte;,citation_author=K. Broszio;,citation_author=G. Cantarero-Garcia;,citation_author=A. Didikoglu;,citation_author=R. A. Gonzalez-Lezcano;,citation_author=H. Joosten-Ma;,citation_author=S. Melero-Tur;,citation_author=M. N. Tengelin;,citation_author=M. C. Perez Gutierrez;,citation_author=O. Stefani;,citation_author=I. Svensson;,citation_author=L. Udovicic;,citation_author=J. Zauner;,citation_author=M. Spitschan;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/39592960;,citation_issue=1;,citation_doi=10.1186/s12889-024-20206-4;,citation_issn=1471-2458 (Electronic)
1471-2458 (Linking);,citation_volume=24;,citation_journal_title=BMC Public Health;">
<meta name="citation_reference" content="citation_title=Metadata recommendations for light logging and dosimetry datasets;,citation_abstract=BACKGROUND: Light exposure significantly impacts human health, regulating our circadian clock, sleep-wake cycle and other physiological processes. With the emergence of wearable light loggers and dosimeters, research on real-world light exposure effects is growing. There is a critical need to standardize data collection and documentation across studies. RESULTS: This article proposes a new metadata descriptor designed to capture crucial information within personalized light exposure datasets collected with wearable light loggers and dosimeters. The descriptor, developed collaboratively by international experts, has a modular structure for future expansion and customization. It covers four key domains: study design, participant characteristics, dataset details, and device specifications. Each domain includes specific metadata fields for comprehensive documentation. The user-friendly descriptor is available in JSON format. A web interface simplifies generating compliant JSON files for broad accessibility. Version control allows for future improvements. CONCLUSIONS: Our metadata descriptor empowers researchers to enhance the quality and value of their light dosimetry datasets by making them FAIR (findable, accessible, interoperable and reusable). Ultimately, its adoption will advance our understanding of how light exposure affects human physiology and behaviour in real-world settings.;,citation_author=M. Spitschan;,citation_author=G. Hammad;,citation_author=C. Blume;,citation_author=C. Schmidt;,citation_author=D. J. Skene;,citation_author=K. Wulff;,citation_author=N. Santhi;,citation_author=J. Zauner;,citation_author=M. Munch;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/39211574;,citation_issue=1;,citation_doi=10.1186/s44247-024-00113-9;,citation_issn=2731-684X (Electronic)
2731-684X (Linking);,citation_volume=2;,citation_journal_title=BMC Digit Health;">
<meta name="citation_reference" content="citation_title=Verification, analytical validation and clinical validation (V3) of wearable dosimeters and light loggers;,citation_abstract=BACKGROUND: Light exposure is an important driver and modulator of human physiology, behavior and overall health, including the biological clock, sleep-wake cycles, mood and alertness. Light can also be used as a directed intervention, e.g., in the form of light therapy in seasonal affective disorder (SAD), jetlag prevention and treatment, or to treat circadian disorders. Recently, a system of quantities and units related to the physiological effects of light was standardized by the International Commission on Illumination (CIE S 026/E:2018). At the same time, biometric monitoring technologies (BioMeTs) to capture personalized light exposure were developed. However, because there are currently no standard approaches to evaluate the digital dosimeters, the need to provide a firm framework for the characterization, calibration, and reporting for these digital sensors is urgent. OBJECTIVE: This article provides such a framework by applying the principles of verification, analytic validation and clinical validation (V3) as a state-of-the-art approach for tools and standards in digital medicine to light dosimetry. RESULTS: This article describes opportunities for the use of digital dosimeters for basic research, for monitoring light exposure, and for measuring adherence in both clinical and non-clinical populations to light-based interventions in clinical trials.;,citation_author=M. Spitschan;,citation_author=K. Smolders;,citation_author=B. Vandendriessche;,citation_author=B. Bent;,citation_author=J. P. Bakker;,citation_author=I. R. Rodriguez-Chavez;,citation_author=C. Vetter;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/36601285;,citation_doi=10.1177/20552076221144858;,citation_issn=2055-2076 (Print)
2055-2076 (Electronic)
2055-2076 (Linking);,citation_volume=8;,citation_journal_title=Digit Health;">
<meta name="citation_reference" content="citation_title=Measuring light exposure in daily life: A review of wearable light loggers;,citation_author=J. Duijnhoven;,citation_author=S. L. Hartmeyer;,citation_author=A. Didikoglu;,citation_author=O. Stefani;,citation_author=K. W. Houser;,citation_author=V. Kalavally;,citation_author=M. Spitschan;,citation_publication_date=2025;,citation_cover_date=2025;,citation_year=2025;,citation_doi=10.1016/j.buildenv.2025.112771;,citation_issn=03601323;,citation_volume=274;,citation_journal_title=Build Environ;">
<meta name="citation_reference" content="citation_title=LightLogR: Reproducible analysis of personal light exposure data;,citation_abstract=Light plays an important role in human health and well-being, which necessitates the study of the effects of personal light exposure in real-world settings, measured by means of wearable devices. A growing number of studies incorporate these kinds of data to assess associations between light and health outcomes. Yet with few or missing standards, guidelines, and frameworks, it is challenging setting up measurements, analysing the data, and comparing outcomes between studies. Overall, time series data from wearable light loggers are significantly more complex compared to controlled stimuli used in laboratory studies. In this paper, we introduce LightLogR, a novel resource to facilitate these research efforts. The package for R statistical software is open-source and permissively MIT-licenced. As part of a developing software ecosystem, LightLogR is built with common challenges of current and future datasets in mind. The package standardises many tasks for importing and processing personal light exposure data. It allows for quick as well as detailed insights into the datasets through summary and visualisation tools. Furthermore, LightLogR incorporates major metrics commonly used in the field (61 metrics across 17 metric families), all while embracing an inherently hierarchical, participant-based data structure.;,citation_author=J. Zauner;,citation_author=S. Hartmeyer;,citation_author=M. Spitschan;,citation_publication_date=2025;,citation_cover_date=2025;,citation_year=2025;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/40123959;,citation_issue=107;,citation_doi=10.21105/joss.07601;,citation_issn=2475-9066 (Print)
2475-9066 (Electronic)
2475-9066 (Linking);,citation_volume=10;,citation_journal_title=J Open Source Softw;">
<meta name="citation_reference" content="citation_title=Towards a framework for light-dosimetry studies: Quantification metrics;,citation_author=S. L. Hartmeyer;,citation_author=M. Andersen;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_issue=4;,citation_doi=10.1177/14771535231170500;,citation_issn=1477-1535
1477-0938;,citation_volume=56;,citation_journal_title=Lighting Research &amp;amp;amp; Technology;">
<meta name="citation_reference" content="citation_title=Towards a framework for light-dosimetry studies: Methodological considerations;,citation_author=S. L. Hartmeyer;,citation_author=F. S. Webler;,citation_author=M. Andersen;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_issue=4-5;,citation_doi=10.1177/14771535221103258;,citation_issn=1477-1535
1477-0938;,citation_volume=55;,citation_journal_title=Lighting Research &amp;amp;amp; Technology;">
<meta name="citation_reference" content="citation_title=Keep it simple: Using README files to advance standardization in chronobiology;,citation_abstract=Standardization plays a crucial role in ensuring the reliability, reproducibility, and interoperability of research data in the biomedical sciences. Metadata standards are one foundation for the FAIR (Findable, Accessible, Interoperable, and Reusable) principles of data management. They facilitate data discovery, understanding, and reuse. However, the adoption of metadata standards in biological research lags in practice. Barriers such as complexity, lack of incentives, technical challenges, resource constraints, and resistance to change hinder widespread adoption. In the field of chronobiology, standardization is essential but faces particular challenges due to the longitudinal nature of experimental data, diverse model organisms, and varied measurement techniques. To address these challenges, we propose an approach that emphasizes simplicity and practicality: the development of README templates tailored for particular data types and species. Through this opinion article, our intention is to initiate a dialogue and commence a community-driven standardization process by engaging potential contributors and collaborators.;,citation_author=T. Zielinski;,citation_author=J. J. L. Hodge;,citation_author=A. J. Millar;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/37754351;,citation_issue=3;,citation_doi=10.3390/clockssleep5030033;,citation_issn=2624-5175 (Electronic)
2624-5175 (Linking);,citation_volume=5;,citation_journal_title=Clocks Sleep;">
<meta name="citation_reference" content="citation_title=The FAIR guiding principles for scientific data management and stewardship;,citation_abstract=There is an urgent need to improve the infrastructure supporting the reuse of scholarly data. A diverse set of stakeholders-representing academia, industry, funding agencies, and scholarly publishers-have come together to design and jointly endorse a concise and measureable set of principles that we refer to as the FAIR Data Principles. The intent is that these may act as a guideline for those wishing to enhance the reusability of their data holdings. Distinct from peer initiatives that focus on the human scholar, the FAIR Principles put specific emphasis on enhancing the ability of machines to automatically find and use the data, in addition to supporting its reuse by individuals. This Comment is the first formal publication of the FAIR Principles, and includes the rationale behind them, and some exemplar implementations in the community.;,citation_author=M. D. Wilkinson;,citation_author=M. Dumontier;,citation_author=I. J. Aalbersberg;,citation_author=G. Appleton;,citation_author=M. Axton;,citation_author=A. Baak;,citation_author=N. Blomberg;,citation_author=J. W. Boiten;,citation_author=L. B. Silva Santos;,citation_author=P. E. Bourne;,citation_author=J. Bouwman;,citation_author=A. J. Brookes;,citation_author=T. Clark;,citation_author=M. Crosas;,citation_author=I. Dillo;,citation_author=O. Dumon;,citation_author=S. Edmunds;,citation_author=C. T. Evelo;,citation_author=R. Finkers;,citation_author=A. Gonzalez-Beltran;,citation_author=A. J. Gray;,citation_author=P. Groth;,citation_author=C. Goble;,citation_author=J. S. Grethe;,citation_author=J. Heringa;,citation_author=P. A. Hoen;,citation_author=R. Hooft;,citation_author=T. Kuhn;,citation_author=R. Kok;,citation_author=J. Kok;,citation_author=S. J. Lusher;,citation_author=M. E. Martone;,citation_author=A. Mons;,citation_author=A. L. Packer;,citation_author=B. Persson;,citation_author=P. Rocca-Serra;,citation_author=M. Roos;,citation_author=R. Schaik;,citation_author=S. A. Sansone;,citation_author=E. Schultes;,citation_author=T. Sengstag;,citation_author=T. Slater;,citation_author=G. Strawn;,citation_author=M. A. Swertz;,citation_author=M. Thompson;,citation_author=J. Lei;,citation_author=E. Mulligen;,citation_author=J. Velterop;,citation_author=A. Waagmeester;,citation_author=P. Wittenburg;,citation_author=K. Wolstencroft;,citation_author=J. Zhao;,citation_author=B. Mons;,citation_publication_date=2016;,citation_cover_date=2016;,citation_year=2016;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/26978244;,citation_doi=10.1038/sdata.2016.18;,citation_issn=2052-4463 (Electronic)
2052-4463 (Linking);,citation_volume=3;,citation_journal_title=Sci Data;">
<meta name="citation_reference" content="citation_title=Naturalistic studies of human light exposure;,citation_abstract=For 24 h, 10 volunteers wore an apparatus that recorded their exposure to light at eye level and at the wrist. Activity was also recorded from the head, both wrists, and an ankle. Most of the subjects were exposed to daylight illumination intensities for only brief and scattered episodes during the 24 h. Some experienced the brightest illumination in the morning and others in the evening. Illuminations at eye level and at the wrist were correlated 0.76, while eye-level illumination was correlated 0.25, 0.44, 0.39, and 0.44 with head, wrists, and ankle activity, respectively. Because human biologic rhythms are probably well synchronized only by illumination approaching daylight intensities, inadequate illumination could be a source of sleep disturbance, chronobiologic disorders, or depression.;,citation_author=N. Okudaira;,citation_author=D. F. Kripke;,citation_author=J. B. Webster;,citation_publication_date=1983;,citation_cover_date=1983;,citation_year=1983;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/6624956;,citation_issue=4;,citation_doi=10.1152/ajpregu.1983.245.4.R613;,citation_issn=0002-9513 (Print)
0002-9513 (Linking);,citation_volume=245;,citation_journal_title=Am J Physiol;">
<meta name="citation_reference" content="citation_title=Behavioural determinants of physiologically-relevant light exposure;,citation_abstract=Light exposure triggers a range of physiological and behavioural responses that can improve and challenge health and well-being. Insights from laboratory studies have recently culminated in standards and guidelines for measuring and assessing healthy light exposure, and recommendations for healthy light levels. Implicit to laboratory paradigms is a simplistic input-output relationship between light and its effects on physiology. This simplified approach ignores that humans actively shape their light exposure through behaviour. This article presents a novel framework that conceptualises light exposure as an individual behaviour to meet specific, person-based needs. Key to healthy light exposure is shaping behaviour, beyond shaping technology.;,citation_author=A. M. Biller;,citation_author=P. Balakrishnan;,citation_author=M. Spitschan;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/39614105;,citation_issue=1;,citation_doi=10.1038/s44271-024-00159-5;,citation_issn=2731-9121 (Electronic)
2731-9121 (Linking);,citation_volume=2;,citation_journal_title=Commun Psychol;">
<meta name="citation_reference" content="citation_title=A child-friendly wearable device for quantifying environmental risk factors for myopia;,citation_abstract=PURPOSE: In the past few decades, the prevalence of myopia, where the eye grows too long, has increased dramatically. The visual environment appears to be critical to regulating the eye growth. Thus, it is very important to determine the properties of the environment that put children at risk for myopia. Researchers have suggested that the intensity of illumination and range of distances to which a child’s eyes are exposed are important, but this has not been confirmed. METHODS: We designed, built, and tested an inexpensive, child-friendly, head-mounted device that can measure the intensity and spectral content of illumination approaching the eyes and can also measure the distances to which the central visual field of the eyes are exposed. The device is mounted on a child’s bicycle helmet. It includes a camera that measures distances over a substantial range and a six-channel spectral sensor. The sensors are hosted by a light-weight, battery-powered microcomputer. We acquired pilot data from children while they were engaged in various indoor and outdoor activities. RESULTS: The device proved to be comfortable, easy, and safe to wear, and able to collect very useful data on the statistics of illumination and distances. CONCLUSIONS: The designed device is an ideal tool to be used in a population of young children, some of whom will later develop myopia and some of whom will not. TRANSLATIONAL RELEVANCE: Such data would be critical for determining the properties of the visual environment that put children at risk for becoming myopic.;,citation_author=A. Gibaldi;,citation_author=E. N. Harb;,citation_author=C. F. Wildsoet;,citation_author=M. S. Banks;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/39422897;,citation_issue=10;,citation_doi=10.1167/tvst.13.10.28;,citation_issn=2164-2591 (Electronic)
2164-2591 (Linking);,citation_volume=13;,citation_journal_title=Transl Vis Sci Technol;">
<meta name="citation_reference" content="citation_title=Wearable light spectral sensor optimized for measuring daily alpha-opic light exposure;,citation_abstract=Light has many non-visual effects on human physiology, including alterations in sleep, mood, and alertness. These effects are mainly mediated by photoreceptors containing the photopigment melanopsin, which has a peak sensitivity to short wavelength (’blue’) light. Commercially available light sensors are commonly wrist-worn and report photopic illuminance and are calibrated to perceive visual brightness and hence cannot be used to investigate the non-visual impacts of light. In this paper, we report the development of a wearable spectrophotometer designed to be worn as a pendant or affixed to clothing to capture spectral power density data close to eye level in the visible wavelength range 380-780 nm. From this, the relative impact of a given light stimulus can be determined for each photoreceptive input in the human eye by calculating effective illuminances. This device showed high accuracy for all effective illuminances while measuring a range of commonly encountered light sources by calibrating for directional response, dark noise, sensor saturation, non-linearity, stray-light and spectral response. Features of the device include IoT-integration, onboard data storage and processing, Bluetooth Low Energy (BLE) enabled data transfer, and cloud storage in one cohesive unit.;,citation_author=A. Mohamed;,citation_author=V. Kalavally;,citation_author=S. W. Cain;,citation_author=A. J. K. Phillips;,citation_author=E. M. McGlashan;,citation_author=C. P. Tan;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/34615174;,citation_issue=17;,citation_doi=10.1364/OE.431373;,citation_issn=1094-4087 (Electronic)
1094-4087 (Linking);,citation_volume=29;,citation_journal_title=Opt Express;">
<meta name="citation_reference" content="citation_title=Recommendations for daytime, evening, and nighttime indoor light exposure to best support physiology, sleep, and wakefulness in healthy adults;,citation_abstract=Ocular light exposure has important influences on human health and well-being through modulation of circadian rhythms and sleep, as well as neuroendocrine and cognitive functions. Prevailing patterns of light exposure do not optimally engage these actions for many individuals, but advances in our understanding of the underpinning mechanisms and emerging lighting technologies now present opportunities to adjust lighting to promote optimal physical and mental health and performance. A newly developed, international standard provides a SI-compliant way of quantifying the influence of light on the intrinsically photosensitive, melanopsin-expressing, retinal neurons that mediate these effects. The present report provides recommendations for lighting, based on an expert scientific consensus and expressed in an easily measured quantity (melanopic equivalent daylight illuminance (melaponic EDI)) defined within this standard. The recommendations are supported by detailed analysis of the sensitivity of human circadian, neuroendocrine, and alerting responses to ocular light and provide a straightforward framework to inform lighting design and practice.;,citation_author=T. M. Brown;,citation_author=G. C. Brainard;,citation_author=C. Cajochen;,citation_author=C. A. Czeisler;,citation_author=J. P. Hanifin;,citation_author=S. W. Lockley;,citation_author=R. J. Lucas;,citation_author=M. Munch;,citation_author=J. B. O’Hagan;,citation_author=S. N. Peirson;,citation_author=L. L. A. Price;,citation_author=T. Roenneberg;,citation_author=L. J. M. Schlangen;,citation_author=D. J. Skene;,citation_author=M. Spitschan;,citation_author=C. Vetter;,citation_author=P. C. Zee;,citation_author=Jr. Wright;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/35298459;,citation_issue=3;,citation_doi=10.1371/journal.pbio.3001571;,citation_issn=1545-7885 (Electronic)
1544-9173 (Print)
1544-9173 (Linking);,citation_volume=20;,citation_journal_title=PLoS Biol;">
<meta name="citation_reference" content="citation_title=Effects of light on human circadian rhythms, sleep and mood;,citation_abstract=Humans live in a 24-hour environment, in which light and darkness follow a diurnal pattern. Our circadian pacemaker, the suprachiasmatic nuclei (SCN) in the hypothalamus, is entrained to the 24-hour solar day via a pathway from the retina and synchronises our internal biological rhythms. Rhythmic variations in ambient illumination impact behaviours such as rest during sleep and activity during wakefulness as well as their underlying biological processes. Rather recently, the availability of artificial light has substantially changed the light environment, especially during evening and night hours. This may increase the risk of developing circadian rhythm sleep-wake disorders (CRSWD), which are often caused by a misalignment of endogenous circadian rhythms and external light-dark cycles. While the exact relationship between the availability of artificial light and CRSWD remains to be established, nocturnal light has been shown to alter circadian rhythms and sleep in humans. On the other hand, light can also be used as an effective and noninvasive therapeutic option with little to no side effects, to improve sleep,mood and general well-being. This article reviews our current state of knowledge regarding the effects of light on circadian rhythms, sleep, and mood.;,citation_author=C. Blume;,citation_author=C. Garbazza;,citation_author=M. Spitschan;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/31534436;,citation_issue=3;,citation_doi=10.1007/s11818-019-00215-x;,citation_issn=1432-9123 (Print)
1439-054X (Electronic)
1432-9123 (Linking);,citation_volume=23;,citation_journal_title=Somnologie (Berl);">
<meta name="citation_reference" content="citation_title=Measuring the visual environment of children and young people at risk of myopia: A scoping review;,citation_abstract=PURPOSE: Myopia (short-sightedness) is an emerging WHO priority eye disease. Rise in prevalence and severity are driven by changes in lifestyle and environment of children and young people (CYP), including less time spent in bright daylight and more time spent on near-vision activities. We aimed to systematically map the literature describing direct, objective measurements of the visual environment of CYP. METHODS: We conducted searches in Ovid Medline 1946, Ovid Embase and The Cochrane Central Register of Controlled Trials in November 2024. We included primary research written in English on environmental/behavioural factors and myopia onset/progression in CYP 3-18 years. Two reviewers independently screened titles/abstracts/full texts. RESULTS: We included 34 articles: 21 explored the association of indoor and/or outdoor light exposure and myopia and included light measurements, two near-vision activities, four both light and near-work, four time outdoors without illuminance measurements, and three light exposure based on meteorological data. Most measurements were carried out at the level of individual children, rather than the surrounding environment alone. CONCLUSION: Despite limitations in measurement techniques, there is evidence that reduced illuminance, less time spent in bright light and increased daily duration/sustained episodes of near-vision activities and reduced working distance are associated with increased myopia prevalence/progression.;,citation_author=A. H. Dahlmann-Noor;,citation_author=D. Bokre;,citation_author=M. Khazova;,citation_author=L. L. A. Price;,citation_publication_date=2025;,citation_cover_date=2025;,citation_year=2025;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/39838056;,citation_doi=10.1007/s00417-024-06719-z;,citation_issn=1435-702X (Electronic)
0721-832X (Linking);,citation_journal_title=Graefes Arch Clin Exp Ophthalmol;">
<meta name="citation_reference" content="citation_title=What is the ’spectral diet’ of humans?;,citation_abstract=Our visual perception of the world - seeing form and colour or navigating the environment - depends on the interaction of light and matter in the environment. Light also has a more fundamental role in regulating rhythms in physiology and behaviour, as well as in the acute secretion of hormones such as melatonin and changes in alertness, where light exposure at short-time, medium-time and long-time scales has different effects on these visual and non-visual functions. Yet patterns of light exposure in the real world are inherently messy: we move in and out of buildings and are therefore exposed to mixtures of artificial and natural light, and the physical makeup of our environment can also drastically alter the spectral composition and spatial distribution of the emitted light. In spatial vision, the examination of natural image statistics has proven to be an important driver in research. Here, we expand this concept to the spectral domain and develop the concept of the ’spectral diet’ of humans.;,citation_author=F. S. Webler;,citation_author=M. Spitschan;,citation_author=R. G. Foster;,citation_author=M. Andersen;,citation_author=S. N. Peirson;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/31431907;,citation_doi=10.1016/j.cobeha.2019.06.006;,citation_issn=2352-1546 (Print)
2352-1554 (Electronic)
2352-1546 (Linking);,citation_volume=30;,citation_journal_title=Curr Opin Behav Sci;">
<meta name="citation_reference" content="citation_title=Light exposure during days with night, outdoor, and indoor work;,citation_abstract=OBJECTIVE: To assess light exposure during days with indoor, outdoor, and night work and days off work. METHODS: Light intensity was continuously recorded for 7 days across the year among indoor (n = 170), outdoor (n = 151), and night workers (n = 188) in Denmark (55-56 degrees N) equipped with a personal light recorder. White light intensity, duration above 80, 1000, and 2500 lux, and proportion of red, green, and blue light was depicted by time of the day and season for work days and days off work. RESULTS: Indoor workers’ average light exposure only intermittently exceeded 1000 lux during daytime working hours in summer and never in winter. During daytime working hours, most outdoor workers exceeded 2500 lux in summer and 1000 lux in winter. Night workers spent on average 10-50 min &amp;amp;amp;gt;80 lux when working night shifts. During days off work, indoor and night workers were exposed to higher light intensities than during work days and few differences were seen between indoor, outdoor, and night workers. The spectral composition of light was similar for indoor, outdoor, and night workers during days at and off work. CONCLUSION: The night workers of this study were during night hours on average exposed for a limited time to light intensities expected to suppress melatonin. The indoor workers were exposed to light levels during daylight hours that may reduce general well-being and mood, especially in winter. Outdoor workers were during summer daylight hours exposed to light levels comparable to those used for the treatment of depression.;,citation_author=S. Daugaard;,citation_author=J. Markvart;,citation_author=J. P. Bonde;,citation_author=J. Christoffersen;,citation_author=A. H. Garde;,citation_author=A. M. Hansen;,citation_author=V. Schlunssen;,citation_author=J. M. Vestergaard;,citation_author=H. T. Vistisen;,citation_author=H. A. Kolstad;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/30865270;,citation_issue=6;,citation_doi=10.1093/annweh/wxy110;,citation_issn=2398-7316 (Electronic)
2398-7308 (Linking);,citation_volume=63;,citation_journal_title=Ann Work Expo Health;">
<meta name="citation_reference" content="citation_title=Assessment of the light exposures of shift-working nurses in london and dortmund in relation to recommendations for sleep and circadian health;,citation_abstract=Shift work causes disruption to circadian physiological processes in the human body, and desynchronization from the natural day-and-night rhythm. Circadian disruption is thought to explain the associations between shift work and various long-term diseases; light is an unrivalled synchronizer (or Zeitgeber) of circadian processes and inappropriate light exposure plausibly plays a critical role in the development of health impairments. As published measurement data on the actual light environments encountered by shift workers are sparse, nurses working in two hospitals in London (UK) and Dortmund (Germany) wore light-logging dosimetry devices to measure personal light exposures continuously over a week in three different seasons. The study identifies and quantifies several of the characteristics of light exposure related to different working patterns in winter, spring, and summer, and quantifies interindividual variations. These data enable informed design of light exposure interventions or changes to shifts to reduce unwanted effects of disruptive light exposure profiles.;,citation_author=L. L. A. Price;,citation_author=M. Khazova;,citation_author=L. Udovicic;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/34693970;,citation_issue=4;,citation_doi=10.1093/annweh/wxab092;,citation_issn=2398-7316 (Electronic)
2398-7308 (Print)
2398-7308 (Linking);,citation_volume=66;,citation_journal_title=Ann Work Expo Health;">
<meta name="citation_reference" content="citation_title=Daily and seasonal variation in the spectral composition of light exposure in humans;,citation_abstract=Light is considered the most potent synchronizer of the human circadian system and exerts many other non-image-forming effects, including those that affect brain function. These effects are mediated in part by intrinsically photosensitive retinal ganglion cells that express the photopigment melanopsin. The spectral sensitivity of melanopsin is greatest for blue light at approximately 480 nm. At present, there is little information on how the spectral composition of light to which people are exposed varies over the 24 h period and across seasons. Twenty-two subjects, aged 22+/-4 yrs (mean+/-SD) participated during the winter months (November-February), and 12 subjects aged 25+/-3 yrs participated during the summer months (April-August). Subjects wore Actiwatch-RGB monitors, as well as Actiwatch-L monitors, for seven consecutive days while living in England. These monitors measured activity and light exposure in the red, green, and blue spectral regions, in addition to broad-spectrum white light, with a 2 min resolution. Light exposure during the day was analyzed for the interval between 09:00 and 21:00 h. The time course of white-light exposure differed significantly between seasons (p = 0.0022), with light exposure increasing in the morning hours and declining in the afternoon hours, and with a more prominent decline in the winter. Overall light exposure was significantly higher in summer than winter (p = 0.0002). Seasonal differences in the relative contribution of blue-light exposure to overall light exposure were also observed (p = 0.0006), in particular during the evening hours. During the summer evenings (17:00-21:00 h), the relative contribution of blue light was significantly higher (p &amp;amp;amp;lt; 0.0001) (40.2+/-1.1;,citation_author=H. C. Thorne;,citation_author=K. H. Jones;,citation_author=S. P. Peters;,citation_author=S. N. Archer;,citation_author=D. J. Dijk;,citation_publication_date=2009;,citation_cover_date=2009;,citation_year=2009;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/19637047;,citation_issue=5;,citation_doi=10.1080/07420520903044315;,citation_issn=1525-6073 (Electronic)
0742-0528 (Linking);,citation_volume=26;,citation_journal_title=Chronobiol Int;">
<meta name="citation_reference" content="citation_title=Influence of seasons upon personal light exposure and longitudinal axial length changes in young adults;,citation_abstract=PURPOSE: To investigate the association between objectively measured ambient light exposure and longitudinal axial length changes (and their seasonal variations) over a period of 12 months in young adults. METHODS: This prospective longitudinal observational study included 43 healthy young adult university students (21 emmetropes and 22 myopes) aged between 18 and 30 years. Three axial length measurements were collected at 6-month intervals (i.e. at baseline, 6 and 12 months), in summer and winter to determine the axial eye growth. Personal ambient light exposure data were measured in winter and summer months with wearable sensors, from which the mean daily time exposed to bright (outdoor) light levels (&amp;amp;amp;gt;1000 lux) was derived. RESULTS: Greater daily bright light exposure was associated with less axial eye growth (beta = -0.002, p = 0.006) over 12 months. In summer, myopes exhibited significantly greater changes in axial length (mean change 0.04 +/- 0.05 mm) compared to emmetropes (-0.01 +/- 0.05 mm) (p = 0.001), but there was no significant difference between refractive groups in winter. Emmetropes also spent significantly greater time in outdoor light levels in summer compared to winter (p &amp;lt; 0.0001), while myopes spent similar time outdoors during both seasons (p = 0.12). Differences in light exposure between summer and winter were also associated with seasonal differences in axial eye growth (p = 0.026). CONCLUSION: In young adults, greater time spent in bright light was associated with slower longitudinal axial eye growth. Seasonal light exposure and axial length changes were dependent on refractive error in this population and also exhibited an inverse relationship.;,citation_author=S. Ulaganathan;,citation_author=S. A. Read;,citation_author=M. J. Collins;,citation_author=S. J. Vincent;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/30288926;,citation_issue=2;,citation_doi=10.1111/aos.13904;,citation_issn=1755-3768 (Electronic)
1755-375X (Linking);,citation_volume=97;,citation_journal_title=Acta Ophthalmol;">
<meta name="citation_reference" content="citation_title=Seasonal variation in human illumination exposure at two different latitudes;,citation_abstract=The authors measured ambient illumination exposure in healthy volunteers in San Diego, California (latitude 32 degrees 43’ N, n = 30), and Rochester, Minnesota (latitude 44 degrees 1’ N, n = 24), during each of the four quarters of the year, which were centered on the solstices and equinoxes. Subjects wore photosensors on their wrists and lapels (or foreheads while in bed) 24 h per day for an average of 5-6 days per quarter. The maximum of the two illumination readings was stored each minute. Annual average time spent per day in outdoor illumination (&amp;amp;amp;gt; or = 1000 lux) was significantly higher in San Diego than it was in Rochester (p &amp;lt; .04). Daily durations of illumination at or exceeding thresholds of 1, 10, 100, 1000, and 10,000 lux were highly seasonal in the sample as a whole (p &amp;lt; .01 at 1 lux, p < .0001 at other thresholds). Seasonal variation in outdoor illumination was far more pronounced in Rochester than it was in San Diego (interaction p < .001) but remained significant in San Diego (p < or = .03). Seasonal variation in indoor illumination was generally similar in the two cities. The median Rochester subject experienced illumination &amp;gt; or = 1000 lux for 2 h 23 min per day during summer and 23 min per day during winter. The corresponding times in San Diego were 2 h 10 min and 1 h 20 min. Neither age nor gender predicted illumination duration at any level. Both season and geographic location strongly influenced human illumination exposure, and behavior (choice of indoor vs. outdoor environment) was the most important mediating factor.;,citation_author=R. J. Cole;,citation_author=D. F. Kripke;,citation_author=J. Wisbey;,citation_author=W. J. Mason;,citation_author=W. Gruen;,citation_author=P. J. Hauri;,citation_author=S. Juarez;,citation_publication_date=1995;,citation_cover_date=1995;,citation_year=1995;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/8639941;,citation_issue=4;,citation_doi=10.1177/074873049501000406;,citation_issn=0748-7304 (Print)
0748-7304 (Linking);,citation_volume=10;,citation_journal_title=J Biol Rhythms;">
<meta name="citation_reference" content="citation_title=Daytime light exposure is a strong predictor of seasonal variation in sleep and circadian timing of university students;,citation_abstract=In the absence of electric light, sleep for humans typically starts soon after dusk and at higher latitudes daily sleep timing changes seasonally as photoperiod changes. However, access to electric light shields humans from natural photoperiod changes, and whether seasonal changes in sleep occur despite this isolation from the natural light-dark cycle remains a matter of controversy. We measured sleep timing in over 500 university students living in the city of Seattle, WA (47.6 degrees N) throughout the four seasons; we show that even when students are following a school schedule, sleep timing is delayed during the fall and winter. For instance, during the winter school days, students fell asleep 35 min later and woke up 27 min later (under daylight-savings time) than students during the summer school days, a change that is an hour larger relative to solar midnight. Furthermore, chronotype defined by mid-sleep on free days corrected for oversleep (MSFc), an indirect estimate of circadian phase, was more than 30 min later in the winter compared with the summer. Analysis of the effect of light exposure showed that the number of hours of light exposure to at least 50 lux during the daytime was a stronger predictor of MSFc than the exposure time to this illuminance after dusk. Specifically, MSFc was advanced by 30 min for each additional hour of light exposure during daytime and delayed by only 15 min for each additional hour of postdusk exposure to light. Additionally, the time of the day of exposure to high light intensities was more predictive of MSFc when daytime exposure was considered than when exposure for the full 24-h day was considered. Our results show that although sleep time is highly synchronized to social time, a delayed timing of sleep is evident during the winter months. They also suggest that daily exposure to daylight is key to prevent this delayed phase of the circadian clock and thus circadian disruption that is typically exacerbated in high-latitude winters.;,citation_author=G. P. Dunster;,citation_author=I. Hua;,citation_author=A. Grahe;,citation_author=J. G. Fleischer;,citation_author=S. Panda;,citation_author=Jr. Wright;,citation_author=C. Vetter;,citation_author=J. H. Doherty;,citation_author=H. O. Iglesia;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/36404490;,citation_issue=2;,citation_doi=10.1111/jpi.12843;,citation_issn=1600-079X (Electronic)
0742-3098 (Linking);,citation_volume=74;,citation_journal_title=J Pineal Res;">
<meta name="citation_reference" content="citation_title=Winter and summer outdoor light exposure in women with and without seasonal affective disorder;,citation_abstract=BACKGROUND: The annual decrease of daylight duration initiates a depressive phase in patients with seasonal affective disorder (SAD), and light therapy treats it. How much bright light exposure in winter and summer these patients actually receive may help understand the pathogenetic factors initiating SAD. METHODS: During a week in winter and summer, women with and without SAD kept daily logs of the time spent outdoors, subjective sleep, and self-ratings of mood and alertness. RESULTS: Compared with the winter depressive state, mood, alertness, and sleep of SAD patients improved in summer to control values, but did not correlate with the amount of light exposure. In summer, patients with SAD spent more time outdoors than controls. LIMITATION: Light logs–in comparison with light monitor measurements–may overestimate light exposure outdoors. CONCLUSION: Women with SAD do not spend less time outdoors in winter than controls, but spend more time outdoors in summer. CLINICAL RELEVANCE: Patients with SAD show a high amplitude seasonal difference in outdoor light exposure. The susceptibility to winter depression may arise not from behaviourally-related lack of sufficient light exposure, but an increased vulnerability to the amount of light received. They may require more light than controls to remain euthymic (higher light exposure in summer, light therapy in winter).;,citation_author=P. Graw;,citation_author=S. Recker;,citation_author=L. Sand;,citation_author=K. Krauchi;,citation_author=A. Wirz-Justice;,citation_publication_date=1999;,citation_cover_date=1999;,citation_year=1999;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/10701473;,citation_issue=2-3;,citation_doi=10.1016/s0165-0327(99)00037-3;,citation_issn=0165-0327 (Print)
0165-0327 (Linking);,citation_volume=56;,citation_journal_title=J Affect Disord;">
<meta name="citation_reference" content="citation_title=Comparison and correction of the light sensor output from 48 wearable light exposure devices by using a side-by-side field calibration method;,citation_author=Jakob Markvart;,citation_author=Åse Marie Hansen;,citation_author=Jens Christoffersen;,citation_publication_date=2015;,citation_cover_date=2015;,citation_year=2015;,citation_issue=3;,citation_doi=10.1080/15502724.2015.1020948;,citation_issn=1550-2724
1550-2716;,citation_volume=11;,citation_journal_title=Leukos;">
<meta name="citation_reference" content="citation_title=CIE s 026/e:2018: CIE system for metrology of optical radiation for ipRGC-influenced responses to light;,citation_author=undefined CIE;,citation_publication_date=2018;,citation_cover_date=2018;,citation_year=2018;,citation_doi=10.25039/S026.2018;,citation_publisher=CIE Central Bureau;">
<meta name="citation_reference" content="citation_title=CODECHECK: An open science initiative for the independent execution of computations underlying research articles during peer review to improve reproducibility;,citation_author=D. Nüst;,citation_author=S. J. Eglen;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/34367614;,citation_doi=10.12688/f1000research.51738.2;,citation_issn=2046-1402 (Electronic)
2046-1402 (Linking);,citation_volume=10;,citation_journal_title=F1000Res;">
<meta name="citation_reference" content="citation_title=Measuring and using light in the melanopsin age;,citation_abstract=Light is a potent stimulus for regulating circadian, hormonal, and behavioral systems. In addition, light therapy is effective for certain affective disorders, sleep problems, and circadian rhythm disruption. These biological and behavioral effects of light are influenced by a distinct photoreceptor in the eye, melanopsin-containing intrinsically photosensitive retinal ganglion cells (ipRGCs), in addition to conventional rods and cones. We summarize the neurophysiology of this newly described sensory pathway and consider implications for the measurement, production, and application of light. A new light-measurement strategy taking account of the complex photoreceptive inputs to these non-visual responses is proposed for use by researchers, and simple suggestions for artificial/architectural lighting are provided for regulatory authorities, lighting manufacturers, designers, and engineers.;,citation_author=R. J. Lucas;,citation_author=S. N. Peirson;,citation_author=D. M. Berson;,citation_author=T. M. Brown;,citation_author=H. M. Cooper;,citation_author=C. A. Czeisler;,citation_author=M. G. Figueiro;,citation_author=P. D. Gamlin;,citation_author=S. W. Lockley;,citation_author=J. B. O’Hagan;,citation_author=L. L. Price;,citation_author=I. Provencio;,citation_author=D. J. Skene;,citation_author=G. C. Brainard;,citation_publication_date=2014;,citation_cover_date=2014;,citation_year=2014;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/24287308;,citation_issue=1;,citation_doi=10.1016/j.tins.2013.10.004;,citation_issn=1878-108X (Electronic)
0166-2236 (Print)
0166-2236 (Linking);,citation_volume=37;,citation_journal_title=Trends Neurosci;">
<meta name="citation_reference" content="citation_title=Using light meters to investigate the light-myopia association - a literature review of devices and research methods;,citation_abstract=With the increasing prevalence of myopia, evaluating its relationship with objective light exposure as a potential adjustable environmental factor in myopia development has been an emerging research field in recent years. From a thorough literature search, we identify ten wearable light meters from human studies on light exposure and myopia and present an overview of their parameters, thereby demonstrating the wide between-device variability and discussing its implications. We further identify 20 publications, including two reanalyses, reporting investigations of light-myopia associations with data from human subjects wearing light meters. We thoroughly review the publications with respect to general characteristics, aspects of data collection, participant population, as well as data analysis and interpretation, and also assess potential patterns regarding the absence or presence of light-myopia associations in their results. In doing so, we highlight areas in which more research is needed as well as several aspects that warrant consideration in the study of light exposure and myopia.;,citation_author=A. Hönekopp;,citation_author=S. Weigelt;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/37743889;,citation_doi=10.2147/OPTH.S420631;,citation_issn=1177-5467 (Print)
1177-5483 (Electronic)
1177-5467 (Linking);,citation_volume=17;,citation_journal_title=Clin Ophthalmol;">
<meta name="citation_reference" content="citation_title=Wearable light-and-motion dataloggers for sleep/wake research: A review;,citation_author=Konstantin V. Danilenko;,citation_author=Oliver Stefani;,citation_author=Kirill A. Voronin;,citation_author=Marina S. Mezhakova;,citation_author=Ivan M. Petrov;,citation_author=Mikhail F. Borisenkov;,citation_author=Aleksandr A. Markov;,citation_author=Denis G. Gubin;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_issue=22;,citation_doi=10.3390/app122211794;,citation_issn=2076-3417;,citation_volume=12;,citation_journal_title=Applied Sciences;">
<meta name="citation_reference" content="citation_title=Usability and acceptability of a corneal-plane alpha-opic light logger in a 24-h field trial;,citation_abstract=INTRODUCTION: Exposure to light fundamentally influences human physiology and behaviour by synchronising our biological clock to the external light-dark cycle and controlling melatonin production. In addition to well-controlled laboratory studies, more naturalistic approaches to examining these &amp;amp;amp;quot;non-visual&amp;quot; effects of light have been developed in recent years. As naturalistic light exposure is quite unlike well-controlled stimulus conditions in the laboratory, it is critical to measure light exposure in a person-referenced way, the &quot;spectral diet.&quot; To this end, light loggers have been developed to capture personalised light exposure. As an alternative to light sensors integrated into wrist-worn actimeters, pendants, or brooch-based light loggers, a recently developed wearable light logger laterally attached to spectacle frames enables the measurement of biologically relevant quantities in the corneal plane. METHODS: Here, we examine the usability and acceptability of using the light logger in an undergraduate student sample (n = 18, mean+/-1SD: 20.1 +/- 1.7 years; 9 female; Oxford, UK) in real-world conditions during a 24-h measurement period. We probed the acceptability of the light logger using rating questionnaires and open-ended questions. RESULTS: Our quantitative results show a modest acceptability of the light logger. A thematic analysis of the open-ended questions reveals that the form factor of the device, in particular, size, weight, and stability, and reactions from other people to the wearer of the light logger, were commonly mentioned aspects. CONCLUSION: In sum, the results indicate the miniaturisation of light loggers and &quot;invisible&quot; integration into extant everyday objects as key areas for future technological development, facilitating the availability of light exposure data for developing personalised intervention strategies in both research, clinical and consumer contexts.;,citation_author=E. Balajadia;,citation_author=S. Garcia;,citation_author=J. Stampfli;,citation_author=B. Schrader;,citation_author=C. Guidolin;,citation_author=M. Spitschan;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/37901367;,citation_issue=1;,citation_doi=10.1159/000531404;,citation_issn=2504-110X (Electronic)
2504-110X (Linking);,citation_volume=7;,citation_journal_title=Digit Biomark;">
<meta name="citation_reference" content="citation_title=Wearable light loggers in field conditions: Corneal light characteristics, user compliance, and acceptance;,citation_abstract=Understanding user challenges with light dosimeters is crucial for designing more acceptable devices and advancing light exposure research. We systematically evaluated the usability and acceptability of a light dosimeter (lido) with 29 participants who wore the dosimeter near the corneal plane of the eye for 5 days. Common reasons for not wearing the dosimeter included exercise, recharging, wet environments, public places, and discomfort. Despite these issues, participants adhered to using the dosimeter with high compliance (89;,citation_author=O. Stefani;,citation_author=R. Marek;,citation_author=J. Schwarz;,citation_author=S. Plate;,citation_author=J. Zauner;,citation_author=B. Schrader;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/39584971;,citation_issue=4;,citation_doi=10.3390/clockssleep6040042;,citation_issn=2624-5175 (Electronic)
2624-5175 (Linking);,citation_volume=6;,citation_journal_title=Clocks Sleep;">
<meta name="citation_reference" content="citation_title=Validating the use of wrist-level light monitoring for in-hospital circadian studies;,citation_abstract=This clinical methods comparison study describes the difference between light levels measured at the wrist (Actiwatch-L) and at the eye (Daysimeter) in a postoperative in-patient population. The mean difference between the two devices was less than 10 lux at light levels less than 5000 lux. Agreement between the devices was found to decrease as eye-level light exposure increased. Measurements at eye level of 5000 lux or more corresponded to a difference between the devices of greater than 100 lux. Agreement between the eye- and wrist-level light measurements also appears to be influenced by time of day. During the day, the measurement differences were on average 50 lux higher at eye level, whereas at night they were on average 50 lux lower. Although the wrist-level monitor was found to underestimate light exposure at higher light levels, it was well tolerated by participants in the clinical setting. In contrast, the eye-level monitor was cumbersome and uncomfortable for the patients to wear. This study provides light-exposure data on patients in real conditions in the clinical environment. The results show that wrist-level monitoring provides an adequate estimate of light exposure for in-hospital circadian studies.;,citation_author=A. C. Jardim;,citation_author=M. D. Pawley;,citation_author=J. F. Cheeseman;,citation_author=M. J. Guesgen;,citation_author=C. T. Steele;,citation_author=G. R. Warman;,citation_publication_date=2011;,citation_cover_date=2011;,citation_year=2011;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/21936617;,citation_issue=9;,citation_doi=10.3109/07420528.2011.611603;,citation_issn=1525-6073 (Electronic)
0742-0528 (Linking);,citation_volume=28;,citation_journal_title=Chronobiol Int;">
<meta name="citation_reference" content="citation_title=Effect of mount location on the quantification of light intensity in myopia study;,citation_abstract=PURPOSE: To investigate how the mounting location of wearable devices affects the measurement of light intensity. METHODS: Two commercially available wearable devices, HOBO and Clouclip, were used to compare the effects of different mount locations on light intensity measurement. We assessed the consistency of the measurements of the two devices by placing a HOBO and a Clouclip simultaneously in 26 different light environments and measuring the light intensity. To simulate the real-life usage scenarios of the two devices, we had 29 participants wear two HOBOs-one on the wrist and the other on the chest-along with a Clouclip on their spectacles for 1 day; meanwhile, the light intensity was measured and analysed. RESULTS: When under the same light environments, the light intensity measured by the Clouclip was 1.09 times higher than that by the HOBO, with an additional 82.62 units (r(2)=1.00, p&amp;amp;amp;lt;0.001). When simulating the real-life scenarios, the mean light intensity at the eye-level position was significantly lower than that at the chest position (189.13+/-665.78 lux vs 490.75+/-1684.29 lux, p&amp;lt;0.001) and the wrist position (189.13+/-665.78 lux vs 483.87+/-1605.50 lux, p<0.001). However, there was no significant difference in light intensity between the wrist and chest positions (483.87+/-1605.50 lux vs 490.75+/-1684.29 lux, p=1.00). Using a threshold of 1000 lux for outdoor exposure, the estimated light exposure at the eye-level position was significantly lower than that at the chest position (3.9;,citation_author=L. Wen;,citation_author=H. Liu;,citation_author=Z. Chen;,citation_author=Q. Xu;,citation_author=Z. Hu;,citation_author=W. Lan;,citation_author=Z. Yang;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/38154910;,citation_issue=1;,citation_doi=10.1136/bmjophth-2023-001409;,citation_issn=2397-3269 (Electronic)
2397-3269 (Linking);,citation_volume=8;,citation_journal_title=BMJ Open Ophthalmol;">
<meta name="citation_reference" content="citation_title=Wearable sensors for measurement of viewing behavior, light exposure, and sleep;,citation_abstract=The purpose of this study was to compare two wearable sensors to each other and to a questionnaire in an adult population. For one week, participants aged 29.2 +/- 5.5 years (n = 25) simultaneously wore a Clouclip, a spectacle-mounted device that records viewing distance and illuminance, and an Actiwatch, a wrist-worn device that measures illuminance and activity. Participants maintained a daily log of activities and completed an activity questionnaire. Objective measures of time outdoors, near (10-&amp;amp;amp;lt; 60 cm) and intermediate (60-100 cm) viewing, and sleep duration were assessed with respect to the daily log and questionnaire. Findings showed that time outdoors per day from the questionnaire (3.2 +/- 0.3 h) was significantly greater than the Clouclip (0.9 +/- 0.8 h) and Actiwatch (0.7 +/- 0.1 h, p &amp;lt; 0.001 for both). Illuminance from the Actiwatch was systematically lower than the Clouclip. Daily near viewing duration was similar between the questionnaire (5.7 +/- 0.6 h) and Clouclip (6.1 +/- 0.4 h, p = 0.76), while duration of intermediate viewing was significantly different between methods (p < 0.001). In conclusion, self-reported time outdoors and viewing behaviors were different than objective measures. The Actiwatch and Clouclip are valuable tools for studying temporal patterns of behavioral factors such as near work, light exposure, and sleep.;,citation_author=K. R. Bhandari;,citation_author=H. Mirhajianmoghadam;,citation_author=L. A. Ostrin;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/34770402;,citation_issue=21;,citation_doi=10.3390/s21217096;,citation_issn=1424-8220 (Electronic)
1424-8220 (Linking);,citation_volume=21;,citation_journal_title=Sensors (Basel);">
<meta name="citation_reference" content="citation_title=A wrist-worn internet of things sensor node for wearable equivalent daylight illuminance monitoring;,citation_abstract=Light exposure is a vital regulator of physiology and behavior in humans. However, monitoring of light exposure is not included in current wearable Internet of Things (IoT) devices, and only recently have international standards defined [Formula: see text] -optic equivalent daylight illuminance (EDI) measures for how the eye responds to light. This article reports a wearable light sensor node that can be incorporated into the IoT to provide monitoring of EDI exposure in real-world settings. We present the system design, electronic performance testing, and accuracy of EDI measurements when compared to a calibrated spectral source. This includes consideration of the directional response of the sensor, and a comparison of performance when placed on different parts of the body, and a demonstration of practical use over 7 days. Our device operates for 3.5 days between charges, with a sampling period of 30 s. It has 10 channels of measurement, over the range 415-910 nm, balancing accuracy and cost considerations. Measured [Formula: see text]-opic EDI results for 13 devices show a mean absolute error of less than 0.07 log lx, and a minimum between device correlation of 0.99. These findings demonstrate that accurate light sensing is feasible, including at wrist worn locations. We provide an experimental platform for use in future investigations in real-world light exposure monitoring and IoT-based lighting control.;,citation_author=N. Mohammadian;,citation_author=A. Didikoglu;,citation_author=C. Beach;,citation_author=P. Wright;,citation_author=J. W. Mouland;,citation_author=F. P. Martial;,citation_author=S. Johnson;,citation_author=M. Tongeren;,citation_author=T. M. Brown;,citation_author=R. J. Lucas;,citation_author=A. J. Casson;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/38765485;,citation_issue=9;,citation_doi=10.1109/JIOT.2024.3355330;,citation_issn=2327-4662 (Print)
2327-4662 (Electronic)
2327-4662 (Linking);,citation_volume=11;,citation_journal_title=IEEE Internet Things J;">
<meta name="citation_reference" content="citation_title=Performance of personally worn dosimeters to study non-image forming effects of light: Assessment methods;,citation_author=Mariëlle P. J. Aarts;,citation_author=Juliëtte Duijnhoven;,citation_author=Myriam B. C. Aries;,citation_author=Alexander L. P. Rosemann;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_doi=10.1016/j.buildenv.2017.03.002;,citation_issn=03601323;,citation_volume=117;,citation_journal_title=Building and Environment;">
<meta name="citation_reference" content="citation_title=Reactivity of measurement in health psychology: How much of a problem is it? What can be done about it?;,citation_abstract=PURPOSE: Measurement reactivity is defined as being present where measurement results in changes in the people being measured. The main aim of this review is to provide an overview of the current state of knowledge concerning the extent and nature of psychological measurement affecting people who complete the measures. Other aims are to describe how this may affect conclusions drawn in health psychology research and to outline where more research is needed. METHODS: Narrative review. RESULTS: Several studies, using a variety of methods, have found measurement procedures to alter subsequent cognition, emotion, and behaviour. In many instances, the effects obtained were of up to medium size. However, the extent to which such studies are representative is not clear: do other studies which find no reactive effects of measurement not exist or do they exist but are not reported? CONCLUSIONS: Although measurement reactivity can yield medium-sized effects, our understanding of this phenomenon is still rudimentary. We do not know the precise circumstances that are likely to result in measurement reactivity: we cannot predict when problems are more likely to arise. There is a particular absence of studies of the mechanisms by which measurement reactivity arises. There is a need for a systematic review of this literature, which should aim to quantify the extent of measurement reactivity effects and to provide a firmer evidence base for theorizing about the sources of reactivity.;,citation_author=D. P. French;,citation_author=S. Sutton;,citation_publication_date=2010;,citation_cover_date=2010;,citation_year=2010;,citation_fulltext_html_url=https://www.ncbi.nlm.nih.gov/pubmed/20205982;,citation_issue=Pt 3;,citation_doi=10.1348/135910710X492341;,citation_issn=1359-107X (Print)
1359-107X (Linking);,citation_volume=15;,citation_journal_title=Br J Health Psychol;">
<meta name="citation_reference" content="citation_title=How to deal with darkness: Modeling and visualization of zero-inflated personal light exposure data on a logarithmic scale;,citation_abstract=Measuring and analyzing personal light exposure has become increasingly important in circadian and myopia research. Very small measurement values in light exposure patterns, especially zero, are regularly recorded in field studies. These zero-lux values are problematic for commonly applied logarithmic transformations and should neither be dismissed nor be unduly influential in visualizations and statistical modeling. We compare 4 ways to visualize such data on a linear, logarithmic, hybrid, or symlog scale, and we model the light exposure patterns with a generalized additive model by removing zero-lux values, adding a very small or −1 log10 lux value to the dataset, or using the Tweedie error distribution. We show that a symlog-transformed visualization, implemented in LightLogR, displays relevant features of light exposure across scales, including zero-lux, while reducing the emphasis on the small values (&amp;amp;amp;lt;1 lux). Symlog is well-suited to visualize differences in light exposure covering heavy-tailed negative values. We further show that small but not negligible value additions to the light exposure data of −1 log10 lux for statistical modeling allow for acceptable models on a logarithmic scale, while very small values distort results. We also demonstrate the utility of the Tweedie distribution, which does not require prior transformations, models data on a logarithmic scale, and includes zero-lux values, capturing personal light exposure patterns satisfactorily. Data from field studies of personal light exposure require appropriate handling of zero-lux values in a logarithmic context. Symlog scales for visualizations and an appropriate addition to input values for modeling, or the Tweedie distribution, provide a solid basis. Beyond light exposure, other time-series data relevant to biological rhythms, such as accelerometry for ambulatory sleep scoring in humans or wheel-running in animal models, exhibit zero inflation and can benefit from the methods introduced here.;,citation_author=Johannes Zauner;,citation_author=Carolina Guidolin;,citation_author=Manuel Spitschan;,citation_publication_date=00;,citation_cover_date=00;,citation_year=0;,citation_fulltext_html_url= 
    
        https://doi.org/10.1177/07487304251336624
    
    

;,citation_issue=0;,citation_doi=10.1177/07487304251336624;,citation_volume=0;,citation_journal_title=Journal of Biological Rhythms;">
</head>

  <body class="quarto-notebook quarto-light">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link" href=""><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> Article Notebook</h6>

            <a href="./index.qmd" class="btn btn-primary quarto-download-embed" download="index.qmd">Download Source</a>
          </div>

     <header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Tutorial on analysis pipelines for visual experience datasets</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
        
        <div class="quarto-title-meta">

                <div>
            <div class="quarto-title-meta-heading">Author</div>
            <div class="quarto-title-meta-contents">
                        <p>Johannes Zauner, Aaron Nicholls, Lisa Ostrin, and Manuel Spitschan </p>
                      </div>
          </div>
                
                <div>
            <div class="quarto-title-meta-heading">Last modified:</div>
            <div class="quarto-title-meta-contents">
              <p class="date">July 8, 2025</p>
            </div>
          </div>
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract"><span class="header-section-number">1</span> Abstract</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">2</span> Introduction</a></li>
  <li><a href="#methods-and-materials" id="toc-methods-and-materials" class="nav-link" data-scroll-target="#methods-and-materials"><span class="header-section-number">3</span> Methods and materials</a>
  <ul class="collapse">
  <li><a href="#software" id="toc-software" class="nav-link" data-scroll-target="#software"><span class="header-section-number">3.1</span> Software</a></li>
  <li><a href="#metric-selection-and-definitions" id="toc-metric-selection-and-definitions" class="nav-link" data-scroll-target="#metric-selection-and-definitions"><span class="header-section-number">3.2</span> Metric selection and definitions</a></li>
  <li><a href="#devices" id="toc-devices" class="nav-link" data-scroll-target="#devices"><span class="header-section-number">3.3</span> Devices</a></li>
  <li><a href="#data-import-preparation" id="toc-data-import-preparation" class="nav-link" data-scroll-target="#data-import-preparation"><span class="header-section-number">3.4</span> Data import &amp; preparation</a></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results"><span class="header-section-number">4</span> Results</a>
  <ul class="collapse">
  <li><a href="#distance" id="toc-distance" class="nav-link" data-scroll-target="#distance"><span class="header-section-number">4.1</span> Distance</a></li>
  <li><a href="#light" id="toc-light" class="nav-link" data-scroll-target="#light"><span class="header-section-number">4.2</span> Light</a></li>
  <li><a href="#spectrum" id="toc-spectrum" class="nav-link" data-scroll-target="#spectrum"><span class="header-section-number">4.3</span> Spectrum</a></li>
  </ul></li>
  <li><a href="#discussion-and-conclusion" id="toc-discussion-and-conclusion" class="nav-link" data-scroll-target="#discussion-and-conclusion"><span class="header-section-number">5</span> Discussion and conclusion</a></li>
  <li><a href="#sessioninfo" id="toc-sessioninfo" class="nav-link" data-scroll-target="#sessioninfo"><span class="header-section-number">6</span> Session info</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">7</span> References</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">      

       <section id="abstract" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="abstract"><span class="header-section-number">1</span> Abstract</h2>
<p>This tutorial presents an analysis pipeline for visual experience datasets, with a focus on reproducible workflows tailored for use in human chronobiology and myopia research. Light exposure and its retinal encoding affect human physiology and behaviour over various time scales. Here, we provide step-by-step instructions for importing, visualising, and processing data for viewing distance and light exposure data using the open-source tool LightLogR. This includes time-series analysis for working distance, spectral characteristics, and biologically relevant light metrics. By leveraging a modular approach, this tutorial supports researchers in building flexible and robust pipelines that can accommodate diverse experimental paradigms and measurement systems.</p>
</section>
<section id="introduction" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="introduction"><span class="header-section-number">2</span> Introduction</h2>
<p>Exposure to the optical environment — often referred to as visual experience — profoundly influences human physiology and behaviour across multiple time scales. Two notable examples, though from distinct research domains, can be understood through a common, retinally-referenced conceptual framework.</p>
<p>The first relates to the non-visual effects of light on human circadian and neuroendocrine physiology. The light–dark cycle entrains the circadian clock, and light exposure during the night suppresses melatonin production <span class="citation" data-cites="Brown2022PLoSBiol Blume2019Somnologie">(<a href="#ref-Brown2022PLoSBiol" role="doc-biblioref">Brown et al. 2022</a>; <a href="#ref-Blume2019Somnologie" role="doc-biblioref">Blume, Garbazza, and Spitschan 2019</a>)</span>.</p>
<p>The second concerns the influence of visual experience on ocular development, particularly myopia. Time spent outdoors — characterised by distinct optical environments — has been consistently associated with protective effects on ocular growth and health outcomes <span class="citation" data-cites="DahlmannNoor2025GraefesArchClinExpOphthal">(<a href="#ref-DahlmannNoor2025GraefesArchClinExpOphthal" role="doc-biblioref">Dahlmann-Noor et al. 2025</a>)</span>.</p>
<p>In controlled laboratory settings, light exposure can be held constant or manipulated parametrically. However, such exposures rarely replicate real-world conditions, which are inherently complex and dynamic. As people move in and between spaces (indoors and outdoors) and move their body, head, and eyes, the exposure to the optical environment varies significantly <span class="citation" data-cites="Webler2019CurrOpinBehavSci">(<a href="#ref-Webler2019CurrOpinBehavSci" role="doc-biblioref">Webler et al. 2019</a>)</span>, and is modulated by behaviour <span class="citation" data-cites="Biller2024CommunPsychol">(<a href="#ref-Biller2024CommunPsychol" role="doc-biblioref">Biller, Balakrishnan, and Spitschan 2024</a>)</span>. Wearable devices for measuring light exposure have thus emerged as vital tools in capturing the richness of ecological visual experience. These tools generate high-dimensional datasets that demand rigorous and flexible analysis strategies.</p>
<p>Starting in the 1980s <span class="citation" data-cites="Okudaira1983AmJPhysiol">(<a href="#ref-Okudaira1983AmJPhysiol" role="doc-biblioref">Okudaira, Kripke, and Webster 1983</a>)</span>, technology to measure exposure to the optical environment has been developed and matured, with miniaturized illuminance sensors now (2025) being very common in consumer smartwatches. In research, several device and device types are available, which differ in their functionality, ranging from small pin-like devices measuring light exposure <span class="citation" data-cites="Mohamed2021OptExpress">(<a href="#ref-Mohamed2021OptExpress" role="doc-biblioref">Mohamed et al. 2021</a>)</span> to head-mounted multi-modal measurement devices capturing almost all relevant aspects of visual experience <span class="citation" data-cites="Gibaldi2024TranslVisSciTechnol">(<a href="#ref-Gibaldi2024TranslVisSciTechnol" role="doc-biblioref">Gibaldi et al. 2024</a>)</span>. With the increased technical capabilities in wearables come considerably complex and dense datasets. These go hand in hand with a significant number of metrics, as revealed by review papers, in both fields.</p>
<p>At present, the analysis processes to derive metrics are often implemented on a by-workgroup, or even by-researcher basis, which is both a potential source of errors and inconsistencies between publications, and also a considerable time sink for researchers <span class="citation" data-cites="Hartmeyer2022LightResTechnol">(<a href="#ref-Hartmeyer2022LightResTechnol" role="doc-biblioref">Hartmeyer, Webler, and Andersen 2022</a>)</span>. Too often, more time is spent preparing the data than in actually gaining insights through rigoruous statistical testing and exploration. The preparation tasks are best handled, or at least facilitated, by standardized, transparent, and community-based pipelines for analysis <span class="citation" data-cites="Zauner2024PLOSONE">(<a href="#ref-Zauner2024PLOSONE" role="doc-biblioref">L. A. S. Zauner Johannes AND Udovicic 2024</a>)</span>.</p>
<p>In circadian research, the package LightLogR for R statistical software was developed <span class="citation" data-cites="Zauner2025JOpenSourceSoftw">(<a href="#ref-Zauner2025JOpenSourceSoftw" role="doc-biblioref">J. Zauner, Hartmeyer, and Spitschan 2025</a>)</span>. LightLogR is an open-source, MIT licensed, and community-driven package specifically made to work with data from wearable light loggers and optical radiation dosimeters. It also contains functions to calculate over sixty different metrics used in the field <span class="citation" data-cites="Hartmeyer2023LightResTechnol">(<a href="#ref-Hartmeyer2023LightResTechnol" role="doc-biblioref">Hartmeyer and Andersen 2023</a>)</span>. In a recent <a href="https://tscnlab.github.io/LightLogR/news/index.html#lightlogr-090-sunrise">update</a> the package was significantly expanded to deal with modalities beyond illuminance, like distance or even light spectra, which are highly relevant for myopia research <span class="citation" data-cites="Honekopp2023ClinOphthalmol">(<a href="#ref-Honekopp2023ClinOphthalmol" role="doc-biblioref">Hönekopp and Weigelt 2023</a>)</span>.</p>
<p>In this article we show that the analysis pipelines and metric functions in LightLogR naturally apply to the whole field of visual experience, not just circadian research and chronobiology. Our approach is modular and extensible, allowing researchers to adapt it to a variety of devices and research questions. Emphasis is placed on clarity, transparency, and reproducibility, aligning with best practices in scientific computing and open science. We use data from two devices to demonstrate the LightLogR workflow and output with metrics relevant in the field of myopia, covering metrics for working distance, daylight exposure, and spectral analyses. It is recommended to recreate the analysis in this script. All necessary data and code are provided under an open license in the <a href="https://github.com/tscnlab/ZaunerEtAl2025JOV">GitHub repository</a>.</p>
</section>
<section id="methods-and-materials" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="methods-and-materials"><span class="header-section-number">3</span> Methods and materials</h2>
<section id="software" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="software"><span class="header-section-number">3.1</span> Software</h3>
<p>This tutorial is built with <code>Quarto</code>, an open-source scientific and technical publishing system, integrating text, code, and code-output into a single document. The source-code to reproduce the outcomes is part of the document and accessible via the <code>code-tools</code> menu.</p>
<p>Package <code>LightLogR</code> (Version 0.9.1 “Sunrise”) was used with R statistical software (Version 4.4.3 “Trophy Case”). We further used the <code>tidyverse</code> package (Version 2.0.0) for principled data analysis, which <code>LightLogR</code> follows. Finally, the <code>gt</code> package (Version 1.0.0) was used for table generation. A comprehensive overview of the R computing environment can be found in the <a href="#sessioninfo">session info</a></p>
</section>
<section id="metric-selection-and-definitions" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="metric-selection-and-definitions"><span class="header-section-number">3.2</span> Metric selection and definitions</h3>
<p>In March of 2025, two workshops with researchers in the field of myopia, initiated by the Research Data Alliance (RDA) Working Group on Optical Radiation Exposure and Visual Experience Data focused on the current needs and future opportunities regarding data analysis, including metrics. Out of the expert inputs in these workshops, a list of visual experience metrics was collected, which is shown in <a href="#tbl-one" class="quarto-xref">Table&nbsp;1</a>. These include currently used metrics and definitions <span class="citation" data-cites="Wen2020bjophthalmol Wen2019TransVisSciTech Bhandari2020OphthalmicPhysiolOpt Williams2019Scientificreports">(<a href="#ref-Wen2020bjophthalmol" role="doc-biblioref">Wen et al. 2020</a>, <a href="#ref-Wen2019TransVisSciTech" role="doc-biblioref">2019</a>; <a href="#ref-Bhandari2020OphthalmicPhysiolOpt" role="doc-biblioref">Bhandari and Ostrin 2020</a>; <a href="#ref-Williams2019Scientificreports" role="doc-biblioref">Williams et al. 2019</a>)</span>, but also new metrics that are possible through spectrally-resolved measurements.</p>
<div id="tbl-one" class="hover bordered quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-one-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Overview of metrics. In all cases, the averages for weekday, weekend, and the mean daily value are calculated through [mean_daily](<a href="https://tscnlab.github.io/LightLogR/reference/mean_daily.html" class="uri">https://tscnlab.github.io/LightLogR/reference/mean_daily.html</a>).
</figcaption>
<div aria-describedby="tbl-one-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-bordered caption-top table">
<thead>
<tr class="header">
<th>No.</th>
<th>Name</th>
<th>Implementation<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><strong>Distance</strong></td>
<td></td>
</tr>
<tr class="even">
<td>1</td>
<td>Total wear time daily</td>
<td><a href="https://tscnlab.github.io/LightLogR/reference/durations.html">durations()</a></td>
</tr>
<tr class="odd">
<td>2</td>
<td><p>Duration of<br>
<em>Near work,<br>
Intermediate Work,<br>
Near + Intermediate Work,</em> or</p>
<p>per each <em>Distance range</em><br>
(10cm steps)</p></td>
<td><p>filter for distance range +</p>
<p><a href="https://tscnlab.github.io/LightLogR/reference/durations.html">durations()</a> (for single ranges)</p>
<p>or</p>
<p>grouping by distance range +</p>
<p><a href="https://tscnlab.github.io/LightLogR/reference/durations.html">durations()</a> (for all ranges)</p></td>
</tr>
<tr class="even">
<td>3</td>
<td>Frequency of<br>
<em>Continuous near work</em></td>
<td><p><a href="https://tscnlab.github.io/LightLogR/reference/extract_clusters.html">extract_clusters()</a> +</p>
<p><a href="https://tscnlab.github.io/LightLogR/reference/summarize_numeric.html">summarize_numeric()</a></p></td>
</tr>
<tr class="odd">
<td>4</td>
<td>Frequency,<br>
duration,<br>
and distances of<br>
<em>Near Work episodes</em></td>
<td><p><a href="https://tscnlab.github.io/LightLogR/reference/extract_clusters.html">extract_clusters()</a> +</p>
<p><a href="https://tscnlab.github.io/LightLogR/reference/extract_metric.html">extract_metric()</a> +</p>
<p><a href="https://tscnlab.github.io/LightLogR/reference/summarize_numeric.html">summarize_numeric()</a></p></td>
</tr>
<tr class="even">
<td>5</td>
<td>Frequency and duration of <em>Visual breaks</em></td>
<td><p><a href="https://tscnlab.github.io/LightLogR/reference/extract_clusters.html">extract_clusters()</a> +</p>
<p>filter</p></td>
</tr>
<tr class="odd">
<td></td>
<td><strong>Light</strong></td>
<td></td>
</tr>
<tr class="even">
<td>6</td>
<td>Light exposure (in lux)</td>
<td><a href="https://tscnlab.github.io/LightLogR/reference/summarize_numeric.html">summarize_numeric()</a></td>
</tr>
<tr class="odd">
<td>7</td>
<td>Duration per <em>Outdoor range</em></td>
<td><p>grouping by Outdoor range +</p>
<p><a href="https://tscnlab.github.io/LightLogR/reference/durations.html">durations()</a></p></td>
</tr>
<tr class="even">
<td>8</td>
<td>The number of times light level changes from indoor (&lt;1000 lx) to outdoor (&gt;1000 lx)</td>
<td><p><a href="https://tscnlab.github.io/LightLogR/reference/extract_states.html">extract_states()</a> +</p>
<p><a href="https://tscnlab.github.io/LightLogR/reference/summarize_numeric.html">summarize_numeric()</a></p></td>
</tr>
<tr class="odd">
<td>9</td>
<td>Longest period above 1000 lx</td>
<td><a href="https://tscnlab.github.io/LightLogR/reference/period_above_threshold.html">period_above_threshold()</a></td>
</tr>
<tr class="even">
<td></td>
<td><strong>Spectrum</strong></td>
<td></td>
</tr>
<tr class="odd">
<td>10</td>
<td>Ratio of short vs.&nbsp;long wavelength light</td>
<td><p><a href="https://tscnlab.github.io/LightLogR/reference/spectral_integration.html">spectral_integration()</a> +</p>
<p><a href="https://tscnlab.github.io/LightLogR/reference/summarize_numeric.html">summarize_numeric()</a></p></td>
</tr>
<tr class="even">
<td>11</td>
<td>Short-wavelength light at certain times of day</td>
<td><p><a href="https://tscnlab.github.io/LightLogR/reference/spectral_integration.html">spectral_integration()</a> + +</p>
<p><a href="https://tscnlab.github.io/LightLogR/reference/filter_Time.html">filter_Time()</a> (for defined times) or<br>
<a href="https://tscnlab.github.io/LightLogR/reference/cut_Datetime.html">cut_Datetime()</a> (for regular time intervals) or<br>
<a href="https://tscnlab.github.io/LightLogR/reference/photoperiod.html">add_photoperiod()</a> (for solar times) +</p>
<p>grouping by time state +</p>
<p><a href="https://tscnlab.github.io/LightLogR/reference/summarize_numeric.html">summarize_numeric()</a></p></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p><a href="#tbl-two" class="quarto-xref">Table&nbsp;2</a> contains definitions for the terms in <a href="#tbl-one" class="quarto-xref">Table&nbsp;1</a>. Note that these definitions may vary depending on the research question or device capabilities.</p>
<div id="tbl-two" class="hover bordered quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-two-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Definitions of mean daily and conditions for distance and illuminance calculation
</figcaption>
<div aria-describedby="tbl-two-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-bordered caption-top table">
<colgroup>
<col style="width: 10%">
<col style="width: 89%">
</colgroup>
<thead>
<tr class="header">
<th>Metric</th>
<th>Description / pseudo formula</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Total wear time</td>
<td><span class="math inline">\(\sum(t)*dt, \textrm{ where } t\textrm{: valid observations }\)</span></td>
</tr>
<tr class="even">
<td>Mean daily</td>
<td><span class="math inline">\(\frac{5*\bar{\textrm{weekday}} + 2*\bar{weekend}}{7}\)</span></td>
</tr>
<tr class="odd">
<td>Near work</td>
<td><span class="math inline">\(\textrm{working distance}, [10,60)cm\)</span></td>
</tr>
<tr class="even">
<td>Intermediate Work</td>
<td><span class="math inline">\(\textrm{working distance}, [60,100)cm\)</span></td>
</tr>
<tr class="odd">
<td>Total work</td>
<td><span class="math inline">\(\textrm{working distance}, [10,120)cm\)</span></td>
</tr>
<tr class="even">
<td>Distance range</td>
<td><span class="math inline">\(\textrm{working distance}, {[10,20)cm \textrm{,  Extremely near} \\ [20,30)cm \textrm{,  Very near} \\ [30,40)cm \textrm{,  Fairly near} \\ [40,50)cm \textrm{,  Near} \\ [50,60)cm \textrm{,  Moderately near} \\ [60,70)cm \textrm{,  Near intermediate} \\ [70,80)cm \textrm{,  Intermediate} \\ [80,90)cm \textrm{,  Moderately intermediate} \\ [90,100)cm \textrm{,  Far intermediate}}\)</span></td>
</tr>
<tr class="odd">
<td>Continuous near work</td>
<td><p><span class="math inline">\(\textrm{working distance}, [20,60)cm,\)</span></p>
<p><span class="math inline">\(T_\textrm{duration} ≥ 30 minutes, \textrm{ }T_{interruptions} ≤ 1 minute\)</span></p></td>
</tr>
<tr class="even">
<td>Near work episodes</td>
<td><p><span class="math inline">\(\textrm{working distance}, [20,60)cm,\)</span></p>
<p><span class="math inline">\(T_\textrm{interruptions} ≤ 20 seconds\)</span></p></td>
</tr>
<tr class="odd">
<td>Ratio of daily near work</td>
<td><span class="math inline">\(\frac{T_\textrm{near work}}{T_\textrm{total wear}}\)</span></td>
</tr>
<tr class="even">
<td>Visual break</td>
<td><span class="math inline">\(\textrm{working distance} ≥ 100cm, \\ T_\textrm{duration} ≥ 20 seconds, \textrm{ }T_\textrm{previous episode} ≤ 20 minutes\)</span></td>
</tr>
<tr class="odd">
<td>Outdoor range</td>
<td><span class="math inline">\(\textrm{illuminance}, {[1000,2000)lx \textrm{,  Outdoor bright} \\ [2000,3000)lx \textrm{,  Outdoor very bright} \\ [3000, \infty) lx \textrm{,  Outdoor extremely bright}}\)</span></td>
</tr>
<tr class="even">
<td>Light exposure<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></td>
<td><span class="math inline">\(\bar{illuminance}\)</span></td>
</tr>
<tr class="odd">
<td>Spectral bands</td>
<td><span class="math inline">\(\textrm{spectral irradiance}, {[380,500]nm \textrm{,  short wavelength light} \\ [600, 780]nm \textrm{,  long wavelength light}}\)</span></td>
</tr>
<tr class="even">
<td>Ratio of short vs.&nbsp;long wavelength light</td>
<td><span class="math inline">\(\frac{E_{e\textrm{,short wavelength}}}{E_{e\textrm{,long wavelength}}}\)</span></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="devices" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="devices"><span class="header-section-number">3.3</span> Devices</h3>
<p>Data from two devices will be used for analysis:</p>
<ul>
<li><p>Distance and light metrics will be calculated based on export from the <code>Clouclip</code> device <span class="citation" data-cites="Wen2021ActaOphtalmol Wen2020bjophthalmol">(Glasson Technology Co., Ltd, Hangzhou, China, <a href="#ref-Wen2021ActaOphtalmol" role="doc-biblioref">Wen et al. 2021</a>, <a href="#ref-Wen2020bjophthalmol" role="doc-biblioref">2020</a>)</span>. This device has a simple output of only <code>Distance</code> and <code>Illuminance</code> measurements. Data were recorded in <code>5-second intervals</code>. A weeks worth of data takes up about 1.6&nbsp;MB of storage.</p></li>
<li><p>Spectrum metrics will be calculated using data from a multi-modal device, the <code>Visual Environment Evaluation Tool</code> or <code>VEET</code> <span class="citation" data-cites="Sah2025OphtalmicPhysiolOpt">(Meta Platforms, Inc., Menlo Park, California, USA, <a href="#ref-Sah2025OphtalmicPhysiolOpt" role="doc-biblioref">Sah, Narra, and Ostrin 2025</a>)</span>. This dense dataset contains distance (spatially resolved), light, activity (accellerometer &amp; gyroscope), and spectrum measurements, recorded in <code>2-second intervals</code>. A weeks worth of data takes up about 270&nbsp;MB of storage.</p></li>
</ul>
</section>
<section id="data-import-preparation" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="data-import-preparation"><span class="header-section-number">3.4</span> Data import &amp; preparation</h3>
<p>This tutorial will start by importing a <code>Clouclip</code> dataset and providing an overview of the data. The <code>Clouclip</code> export is considerably simpler compared to the <code>VEET</code> export, only containing <code>Distance</code> and <code>Illuminance</code> measurements. The <code>VEET</code> dataset will be imported later for the spectrum related metrics.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [1]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.4     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(LightLogR)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<p><code>LightLogR</code> provides accessible import functionality for many wearable devices (18 at the time of writing). Required information are the file(s) and the time zone the device was set up with/recorded in (default is <code>UTC</code>). Many optional arguments let a user, e.g., extract <code>ID</code>s from the file name or correct for daylight savings jumps. The import also provides a comprehensive overview of the data, letting the user know of any gaps and irregularities in the data.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [2]:</pre></div><div id="cell-fig-importCC" class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import the data</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"data/Sample_Clouclip.csv"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>tz <span class="ot">&lt;-</span> <span class="st">"US/Central"</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>dataCC <span class="ot">&lt;-</span> import<span class="sc">$</span><span class="fu">Clouclip</span>(path, <span class="at">tz =</span> tz, <span class="at">manual.id =</span> <span class="st">"Clouclip"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Successfully read in 58'081 observations across 1 Ids from 1 Clouclip-file(s).
Timezone set is US/Central.
The system timezone is Europe/Berlin. Please correct if necessary!

First Observation: 2021-02-06 17:12:47
Last Observation: 2021-02-14 17:12:36
Timespan: 8 days

Observation intervals: 
  Id       interval.time            n pct     
1 Clouclip 5s                   54572 93.9601%
2 Clouclip 17s                     12 0.0207% 
3 Clouclip 18s                     14 0.0241% 
4 Clouclip 120s (~2 minutes)     3479 5.9900% 
5 Clouclip 128s (~2.13 minutes)     1 0.0017% 
6 Clouclip 132s (~2.2 minutes)      1 0.0017% 
7 Clouclip 133s (~2.22 minutes)     1 0.0017% </code></pre>
</div>
<div class="cell-output-display">
<div id="fig-importCC" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-importCC-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-importCC-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figure&nbsp;1: Overview plot of imported Clouclip data"><img src="index_files/figure-html/fig-importCC-1.png" class="img-fluid figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-importCC-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Overview plot of imported Clouclip data
</figcaption>
</figure>
</div>
</div>
</div></div>
<section id="exploration" class="level4" data-number="3.4.1">
<h4 data-number="3.4.1" class="anchored" data-anchor-id="exploration"><span class="header-section-number">3.4.1</span> Exploration</h4>
<p>Any dataset may conain gaps. The example <code>Clouclip</code> dataset here has many gaps in the data (see <a href="#fig-importCC" class="quarto-xref">Figure&nbsp;1</a>). Understanding how these relate to the measurements and the time of recording is essential. <code>LightLogR</code> provides tools to visualize and summarize these gaps.</p>
<p>In the presence of irregular data, i.e.&nbsp;data that does not fall in a regular sequence of datetimes, gap summaries can be computationally very expensive and inaccurate. For that reason, if it is not already visible from the import summary, it makes sense to check for irregular data.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [3]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> <span class="fu">has_irregulars</span>() <span class="co">#test for irregulars</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div></div>
<p>In the case of irregular data, it is recommended to visualize irregulars without recalculating implicit gaps, which are missing observations at regular intervals. See <a href="#fig-irregular" class="quarto-xref">Figure&nbsp;2</a>.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [4]:</pre></div><div id="cell-fig-irregular" class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>y.label <span class="ot">&lt;-</span> <span class="st">"Distance (cm)"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> <span class="fu">gg_gaps</span>(Dis, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">include.implicit.gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">show.irregulars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y.axis.label =</span> y.label,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">group.by.days =</span> <span class="cn">TRUE</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 5476 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-irregular" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-irregular-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-irregular-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Figure&nbsp;2: Visualization of gaps and irregular data. Black traces show available data. Red shaded areas show times of missing data. Red dots show instances where observations occur off the regular interval from start to finish, i.e., irregular data."><img src="index_files/figure-html/fig-irregular-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-irregular-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Visualization of gaps and irregular data. Black traces show available data. Red shaded areas show times of missing data. Red dots show instances where observations occur off the regular interval from start to finish, i.e., irregular data.
</figcaption>
</figure>
</div>
</div>
</div></div>
<p>In <a href="#fig-irregular" class="quarto-xref">Figure&nbsp;2</a>, it looks like data in every day but the first and last are considered irregular. This happens with some devices and requires manual handling. Strategies include:</p>
<ul>
<li><p>Removing some intervals from the start if the irregularities are due to the setup process. See <a href="https://tscnlab.github.io/LightLogR/reference/filter_Datetime.html">filter_Date() / filter_Datetime()</a> for a way to remove these. This is usually a good solution if only the first day has regular data and the rest is all irregular.</p></li>
<li><p>Rounding datetime values to the closest (5 second) interval. See <a href="https://tscnlab.github.io/LightLogR/reference/cut_Datetime.html">cut_Datetime()</a> for a helper function. This is appropriate if deviations from the dominant interval (5 seconds in this case) are infrequent and if rounded datetimes don’t lead to duplicated datetetimes.</p></li>
<li><p>Aggregating data into a coarser recording interval. See <a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Datetime.html">aggregate_Datetime()</a> for this option. This is appropriate in most cases, but leads to a loss in granularity.</p></li>
</ul>
<p>Based on the import summary, and the graph, we use the second option to deal with the irregular data.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [5]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># round observation times to the next 5-second interval</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>dataCC <span class="ot">&lt;-</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  dataCC <span class="sc">|&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cut_Datetime</span>(<span class="st">"5 secs"</span>, <span class="at">New.colname =</span> Datetime) <span class="sc">|&gt;</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_Date_col</span>(<span class="at">group.by =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [6]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [7]:</pre></div><div><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize the data</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> <span class="fu">gap_table</span>(Dis, <span class="at">Variable.label =</span> <span class="st">"Distance (cm)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_hide</span>(<span class="fu">contains</span>(<span class="st">"_n"</span>)) <span class="co">#remove the absolute number of data points</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-gaps" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-gaps-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Summary of missing and observed data for the Clouclip device
</figcaption>
<div aria-describedby="tbl-gaps-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="tcyfjxailq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#tcyfjxailq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#tcyfjxailq thead, #tcyfjxailq tbody, #tcyfjxailq tfoot, #tcyfjxailq tr, #tcyfjxailq td, #tcyfjxailq th {
  border-style: none;
}

#tcyfjxailq p {
  margin: 0;
  padding: 0;
}

#tcyfjxailq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#tcyfjxailq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#tcyfjxailq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#tcyfjxailq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#tcyfjxailq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tcyfjxailq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tcyfjxailq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tcyfjxailq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#tcyfjxailq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#tcyfjxailq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#tcyfjxailq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#tcyfjxailq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#tcyfjxailq .gt_spanner_row {
  border-bottom-style: hidden;
}

#tcyfjxailq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#tcyfjxailq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#tcyfjxailq .gt_from_md > :first-child {
  margin-top: 0;
}

#tcyfjxailq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#tcyfjxailq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#tcyfjxailq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#tcyfjxailq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#tcyfjxailq .gt_row_group_first td {
  border-top-width: 2px;
}

#tcyfjxailq .gt_row_group_first th {
  border-top-width: 2px;
}

#tcyfjxailq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tcyfjxailq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#tcyfjxailq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#tcyfjxailq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tcyfjxailq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tcyfjxailq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#tcyfjxailq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#tcyfjxailq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#tcyfjxailq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tcyfjxailq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tcyfjxailq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tcyfjxailq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tcyfjxailq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tcyfjxailq .gt_left {
  text-align: left;
}

#tcyfjxailq .gt_center {
  text-align: center;
}

#tcyfjxailq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#tcyfjxailq .gt_font_normal {
  font-weight: normal;
}

#tcyfjxailq .gt_font_bold {
  font-weight: bold;
}

#tcyfjxailq .gt_font_italic {
  font-style: italic;
}

#tcyfjxailq .gt_super {
  font-size: 65%;
}

#tcyfjxailq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#tcyfjxailq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#tcyfjxailq .gt_indent_1 {
  text-indent: 5px;
}

#tcyfjxailq .gt_indent_2 {
  text-indent: 10px;
}

#tcyfjxailq .gt_indent_3 {
  text-indent: 15px;
}

#tcyfjxailq .gt_indent_4 {
  text-indent: 20px;
}

#tcyfjxailq .gt_indent_5 {
  text-indent: 25px;
}

#tcyfjxailq .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#tcyfjxailq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="gt_heading header">
<th colspan="14" class="gt_heading gt_title gt_font_normal">Summary of available and missing data</th>
</tr>
<tr class="gt_heading even">
<th colspan="14" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Variable: Distance (cm)</th>
</tr>
<tr class="gt_col_headings gt_spanner_row header">
<th data-quarto-table-cell-role="th" scope="col"></th>
<th colspan="5" id="data_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold; font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Data
</div></th>
<th colspan="8" id="missing_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold; font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Missing
</div></th>
</tr>
<tr class="gt_col_headings gt_spanner_row even">
<th rowspan="2" id="a::stub" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th colspan="2" id="Regular" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Regular
</div></th>
<th id="irregular_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Irregular
</div></th>
<th id="Range" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Range
</div></th>
<th id="interval_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Interval
</div></th>
<th colspan="4" id="gap_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Gaps
</div></th>
<th colspan="2" id="implicit_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Implicit
</div></th>
<th colspan="2" id="explicit_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Explicit
</div></th>
</tr>
<tr class="gt_col_headings header">
<th id="available_data" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="available_data_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="number_irregulars" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1,2</sup></span></th>
<th id="total_duration" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="interval" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="number_gaps" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">N</th>
<th id="mean_gap_duration" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ø</th>
<th id="missing_data" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_data_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="missing_implicit" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_implicit_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="missing_explicit" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_explicit_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td id="grand_summary_stub_1" class="gt_row gt_left gt_stub gt_grand_summary_row gt_last_grand_summary_row_top" data-quarto-table-cell-role="th" scope="row" style="background-color: #E5E5E5"><strong>Overall</strong></td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 available_data" style="background-color: #E5E5E5">2d 14h 43m 10s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 available_data_pct" style="background-color: #E5E5E5">29.0%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span></td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 number_irregulars" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 total_duration" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1w 2d</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 interval" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 number_gaps" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2,690</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 mean_gap_duration" style="background-color: #E5E5E5">1h 35m 57s</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_data" style="background-color: #E5E5E5">6d 9h 16m 50s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_data_pct" style="background-color: #E5E5E5">71.0%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span></td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_implicit" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5d 15h 19m 55s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_implicit_pct" style="background-color: #E5E5E5">62.7%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span></td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_explicit" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">17h 56m 55s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_explicit_pct" style="background-color: #E5E5E5">8.3%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span></td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="Clouclip - 2021-02-06" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip - 2021-02-06</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_1" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-06 stub_1_1 available_data">43m 30s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-06 stub_1_1 available_data_pct">3.0%</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-06 stub_1_1 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-06 stub_1_1 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-06 stub_1_1 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-06 stub_1_1 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">26</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-06 stub_1_1 mean_gap_duration">53m 43s</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-06 stub_1_1 missing_data">23h 16m 30s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-06 stub_1_1 missing_data_pct">97.0%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-06 stub_1_1 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">22h 53m 20s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-06 stub_1_1 missing_implicit_pct">95.4%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-06 stub_1_1 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">23m 10s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-06 stub_1_1 missing_explicit_pct">1.6%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="Clouclip - 2021-02-07" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip - 2021-02-07</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_2" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-07 stub_1_2 available_data">2h 45m</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-07 stub_1_2 available_data_pct">11.5%</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-07 stub_1_2 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-07 stub_1_2 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-07 stub_1_2 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-07 stub_1_2 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">139</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-07 stub_1_2 mean_gap_duration">9m 10s</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-07 stub_1_2 missing_data">21h 15m</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-07 stub_1_2 missing_data_pct">88.5%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-07 stub_1_2 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">19h 42m 35s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-07 stub_1_2 missing_implicit_pct">82.1%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-07 stub_1_2 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1h 32m 25s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-07 stub_1_2 missing_explicit_pct">6.4%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="Clouclip - 2021-02-08" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip - 2021-02-08</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_3" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-08 stub_1_3 available_data">11h 13m 55s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-08 stub_1_3 available_data_pct">46.8%</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-08 stub_1_3 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-08 stub_1_3 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-08 stub_1_3 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-08 stub_1_3 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">443</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-08 stub_1_3 mean_gap_duration">1m 44s</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-08 stub_1_3 missing_data">12h 46m 5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-08 stub_1_3 missing_data_pct">53.2%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-08 stub_1_3 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">10h 47m 50s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-08 stub_1_3 missing_implicit_pct">45.0%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-08 stub_1_3 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1h 58m 15s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-08 stub_1_3 missing_explicit_pct">8.2%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="Clouclip - 2021-02-09" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip - 2021-02-09</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_4" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-09 stub_1_4 available_data">8h 46m 25s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-09 stub_1_4 available_data_pct">36.6%</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-09 stub_1_4 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-09 stub_1_4 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-09 stub_1_4 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-09 stub_1_4 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">278</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-09 stub_1_4 mean_gap_duration">3m 17s</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-09 stub_1_4 missing_data">15h 13m 35s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-09 stub_1_4 missing_data_pct">63.4%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-09 stub_1_4 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">13h 50m</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-09 stub_1_4 missing_implicit_pct">57.6%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-09 stub_1_4 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1h 23m 35s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-09 stub_1_4 missing_explicit_pct">5.8%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="Clouclip - 2021-02-10" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip - 2021-02-10</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_5" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-10 stub_1_5 available_data">7h 1m 30s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-10 stub_1_5 available_data_pct">29.3%</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-10 stub_1_5 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-10 stub_1_5 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-10 stub_1_5 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-10 stub_1_5 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">367</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-10 stub_1_5 mean_gap_duration">2m 47s</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-10 stub_1_5 missing_data">16h 58m 30s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-10 stub_1_5 missing_data_pct">70.7%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-10 stub_1_5 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">14h 18m 40s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-10 stub_1_5 missing_implicit_pct">59.6%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-10 stub_1_5 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2h 39m 50s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-10 stub_1_5 missing_explicit_pct">11.1%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="Clouclip - 2021-02-11" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip - 2021-02-11</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_6" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-11 stub_1_6 available_data">8h 31m 55s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-11 stub_1_6 available_data_pct">35.5%</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-11 stub_1_6 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-11 stub_1_6 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-11 stub_1_6 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-11 stub_1_6 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">423</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-11 stub_1_6 mean_gap_duration">2m 12s</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-11 stub_1_6 missing_data">15h 28m 5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-11 stub_1_6 missing_data_pct">64.5%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-11 stub_1_6 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">11h 43m 30s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-11 stub_1_6 missing_implicit_pct">48.9%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-11 stub_1_6 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">3h 44m 35s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-11 stub_1_6 missing_explicit_pct">15.6%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="Clouclip - 2021-02-12" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip - 2021-02-12</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_7" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-12 stub_1_7 available_data">12h 17m 55s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-12 stub_1_7 available_data_pct">51.2%</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-12 stub_1_7 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-12 stub_1_7 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-12 stub_1_7 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-12 stub_1_7 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">417</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-12 stub_1_7 mean_gap_duration">1m 41s</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-12 stub_1_7 missing_data">11h 42m 5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-12 stub_1_7 missing_data_pct">48.8%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-12 stub_1_7 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">9h 17m 45s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-12 stub_1_7 missing_implicit_pct">38.7%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-12 stub_1_7 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2h 24m 20s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-12 stub_1_7 missing_explicit_pct">10.0%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="Clouclip - 2021-02-13" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip - 2021-02-13</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_8" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-13 stub_1_8 available_data">10h 32m 15s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-13 stub_1_8 available_data_pct">43.9%</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-13 stub_1_8 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-13 stub_1_8 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-13 stub_1_8 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-13 stub_1_8 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">527</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-13 stub_1_8 mean_gap_duration">1m 32s</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-13 stub_1_8 missing_data">13h 27m 45s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-13 stub_1_8 missing_data_pct">56.1%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-13 stub_1_8 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">10h 42m 10s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-13 stub_1_8 missing_implicit_pct">44.6%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-13 stub_1_8 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2h 45m 35s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-13 stub_1_8 missing_explicit_pct">11.5%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="Clouclip - 2021-02-14" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip - 2021-02-14</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_9" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-14 stub_1_9 available_data">50m 45s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-14 stub_1_9 available_data_pct">3.5%</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-14 stub_1_9 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-14 stub_1_9 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-14 stub_1_9 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-14 stub_1_9 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">70</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-14 stub_1_9 mean_gap_duration">19m 51s</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-14 stub_1_9 missing_data">23h 9m 15s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-14 stub_1_9 missing_data_pct">96.5%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-14 stub_1_9 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">22h 4m 5s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-14 stub_1_9 missing_implicit_pct">92.0%</td>
<td class="gt_row gt_center" headers="Clouclip - 2021-02-14 stub_1_9 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1h 5m 10s</td>
<td class="gt_row gt_right" headers="Clouclip - 2021-02-14 stub_1_9 missing_explicit_pct">4.5%</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="14" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> If n &gt; 0: it is possible that the other summary statistics are affected, as they are calculated based on the most prominent interval.</td>
</tr>
<tr class="even">
<td colspan="14" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Number of (missing or actual) observations</td>
</tr>
<tr class="odd">
<td colspan="14" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Based on times, not necessarily number of observations</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
<p><a href="#tbl-gaps" class="quarto-xref">Table&nbsp;3</a> shows that there are no more irregular data after treatment. There are, however, considerable implicitly missing data, which can be converted to explicitly missing data with <a href="https://tscnlab.github.io/LightLogR/reference/gap_handler.html">gap_handler()</a>, which will make calculations based on the dataset much more robust. Furthermore, there are two days that have less than an hours worth of data. These will be removed.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [8]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#make implicit gaps explicit</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>dataCC <span class="ot">&lt;-</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  dataCC <span class="sc">|&gt;</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#add the operational tag to have all rows with a status:</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(Lux_status, Dis_status), \(x) <span class="fu">replace_na</span>(x, <span class="st">"operational"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#make gaps explicit:</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gap_handler</span>(<span class="at">full.days =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#remove days that have less than one hour of data</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_partial_data</span>(Dis, <span class="at">threshold.missing =</span> <span class="st">"23 hours"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<p>The <code>Clouclip</code> device uses sentinel values<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> to encode states in the measurement values. <code>LightLogR</code> converts these to a dedicated column upon import, and we can visualize them, alongside showing the photoperiod.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [9]:</pre></div><div id="cell-fig-state" class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#setting coordinates for Houston, Texas</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>coordinates <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">29.75</span>, <span class="sc">-</span><span class="fl">95.36</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># visualize observations</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(<span class="fu">c</span>(Lux_status, Dis_status), <span class="at">.direction =</span> <span class="st">"downup"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_day</span>(<span class="at">y.axis =</span> Dis, <span class="at">geom =</span> <span class="st">"line"</span>, <span class="at">y.axis.label =</span> y.label) <span class="sc">|&gt;</span> <span class="co">#create a basic plot</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_state</span>(Dis_status, <span class="at">aes_fill =</span> Dis_status) <span class="sc">|&gt;</span> <span class="co">#add the status times</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_photoperiod</span>(coordinates, <span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span> <span class="co">#add the photoperiod (day/night)</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 6889 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-state" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-state-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-state-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Figure&nbsp;3: Distance measurements across days. Blue, grey and yellow-colored areas show sentinel states of the device. Blue indicates an operational status, grey sleep mode (not recording), and yellow an out of range measurement. Red boxed areas show nighttime from civil dusk until dawn, which are calculated based on the recording date and geographic coordinates"><img src="index_files/figure-html/fig-state-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-state-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Distance measurements across days. Blue, grey and yellow-colored areas show sentinel states of the device. Blue indicates an operational status, grey sleep mode (not recording), and yellow an out of range measurement. Red boxed areas show nighttime from civil dusk until dawn, which are calculated based on the recording date and geographic coordinates
</figcaption>
</figure>
</div>
</div>
</div></div>
<p>With these data, the metrics can be calculated.</p>
</section>
</section>
</section>
<section id="results" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="results"><span class="header-section-number">4</span> Results</h2>
<section id="distance" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="distance"><span class="header-section-number">4.1</span> Distance</h3>
<p>In the following sections, daily values are calculated. The following helper function takes these daily values and calculates averages for <code>weekend</code>, <code>weekday</code>, and <code>mean daily</code>:</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [10]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>to_mean_daily <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">prefix =</span> <span class="st">"average_"</span>) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">|&gt;</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>(Date) <span class="sc">|&gt;</span> <span class="co">#ungroup by days</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean_daily</span>(<span class="at">prefix =</span> prefix) <span class="sc">|&gt;</span> <span class="co">#calculate the averages</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_with</span>(<span class="at">.fn =</span> \(x) <span class="fu">str_replace_all</span>(x,<span class="st">"_"</span>,<span class="st">" "</span>)) <span class="sc">|&gt;</span> <span class="co">#remove underscores</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gt</span>() <span class="co">#table output</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<section id="total-wear-time-daily" class="level4" data-number="4.1.1">
<h4 data-number="4.1.1" class="anchored" data-anchor-id="total-wear-time-daily"><span class="header-section-number">4.1.1</span> Total wear time daily</h4>
<p>For <code>Total wear time daily</code>, only instances where there is actual distance data available will be taken into account in <a href="#tbl-wear" class="quarto-xref">Table&nbsp;4</a>.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [11]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [12]:</pre></div><div><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">durations</span>(Dis) <span class="sc">|&gt;</span> <span class="co">#calculate the durations per group (day)</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>(<span class="st">"Total wear "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-wear" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-wear-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4: Total wear time daily
</figcaption>
<div aria-describedby="tbl-wear-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="kwtfyrdwgy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kwtfyrdwgy table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kwtfyrdwgy thead, #kwtfyrdwgy tbody, #kwtfyrdwgy tfoot, #kwtfyrdwgy tr, #kwtfyrdwgy td, #kwtfyrdwgy th {
  border-style: none;
}

#kwtfyrdwgy p {
  margin: 0;
  padding: 0;
}

#kwtfyrdwgy .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kwtfyrdwgy .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kwtfyrdwgy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kwtfyrdwgy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kwtfyrdwgy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kwtfyrdwgy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kwtfyrdwgy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kwtfyrdwgy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kwtfyrdwgy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kwtfyrdwgy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kwtfyrdwgy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kwtfyrdwgy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kwtfyrdwgy .gt_spanner_row {
  border-bottom-style: hidden;
}

#kwtfyrdwgy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kwtfyrdwgy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kwtfyrdwgy .gt_from_md > :first-child {
  margin-top: 0;
}

#kwtfyrdwgy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kwtfyrdwgy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kwtfyrdwgy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kwtfyrdwgy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kwtfyrdwgy .gt_row_group_first td {
  border-top-width: 2px;
}

#kwtfyrdwgy .gt_row_group_first th {
  border-top-width: 2px;
}

#kwtfyrdwgy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kwtfyrdwgy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kwtfyrdwgy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kwtfyrdwgy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kwtfyrdwgy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kwtfyrdwgy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kwtfyrdwgy .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kwtfyrdwgy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kwtfyrdwgy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kwtfyrdwgy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kwtfyrdwgy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kwtfyrdwgy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kwtfyrdwgy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kwtfyrdwgy .gt_left {
  text-align: left;
}

#kwtfyrdwgy .gt_center {
  text-align: center;
}

#kwtfyrdwgy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kwtfyrdwgy .gt_font_normal {
  font-weight: normal;
}

#kwtfyrdwgy .gt_font_bold {
  font-weight: bold;
}

#kwtfyrdwgy .gt_font_italic {
  font-style: italic;
}

#kwtfyrdwgy .gt_super {
  font-size: 65%;
}

#kwtfyrdwgy .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kwtfyrdwgy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kwtfyrdwgy .gt_indent_1 {
  text-indent: 5px;
}

#kwtfyrdwgy .gt_indent_2 {
  text-indent: 10px;
}

#kwtfyrdwgy .gt_indent_3 {
  text-indent: 15px;
}

#kwtfyrdwgy .gt_indent_4 {
  text-indent: 20px;
}

#kwtfyrdwgy .gt_indent_5 {
  text-indent: 25px;
}

#kwtfyrdwgy .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#kwtfyrdwgy div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="Total-wear-duration" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Total wear duration</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="2" id="Clouclip" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="Clouclip  Date">Mean daily</td>
<td class="gt_row gt_center" headers="Clouclip  Total wear duration">31448s (~8.74 hours)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekday</td>
<td class="gt_row gt_center" headers="Clouclip  Total wear duration">34460s (~9.57 hours)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekend</td>
<td class="gt_row gt_center" headers="Clouclip  Total wear duration">23918s (~6.64 hours)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</section>
<section id="distance-range" class="level4" data-number="4.1.2">
<h4 data-number="4.1.2" class="anchored" data-anchor-id="distance-range"><span class="header-section-number">4.1.2</span> Duration within distance ranges</h4>
<p>This metric can be calculated in two ways. <a href="#tbl-nearwork" class="quarto-xref">Table&nbsp;5</a> shows the <code>duration of near work</code>, whereas <a href="#tbl-ranges" class="quarto-xref">Table&nbsp;6</a> shows the <code>duration of distance ranges</code>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Duration of near work</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Duration within distance ranges</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell-container"><div class="cell-decorator"><pre>In [13]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [14]:</pre></div><div><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Dis <span class="sc">&gt;=</span> <span class="dv">10</span>, Dis <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">durations</span>(Dis) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>(<span class="st">"Near work "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-nearwork" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-nearwork-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5: Duration of near work
</figcaption>
<div aria-describedby="tbl-nearwork-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="nbiplomrkz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nbiplomrkz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nbiplomrkz thead, #nbiplomrkz tbody, #nbiplomrkz tfoot, #nbiplomrkz tr, #nbiplomrkz td, #nbiplomrkz th {
  border-style: none;
}

#nbiplomrkz p {
  margin: 0;
  padding: 0;
}

#nbiplomrkz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nbiplomrkz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nbiplomrkz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nbiplomrkz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nbiplomrkz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbiplomrkz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nbiplomrkz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbiplomrkz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nbiplomrkz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nbiplomrkz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nbiplomrkz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nbiplomrkz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nbiplomrkz .gt_spanner_row {
  border-bottom-style: hidden;
}

#nbiplomrkz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nbiplomrkz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nbiplomrkz .gt_from_md > :first-child {
  margin-top: 0;
}

#nbiplomrkz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nbiplomrkz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nbiplomrkz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nbiplomrkz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nbiplomrkz .gt_row_group_first td {
  border-top-width: 2px;
}

#nbiplomrkz .gt_row_group_first th {
  border-top-width: 2px;
}

#nbiplomrkz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbiplomrkz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nbiplomrkz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nbiplomrkz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nbiplomrkz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbiplomrkz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nbiplomrkz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nbiplomrkz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nbiplomrkz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nbiplomrkz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbiplomrkz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbiplomrkz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbiplomrkz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbiplomrkz .gt_left {
  text-align: left;
}

#nbiplomrkz .gt_center {
  text-align: center;
}

#nbiplomrkz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nbiplomrkz .gt_font_normal {
  font-weight: normal;
}

#nbiplomrkz .gt_font_bold {
  font-weight: bold;
}

#nbiplomrkz .gt_font_italic {
  font-style: italic;
}

#nbiplomrkz .gt_super {
  font-size: 65%;
}

#nbiplomrkz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nbiplomrkz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nbiplomrkz .gt_indent_1 {
  text-indent: 5px;
}

#nbiplomrkz .gt_indent_2 {
  text-indent: 10px;
}

#nbiplomrkz .gt_indent_3 {
  text-indent: 15px;
}

#nbiplomrkz .gt_indent_4 {
  text-indent: 20px;
}

#nbiplomrkz .gt_indent_5 {
  text-indent: 25px;
}

#nbiplomrkz .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#nbiplomrkz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="Near-work-duration" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Near work duration</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="2" id="Clouclip" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="Clouclip  Date">Mean daily</td>
<td class="gt_row gt_center" headers="Clouclip  Near work duration">22586s (~6.27 hours)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekday</td>
<td class="gt_row gt_center" headers="Clouclip  Near work duration">26343s (~7.32 hours)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekend</td>
<td class="gt_row gt_center" headers="Clouclip  Near work duration">13192s (~3.66 hours)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell-container"><div class="cell-decorator"><pre>In [15]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#defining distance ranges</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>dist_breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>, <span class="dv">90</span>, <span class="dv">100</span>, <span class="cn">Inf</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>dist_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Extremely near"</span>,          <span class="co"># [10, 20)</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Very near"</span>,               <span class="co"># [20, 30)</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Fairly near"</span>,             <span class="co"># [30, 40)</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Near"</span>,                    <span class="co"># [40, 50)</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Moderately near"</span>,         <span class="co"># [50, 60)</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Near Intermediate"</span>,       <span class="co"># [60, 70)</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Intermediate"</span>,            <span class="co"># [70, 80)</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Moderately intermediate"</span>, <span class="co"># [80, 90)</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Far intermediate"</span>,        <span class="co"># [90, 100)</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Far"</span>                      <span class="co"># [100, Inf)</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [16]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [17]:</pre></div><div><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Dis_range =</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">cut</span>(Dis, <span class="at">breaks =</span> dist_breaks, <span class="at">labels =</span> dist_labels) <span class="co">#create ranges</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(Dis_range) <span class="sc">|&gt;</span> <span class="co">#remove NAs</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Dis_range, <span class="at">.add =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="co">#group by ranges</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">durations</span>(Dis) <span class="sc">|&gt;</span> <span class="co">#calculate durations</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Dis_range, <span class="at">values_from =</span> duration) <span class="sc">|&gt;</span> <span class="co">#widen data</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>(<span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_duration</span>(<span class="at">input_units =</span> <span class="st">"seconds"</span>, <span class="at">output_units =</span> <span class="st">"minutes"</span>) <span class="co">#show minutes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-ranges" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-ranges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;6: Duration in distance ranges
</figcaption>
<div aria-describedby="tbl-ranges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="awzhbfaytz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#awzhbfaytz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#awzhbfaytz thead, #awzhbfaytz tbody, #awzhbfaytz tfoot, #awzhbfaytz tr, #awzhbfaytz td, #awzhbfaytz th {
  border-style: none;
}

#awzhbfaytz p {
  margin: 0;
  padding: 0;
}

#awzhbfaytz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#awzhbfaytz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#awzhbfaytz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#awzhbfaytz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#awzhbfaytz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#awzhbfaytz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#awzhbfaytz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#awzhbfaytz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#awzhbfaytz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#awzhbfaytz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#awzhbfaytz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#awzhbfaytz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#awzhbfaytz .gt_spanner_row {
  border-bottom-style: hidden;
}

#awzhbfaytz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#awzhbfaytz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#awzhbfaytz .gt_from_md > :first-child {
  margin-top: 0;
}

#awzhbfaytz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#awzhbfaytz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#awzhbfaytz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#awzhbfaytz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#awzhbfaytz .gt_row_group_first td {
  border-top-width: 2px;
}

#awzhbfaytz .gt_row_group_first th {
  border-top-width: 2px;
}

#awzhbfaytz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#awzhbfaytz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#awzhbfaytz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#awzhbfaytz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#awzhbfaytz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#awzhbfaytz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#awzhbfaytz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#awzhbfaytz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#awzhbfaytz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#awzhbfaytz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#awzhbfaytz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#awzhbfaytz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#awzhbfaytz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#awzhbfaytz .gt_left {
  text-align: left;
}

#awzhbfaytz .gt_center {
  text-align: center;
}

#awzhbfaytz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#awzhbfaytz .gt_font_normal {
  font-weight: normal;
}

#awzhbfaytz .gt_font_bold {
  font-weight: bold;
}

#awzhbfaytz .gt_font_italic {
  font-style: italic;
}

#awzhbfaytz .gt_super {
  font-size: 65%;
}

#awzhbfaytz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#awzhbfaytz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#awzhbfaytz .gt_indent_1 {
  text-indent: 5px;
}

#awzhbfaytz .gt_indent_2 {
  text-indent: 10px;
}

#awzhbfaytz .gt_indent_3 {
  text-indent: 15px;
}

#awzhbfaytz .gt_indent_4 {
  text-indent: 20px;
}

#awzhbfaytz .gt_indent_5 {
  text-indent: 25px;
}

#awzhbfaytz .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#awzhbfaytz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="Extremely-near" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Extremely near</th>
<th id="Very-near" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Very near</th>
<th id="Fairly-near" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Fairly near</th>
<th id="Near" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Near</th>
<th id="Moderately-near" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Moderately near</th>
<th id="Near-Intermediate" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Near Intermediate</th>
<th id="Intermediate" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Intermediate</th>
<th id="Moderately-intermediate" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Moderately intermediate</th>
<th id="Far-intermediate" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Far intermediate</th>
<th id="Far" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Far</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="11" id="Clouclip" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="Clouclip  Date">Mean daily</td>
<td class="gt_row gt_center" headers="Clouclip  Extremely near">169m</td>
<td class="gt_row gt_center" headers="Clouclip  Very near">102m</td>
<td class="gt_row gt_center" headers="Clouclip  Fairly near">46m</td>
<td class="gt_row gt_center" headers="Clouclip  Near">27m</td>
<td class="gt_row gt_center" headers="Clouclip  Moderately near">13m</td>
<td class="gt_row gt_center" headers="Clouclip  Near Intermediate">7m</td>
<td class="gt_row gt_center" headers="Clouclip  Intermediate">4m</td>
<td class="gt_row gt_center" headers="Clouclip  Moderately intermediate">5m</td>
<td class="gt_row gt_center" headers="Clouclip  Far intermediate">11m</td>
<td class="gt_row gt_center" headers="Clouclip  Far">16m</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekday</td>
<td class="gt_row gt_center" headers="Clouclip  Extremely near">180m</td>
<td class="gt_row gt_center" headers="Clouclip  Very near">128m</td>
<td class="gt_row gt_center" headers="Clouclip  Fairly near">60m</td>
<td class="gt_row gt_center" headers="Clouclip  Near">36m</td>
<td class="gt_row gt_center" headers="Clouclip  Moderately near">16m</td>
<td class="gt_row gt_center" headers="Clouclip  Near Intermediate">7m</td>
<td class="gt_row gt_center" headers="Clouclip  Intermediate">6m</td>
<td class="gt_row gt_center" headers="Clouclip  Moderately intermediate">6m</td>
<td class="gt_row gt_center" headers="Clouclip  Far intermediate">14m</td>
<td class="gt_row gt_center" headers="Clouclip  Far">20m</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekend</td>
<td class="gt_row gt_center" headers="Clouclip  Extremely near">141m</td>
<td class="gt_row gt_center" headers="Clouclip  Very near">38m</td>
<td class="gt_row gt_center" headers="Clouclip  Fairly near">12m</td>
<td class="gt_row gt_center" headers="Clouclip  Near">5m</td>
<td class="gt_row gt_center" headers="Clouclip  Moderately near">5m</td>
<td class="gt_row gt_center" headers="Clouclip  Near Intermediate">8m</td>
<td class="gt_row gt_center" headers="Clouclip  Intermediate">1m</td>
<td class="gt_row gt_center" headers="Clouclip  Moderately intermediate">3m</td>
<td class="gt_row gt_center" headers="Clouclip  Far intermediate">2m</td>
<td class="gt_row gt_center" headers="Clouclip  Far">5m</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
<p><a href="#fig-ranges" class="quarto-xref">Figure&nbsp;4</a> shows the distribution of relative times within each distance range.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [18]:</pre></div><div id="cell-fig-ranges" class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Dis_range =</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">cut</span>(Dis, <span class="at">breaks =</span> dist_breaks, <span class="at">labels =</span> dist_labels) <span class="co">#create ranges</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(Dis_range) <span class="sc">|&gt;</span> <span class="co">#remove NAs</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Dis_range, <span class="at">.add =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="co">#group by ranges</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">durations</span>(Dis) <span class="sc">|&gt;</span> </span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Dis_range) <span class="sc">|&gt;</span> </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Dis_range =</span> </span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>           forcats<span class="sc">::</span><span class="fu">fct_relabel</span>(Dis_range, \(x) <span class="fu">str_replace</span>(x, <span class="st">" "</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">duration =</span> duration<span class="sc">/</span><span class="fu">sum</span>(duration), <span class="at">.by =</span> Date) <span class="sc">|&gt;</span> </span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Dis_range, <span class="at">y =</span> duration, <span class="at">fill =</span> Date)) <span class="sc">+</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  ggsci<span class="sc">::</span><span class="fu">scale_fill_jco</span>() <span class="sc">+</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Relative duration (%)"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">fill =</span> <span class="st">"Type"</span>) <span class="sc">+</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-ranges" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ranges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-ranges-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Figure&nbsp;4: Percentage of total time in distance ranges"><img src="index_files/figure-html/fig-ranges-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ranges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Percentage of total time in distance ranges
</figcaption>
</figure>
</div>
</div>
</div></div>
</div>
</div>
</div>
</section>
<section id="frequency-of-continuous-near-work" class="level4" data-number="4.1.3">
<h4 data-number="4.1.3" class="anchored" data-anchor-id="frequency-of-continuous-near-work"><span class="header-section-number">4.1.3</span> Frequency of Continuous near work</h4>
<p>Continuous near work has more than one condition. Beyond a distance range, it requires a certain length, but also allows for interruptions. This is what <a href="https://tscnlab.github.io/LightLogR/reference/extract_clusters.html">extract_clusters()</a> allows.</p>
<p><a href="#tbl-continuousnear" class="quarto-xref">Table&nbsp;7</a> summarizes the results, and <a href="#fig-cluster" class="quarto-xref">Figure&nbsp;6</a> visualizes them.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [19]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [20]:</pre></div><div><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_clusters</span>(Dis <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">&amp;</span> Dis <span class="sc">&lt;</span> <span class="dv">60</span>, <span class="co">#define the condition</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"30 mins"</span>, <span class="co">#define the minimum duration</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">interruption.duration =</span> <span class="st">"1 min"</span>, <span class="co">#define max interruption</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">drop.empty.groups =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#make certain days without clusters remain</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"epoch"</span>, <span class="st">"duration"</span>),</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">add.total.duration =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#count the number of episodes</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">"Frequency of "</span>) <span class="sc">|&gt;</span><span class="co"># daily means</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>() <span class="co">#table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-continuousnear" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-continuousnear-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;7: Frequency of continuous near work
</figcaption>
<div aria-describedby="tbl-continuousnear-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="hpodjgoasb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hpodjgoasb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hpodjgoasb thead, #hpodjgoasb tbody, #hpodjgoasb tfoot, #hpodjgoasb tr, #hpodjgoasb td, #hpodjgoasb th {
  border-style: none;
}

#hpodjgoasb p {
  margin: 0;
  padding: 0;
}

#hpodjgoasb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hpodjgoasb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hpodjgoasb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hpodjgoasb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hpodjgoasb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hpodjgoasb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hpodjgoasb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hpodjgoasb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hpodjgoasb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hpodjgoasb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hpodjgoasb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hpodjgoasb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hpodjgoasb .gt_spanner_row {
  border-bottom-style: hidden;
}

#hpodjgoasb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hpodjgoasb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hpodjgoasb .gt_from_md > :first-child {
  margin-top: 0;
}

#hpodjgoasb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hpodjgoasb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hpodjgoasb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hpodjgoasb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hpodjgoasb .gt_row_group_first td {
  border-top-width: 2px;
}

#hpodjgoasb .gt_row_group_first th {
  border-top-width: 2px;
}

#hpodjgoasb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hpodjgoasb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hpodjgoasb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hpodjgoasb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hpodjgoasb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hpodjgoasb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hpodjgoasb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hpodjgoasb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hpodjgoasb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hpodjgoasb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hpodjgoasb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hpodjgoasb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hpodjgoasb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hpodjgoasb .gt_left {
  text-align: left;
}

#hpodjgoasb .gt_center {
  text-align: center;
}

#hpodjgoasb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hpodjgoasb .gt_font_normal {
  font-weight: normal;
}

#hpodjgoasb .gt_font_bold {
  font-weight: bold;
}

#hpodjgoasb .gt_font_italic {
  font-style: italic;
}

#hpodjgoasb .gt_super {
  font-size: 65%;
}

#hpodjgoasb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hpodjgoasb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hpodjgoasb .gt_indent_1 {
  text-indent: 5px;
}

#hpodjgoasb .gt_indent_2 {
  text-indent: 10px;
}

#hpodjgoasb .gt_indent_3 {
  text-indent: 15px;
}

#hpodjgoasb .gt_indent_4 {
  text-indent: 20px;
}

#hpodjgoasb .gt_indent_5 {
  text-indent: 25px;
}

#hpodjgoasb .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#hpodjgoasb div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="Frequency-of-episodes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Frequency of episodes</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="2" id="Clouclip" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="Clouclip  Date">Mean daily</td>
<td class="gt_row gt_right" headers="Clouclip  Frequency of episodes">0.86</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekday</td>
<td class="gt_row gt_right" headers="Clouclip  Frequency of episodes">1.20</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekend</td>
<td class="gt_row gt_right" headers="Clouclip  Frequency of episodes">0.00</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [21]:</pre></div><div id="cell-fig-visbreak" class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_clusters</span>(Dis <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">&amp;</span> Dis <span class="sc">&lt;</span> <span class="dv">60</span>, <span class="co">#define the condition</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"30 mins"</span>, <span class="co">#define the minimum duration</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">interruption.duration =</span> <span class="st">"1 min"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_day</span>(<span class="at">y.axis =</span> Dis, <span class="at">y.axis.label =</span> y.label, <span class="at">geom =</span> <span class="st">"line"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_state</span>(state, <span class="at">fill =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">60</span>), <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 6889 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-visbreak" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-visbreak-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-visbreak-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="Figure&nbsp;5: Continuous near work episodes (red shaded areas). Black traces show measurement data, and two red dashed lines indicate the range of near work between 20 and 60 cm distance"><img src="index_files/figure-html/fig-visbreak-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-visbreak-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Continuous near work episodes (red shaded areas). Black traces show measurement data, and two red dashed lines indicate the range of near work between 20 and 60 cm distance
</figcaption>
</figure>
</div>
</div>
</div></div>
</section>
<section id="near-work-episodes" class="level4" data-number="4.1.4">
<h4 data-number="4.1.4" class="anchored" data-anchor-id="near-work-episodes"><span class="header-section-number">4.1.4</span> Near Work episodes</h4>
<p>This section of the metrics consists of three aspects: <code>Frequency</code>, <code>Duration</code>, and <code>Distances</code>. The first two aspects are collected the same way as in the previous section, whereas the <code>Distance</code> aspect is extracted from the base data. All are summarized in <a href="#tbl-nearworkepisodes" class="quarto-xref">Table&nbsp;8</a></p>
<div class="cell-container"><div class="cell-decorator"><pre>In [22]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [23]:</pre></div><div><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_clusters</span>(Dis <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">&amp;</span> Dis <span class="sc">&lt;</span> <span class="dv">60</span>, <span class="co">#define the condition</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"5 secs"</span>, <span class="co">#define the minimum duration</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">interruption.duration =</span> <span class="st">"20 secs"</span>, <span class="co">#define max interruption</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">drop.empty.groups =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#make certain days without clusters remain</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_metric</span>(dataCC, <span class="at">distance =</span> <span class="fu">mean</span>(Dis, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"epoch"</span>), <span class="at">prefix =</span> <span class="st">""</span>,</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">add.total.duration =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span>  <span class="co">#count the number of episodes</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> <span class="co">#daily means</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(<span class="fu">c</span>(distance, episodes), <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="co">#table</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_units</span>(<span class="at">distance =</span> <span class="st">"cm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-nearworkepisodes" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-nearworkepisodes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;8: Frequency, duration, and distance of near work episodes
</figcaption>
<div aria-describedby="tbl-nearworkepisodes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="nukwvdcixe" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nukwvdcixe table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nukwvdcixe thead, #nukwvdcixe tbody, #nukwvdcixe tfoot, #nukwvdcixe tr, #nukwvdcixe td, #nukwvdcixe th {
  border-style: none;
}

#nukwvdcixe p {
  margin: 0;
  padding: 0;
}

#nukwvdcixe .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nukwvdcixe .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nukwvdcixe .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nukwvdcixe .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nukwvdcixe .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nukwvdcixe .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nukwvdcixe .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nukwvdcixe .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nukwvdcixe .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nukwvdcixe .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nukwvdcixe .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nukwvdcixe .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nukwvdcixe .gt_spanner_row {
  border-bottom-style: hidden;
}

#nukwvdcixe .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nukwvdcixe .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nukwvdcixe .gt_from_md > :first-child {
  margin-top: 0;
}

#nukwvdcixe .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nukwvdcixe .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nukwvdcixe .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nukwvdcixe .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nukwvdcixe .gt_row_group_first td {
  border-top-width: 2px;
}

#nukwvdcixe .gt_row_group_first th {
  border-top-width: 2px;
}

#nukwvdcixe .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nukwvdcixe .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nukwvdcixe .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nukwvdcixe .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nukwvdcixe .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nukwvdcixe .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nukwvdcixe .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nukwvdcixe .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nukwvdcixe .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nukwvdcixe .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nukwvdcixe .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nukwvdcixe .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nukwvdcixe .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nukwvdcixe .gt_left {
  text-align: left;
}

#nukwvdcixe .gt_center {
  text-align: center;
}

#nukwvdcixe .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nukwvdcixe .gt_font_normal {
  font-weight: normal;
}

#nukwvdcixe .gt_font_bold {
  font-weight: bold;
}

#nukwvdcixe .gt_font_italic {
  font-style: italic;
}

#nukwvdcixe .gt_super {
  font-size: 65%;
}

#nukwvdcixe .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nukwvdcixe .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nukwvdcixe .gt_indent_1 {
  text-indent: 5px;
}

#nukwvdcixe .gt_indent_2 {
  text-indent: 10px;
}

#nukwvdcixe .gt_indent_3 {
  text-indent: 15px;
}

#nukwvdcixe .gt_indent_4 {
  text-indent: 20px;
}

#nukwvdcixe .gt_indent_5 {
  text-indent: 25px;
}

#nukwvdcixe .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#nukwvdcixe div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="duration" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">duration</th>
<th id="distance" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">distance, cm</th>
<th id="episodes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">episodes</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="4" id="Clouclip" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="Clouclip  Date">Mean daily</td>
<td class="gt_row gt_center" headers="Clouclip  duration">233s (~3.88 minutes)</td>
<td class="gt_row gt_right" headers="Clouclip  distance">32</td>
<td class="gt_row gt_right" headers="Clouclip  episodes">57</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekday</td>
<td class="gt_row gt_center" headers="Clouclip  duration">284s (~4.73 minutes)</td>
<td class="gt_row gt_right" headers="Clouclip  distance">32</td>
<td class="gt_row gt_right" headers="Clouclip  episodes">64</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekend</td>
<td class="gt_row gt_center" headers="Clouclip  duration">104s (~1.73 minutes)</td>
<td class="gt_row gt_right" headers="Clouclip  distance">32</td>
<td class="gt_row gt_right" headers="Clouclip  episodes">40</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</section>
<section id="visual-breaks" class="level4" data-number="4.1.5">
<h4 data-number="4.1.5" class="anchored" data-anchor-id="visual-breaks"><span class="header-section-number">4.1.5</span> Visual breaks</h4>
<p><code>Visual breaks</code> are a little different, compared to the previous metrics. The difference is that in this case, the minimum break and the previous episode is important. This leads to a two step process, where we first extract instances of <code>Distance</code> above 100 cm for at least 20 seconds, before we filter for a previous duration of at maximum 20 minutes. <a href="#tbl-visualbreaks" class="quarto-xref">Table&nbsp;9</a> provides the daily frequency of visual breaks.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [24]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [25]:</pre></div><div><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_clusters</span>(Dis <span class="sc">&gt;=</span> <span class="dv">100</span>, <span class="co">#define the condition, greater 100 cm away</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"20 secs"</span>, <span class="co">#define the minimum duration</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">return.only.clusters =</span> <span class="cn">FALSE</span>, <span class="co">#return non-clusters as well</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">drop.empty.groups =</span> <span class="cn">FALSE</span> <span class="co">#keep all days, even without clusters</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>                   ) <span class="sc">|&gt;</span> </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return only clusters with previous episode lengths of maximum 20 minutes:</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((start <span class="sc">-</span> <span class="fu">lag</span>(end) <span class="sc">&lt;=</span> <span class="fu">duration</span>(<span class="st">"20 mins"</span>)), is.cluster) <span class="sc">|&gt;</span> </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"epoch"</span>, <span class="st">"is.cluster"</span>, <span class="st">"duration"</span>), </span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">prefix =</span> <span class="st">""</span>,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">add.total.duration =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span>  <span class="co">#count the number of episodes</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">"Daily "</span>) <span class="sc">|&gt;</span> <span class="co">#daily means</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(<span class="at">decimals =</span> <span class="dv">1</span>) <span class="co">#table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-visualbreaks" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-visualbreaks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;9: Frequency of visual breaks
</figcaption>
<div aria-describedby="tbl-visualbreaks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="loarrdxhiw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#loarrdxhiw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#loarrdxhiw thead, #loarrdxhiw tbody, #loarrdxhiw tfoot, #loarrdxhiw tr, #loarrdxhiw td, #loarrdxhiw th {
  border-style: none;
}

#loarrdxhiw p {
  margin: 0;
  padding: 0;
}

#loarrdxhiw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#loarrdxhiw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#loarrdxhiw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#loarrdxhiw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#loarrdxhiw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#loarrdxhiw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#loarrdxhiw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#loarrdxhiw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#loarrdxhiw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#loarrdxhiw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#loarrdxhiw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#loarrdxhiw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#loarrdxhiw .gt_spanner_row {
  border-bottom-style: hidden;
}

#loarrdxhiw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#loarrdxhiw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#loarrdxhiw .gt_from_md > :first-child {
  margin-top: 0;
}

#loarrdxhiw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#loarrdxhiw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#loarrdxhiw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#loarrdxhiw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#loarrdxhiw .gt_row_group_first td {
  border-top-width: 2px;
}

#loarrdxhiw .gt_row_group_first th {
  border-top-width: 2px;
}

#loarrdxhiw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#loarrdxhiw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#loarrdxhiw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#loarrdxhiw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#loarrdxhiw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#loarrdxhiw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#loarrdxhiw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#loarrdxhiw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#loarrdxhiw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#loarrdxhiw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#loarrdxhiw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#loarrdxhiw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#loarrdxhiw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#loarrdxhiw .gt_left {
  text-align: left;
}

#loarrdxhiw .gt_center {
  text-align: center;
}

#loarrdxhiw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#loarrdxhiw .gt_font_normal {
  font-weight: normal;
}

#loarrdxhiw .gt_font_bold {
  font-weight: bold;
}

#loarrdxhiw .gt_font_italic {
  font-style: italic;
}

#loarrdxhiw .gt_super {
  font-size: 65%;
}

#loarrdxhiw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#loarrdxhiw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#loarrdxhiw .gt_indent_1 {
  text-indent: 5px;
}

#loarrdxhiw .gt_indent_2 {
  text-indent: 10px;
}

#loarrdxhiw .gt_indent_3 {
  text-indent: 15px;
}

#loarrdxhiw .gt_indent_4 {
  text-indent: 20px;
}

#loarrdxhiw .gt_indent_5 {
  text-indent: 25px;
}

#loarrdxhiw .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#loarrdxhiw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="Daily-episodes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Daily episodes</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="2" id="Clouclip" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Clouclip</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="Clouclip  Date">Mean daily</td>
<td class="gt_row gt_right" headers="Clouclip  Daily episodes">5.9</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekday</td>
<td class="gt_row gt_right" headers="Clouclip  Daily episodes">6.2</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Clouclip  Date">Weekend</td>
<td class="gt_row gt_right" headers="Clouclip  Daily episodes">5.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [26]:</pre></div><div id="cell-fig-cluster" class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">extract_clusters</span>(Dis <span class="sc">&gt;=</span> <span class="dv">100</span>, <span class="co">#define the condition, greater 100 cm away</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"20 secs"</span>, <span class="co">#define the minimum duration</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">return.only.clusters =</span> <span class="cn">FALSE</span>, <span class="co">#return non-clusters as well</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">drop.empty.groups =</span> <span class="cn">FALSE</span> <span class="co">#keep all days, even without clusters</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>                   ) <span class="sc">|&gt;</span> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return only clusters with previous episode lengths of maximum 20 minutes:</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((start <span class="sc">-</span> <span class="fu">lag</span>(end) <span class="sc">&lt;=</span> <span class="fu">duration</span>(<span class="st">"20 mins"</span>)), is.cluster) <span class="sc">%&gt;%</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_states</span>(dataCC, ., ) <span class="sc">|&gt;</span> </span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_day</span>(<span class="at">y.axis =</span> Dis, <span class="at">y.axis.label =</span> y.label, <span class="at">geom =</span> <span class="st">"line"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_photoperiod</span>(coordinates) <span class="sc">+</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> \(x) <span class="fu">filter</span>(x, is.cluster), <span class="at">col =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 6889 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-cluster" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cluster-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-cluster-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="Figure&nbsp;6: Plot of visual breaks (red dots). Black traces show distance measurement data. Grey shaded areas show nighttime between civil dusk and civil dawn"><img src="index_files/figure-html/fig-cluster-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cluster-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Plot of visual breaks (red dots). Black traces show distance measurement data. Grey shaded areas show nighttime between civil dusk and civil dawn
</figcaption>
</figure>
</div>
</div>
</div></div>
</section>
</section>
<section id="light" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="light"><span class="header-section-number">4.2</span> Light</h3>
<p>Illuminance values are very low in the example dataset from the <code>Clouclip</code> device, which would not yield satisfying summaries in the <code>Light</code> section. Thus, we will import data from the <code>VEET</code> device next. Because there are different modalities stored in the data, we need to specify which modality we want to access. <code>ALS</code> is the acronym for <code>Ambient Light Sensor</code>.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [27]:</pre></div><div id="cell-fig-hist-CClight" class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Lux)) <span class="sc">+</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">100</span>) <span class="sc">+</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"symlog"</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 67896 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-hist-CClight" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hist-CClight-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-hist-CClight-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="Figure&nbsp;7: Histogram of Clouclip light data"><img src="index_files/figure-html/fig-hist-CClight-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hist-CClight-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Histogram of Clouclip light data
</figcaption>
</figure>
</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [28]:</pre></div><div id="cell-fig-VEET-overview" class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"data/01_VEET_L.csv.zip"</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>tz <span class="ot">&lt;-</span> <span class="st">"US/Central"</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span> import<span class="sc">$</span><span class="fu">VEET</span>(path, <span class="at">tz =</span> tz, <span class="at">modality =</span> <span class="st">"ALS"</span>, <span class="at">manual.id =</span> <span class="st">"VEET"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Multiple files in zip: reading '01_VEET_L.csv'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `dplyr::mutate()`.
ℹ In argument: `dplyr::across(...)`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Successfully read in 304'193 observations across 1 Ids from 1 VEET-file(s).
Timezone set is US/Central.
The system timezone is Europe/Berlin. Please correct if necessary!
1 observations were dropped due to a missing or non-parseable Datetime value (e.g., non-valid timestamps during DST jumps). 

First Observation: 2024-06-04 15:00:37
Last Observation: 2024-06-12 08:29:43
Timespan: 7.7 days

Observation intervals: 
  Id    interval.time              n pct      
1 VEET  0s                         1 0.00033% 
2 VEET  1s                      1957 0.64334% 
3 VEET  2s                    300147 98.67025%
4 VEET  3s                      2074 0.68181% 
5 VEET  4s                         3 0.00099% 
6 VEET  9s                         5 0.00164% 
7 VEET  10s                        3 0.00099% 
8 VEET  109s (~1.82 minutes)       1 0.00033% 
9 VEET  59077s (~16.41 hours)      1 0.00033% </code></pre>
</div>
<div class="cell-output-display">
<div id="fig-VEET-overview" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-VEET-overview-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-VEET-overview-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" title="Figure&nbsp;8: Overview plot of imported VEET data"><img src="index_files/figure-html/fig-VEET-overview-1.png" class="img-fluid figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-VEET-overview-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Overview plot of imported VEET data
</figcaption>
</figure>
</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [29]:</pre></div><div id="cell-fig-hist-VEETlight" class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Lux)) <span class="sc">+</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">100</span>) <span class="sc">+</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"symlog"</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1000</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-hist-VEETlight" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hist-VEETlight-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-hist-VEETlight-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9" title="Figure&nbsp;9: Histogram of VEET light data"><img src="index_files/figure-html/fig-hist-VEETlight-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hist-VEETlight-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: Histogram of VEET light data
</figcaption>
</figure>
</div>
</div>
</div></div>
<p>The <code>VEET</code> dataset has gaps and irregular data, similarly to the <code>Clouclip</code> data. For consistency, We will aggregate the data to 5-second intervals and set gaps explicitly. We will also remove days that have more than one hour missing data. Remaining are six days with good data coverage, as seen in <a href="#tbl-gaps2" class="quarto-xref">Table&nbsp;10</a>.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [30]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Datetime</span>(<span class="at">unit =</span> <span class="st">"5 seconds"</span>) <span class="sc">|&gt;</span> <span class="co">#aggregate to 5 second interval</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gap_handler</span>(<span class="at">full.days =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span>  <span class="co">#set implicit gaps to explicit gaps</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_Date_col</span>(<span class="at">group.by =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_partial_data</span>(Lux, <span class="at">threshold.missing =</span> <span class="st">"1 hour"</span>) <span class="co">#remove partial days</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [31]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [32]:</pre></div><div><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> <span class="fu">gap_table</span>(Lux, <span class="st">"Illuminance (lx)"</span>) <span class="sc">|&gt;</span>   </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_hide</span>(<span class="fu">contains</span>(<span class="st">"_n"</span>)) <span class="co">#remove the absolute number of data points</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-gaps2" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-gaps2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10: Summary of missing and observed data for the VEET device
</figcaption>
<div aria-describedby="tbl-gaps2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="rkgmzfrpyl" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rkgmzfrpyl table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rkgmzfrpyl thead, #rkgmzfrpyl tbody, #rkgmzfrpyl tfoot, #rkgmzfrpyl tr, #rkgmzfrpyl td, #rkgmzfrpyl th {
  border-style: none;
}

#rkgmzfrpyl p {
  margin: 0;
  padding: 0;
}

#rkgmzfrpyl .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rkgmzfrpyl .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rkgmzfrpyl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rkgmzfrpyl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rkgmzfrpyl .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rkgmzfrpyl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rkgmzfrpyl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rkgmzfrpyl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rkgmzfrpyl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rkgmzfrpyl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rkgmzfrpyl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rkgmzfrpyl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rkgmzfrpyl .gt_spanner_row {
  border-bottom-style: hidden;
}

#rkgmzfrpyl .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rkgmzfrpyl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rkgmzfrpyl .gt_from_md > :first-child {
  margin-top: 0;
}

#rkgmzfrpyl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rkgmzfrpyl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rkgmzfrpyl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rkgmzfrpyl .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rkgmzfrpyl .gt_row_group_first td {
  border-top-width: 2px;
}

#rkgmzfrpyl .gt_row_group_first th {
  border-top-width: 2px;
}

#rkgmzfrpyl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rkgmzfrpyl .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rkgmzfrpyl .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rkgmzfrpyl .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rkgmzfrpyl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rkgmzfrpyl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rkgmzfrpyl .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rkgmzfrpyl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rkgmzfrpyl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rkgmzfrpyl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rkgmzfrpyl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rkgmzfrpyl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rkgmzfrpyl .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rkgmzfrpyl .gt_left {
  text-align: left;
}

#rkgmzfrpyl .gt_center {
  text-align: center;
}

#rkgmzfrpyl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rkgmzfrpyl .gt_font_normal {
  font-weight: normal;
}

#rkgmzfrpyl .gt_font_bold {
  font-weight: bold;
}

#rkgmzfrpyl .gt_font_italic {
  font-style: italic;
}

#rkgmzfrpyl .gt_super {
  font-size: 65%;
}

#rkgmzfrpyl .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rkgmzfrpyl .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rkgmzfrpyl .gt_indent_1 {
  text-indent: 5px;
}

#rkgmzfrpyl .gt_indent_2 {
  text-indent: 10px;
}

#rkgmzfrpyl .gt_indent_3 {
  text-indent: 15px;
}

#rkgmzfrpyl .gt_indent_4 {
  text-indent: 20px;
}

#rkgmzfrpyl .gt_indent_5 {
  text-indent: 25px;
}

#rkgmzfrpyl .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rkgmzfrpyl div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="gt_heading header">
<th colspan="14" class="gt_heading gt_title gt_font_normal">Summary of available and missing data</th>
</tr>
<tr class="gt_heading even">
<th colspan="14" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Variable: Illuminance (lx)</th>
</tr>
<tr class="gt_col_headings gt_spanner_row header">
<th data-quarto-table-cell-role="th" scope="col"></th>
<th colspan="5" id="data_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold; font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Data
</div></th>
<th colspan="8" id="missing_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold; font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Missing
</div></th>
</tr>
<tr class="gt_col_headings gt_spanner_row even">
<th rowspan="2" id="a::stub" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th colspan="2" id="Regular" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Regular
</div></th>
<th id="irregular_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Irregular
</div></th>
<th id="Range" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Range
</div></th>
<th id="interval_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Interval
</div></th>
<th colspan="4" id="gap_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Gaps
</div></th>
<th colspan="2" id="implicit_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Implicit
</div></th>
<th colspan="2" id="explicit_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Explicit
</div></th>
</tr>
<tr class="gt_col_headings header">
<th id="available_data" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="available_data_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="number_irregulars" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1,2</sup></span></th>
<th id="total_duration" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="interval" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="number_gaps" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">N</th>
<th id="mean_gap_duration" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ø</th>
<th id="missing_data" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_data_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="missing_implicit" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_implicit_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="missing_explicit" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_explicit_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td id="grand_summary_stub_1" class="gt_row gt_left gt_stub gt_grand_summary_row gt_last_grand_summary_row_top" data-quarto-table-cell-role="th" scope="row" style="background-color: #E5E5E5"><strong>Overall</strong></td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 available_data" style="background-color: #E5E5E5">5d 23h 57m 40s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 available_data_pct" style="background-color: #E5E5E5">100.0%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span></td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 number_irregulars" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 total_duration" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">6d</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 interval" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 number_gaps" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">8</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 mean_gap_duration" style="background-color: #E5E5E5">58s</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_data" style="background-color: #E5E5E5">2m 20s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_data_pct" style="background-color: #E5E5E5">0.0%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span></td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_implicit" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_implicit_pct" style="background-color: #E5E5E5">0.0%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span></td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_explicit" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2m 20s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_explicit_pct" style="background-color: #E5E5E5">0.0%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span></td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="VEET - 2024-06-06" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET - 2024-06-06</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_1" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="VEET - 2024-06-06 stub_1_1 available_data">23h 58m 5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06 stub_1_1 available_data_pct">99.9%</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06 stub_1_1 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-06 stub_1_1 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-06 stub_1_1 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06 stub_1_1 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">3</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06 stub_1_1 mean_gap_duration">38s</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-06 stub_1_1 missing_data">1m 55s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06 stub_1_1 missing_data_pct">0.1%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-06 stub_1_1 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06 stub_1_1 missing_implicit_pct">0.0%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-06 stub_1_1 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1m 55s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06 stub_1_1 missing_explicit_pct">0.1%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="VEET - 2024-06-07" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET - 2024-06-07</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_2" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="VEET - 2024-06-07 stub_1_2 available_data">1d</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-07 stub_1_2 available_data_pct">100.0%</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-07 stub_1_2 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-07 stub_1_2 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-07 stub_1_2 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-07 stub_1_2 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-07 stub_1_2 mean_gap_duration">0s</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-07 stub_1_2 missing_data">0s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-07 stub_1_2 missing_data_pct">0.0%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-07 stub_1_2 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-07 stub_1_2 missing_implicit_pct">0.0%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-07 stub_1_2 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-07 stub_1_2 missing_explicit_pct">0.0%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="VEET - 2024-06-08" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET - 2024-06-08</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_3" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="VEET - 2024-06-08 stub_1_3 available_data">23h 59m 55s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-08 stub_1_3 available_data_pct">100.0%</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-08 stub_1_3 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-08 stub_1_3 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-08 stub_1_3 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-08 stub_1_3 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-08 stub_1_3 mean_gap_duration">5s</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-08 stub_1_3 missing_data">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-08 stub_1_3 missing_data_pct">0.0%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-08 stub_1_3 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-08 stub_1_3 missing_implicit_pct">0.0%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-08 stub_1_3 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-08 stub_1_3 missing_explicit_pct">0.0%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="VEET - 2024-06-09" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET - 2024-06-09</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_4" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="VEET - 2024-06-09 stub_1_4 available_data">23h 59m 50s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-09 stub_1_4 available_data_pct">100.0%</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-09 stub_1_4 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-09 stub_1_4 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-09 stub_1_4 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-09 stub_1_4 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-09 stub_1_4 mean_gap_duration">5s</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-09 stub_1_4 missing_data">10s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-09 stub_1_4 missing_data_pct">0.0%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-09 stub_1_4 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-09 stub_1_4 missing_implicit_pct">0.0%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-09 stub_1_4 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">10s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-09 stub_1_4 missing_explicit_pct">0.0%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="VEET - 2024-06-10" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET - 2024-06-10</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_5" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="VEET - 2024-06-10 stub_1_5 available_data">23h 59m 55s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-10 stub_1_5 available_data_pct">100.0%</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-10 stub_1_5 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-10 stub_1_5 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-10 stub_1_5 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-10 stub_1_5 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-10 stub_1_5 mean_gap_duration">5s</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-10 stub_1_5 missing_data">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-10 stub_1_5 missing_data_pct">0.0%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-10 stub_1_5 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-10 stub_1_5 missing_implicit_pct">0.0%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-10 stub_1_5 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-10 stub_1_5 missing_explicit_pct">0.0%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="VEET - 2024-06-11" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET - 2024-06-11</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_6" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="VEET - 2024-06-11 stub_1_6 available_data">23h 59m 55s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-11 stub_1_6 available_data_pct">100.0%</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-11 stub_1_6 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-11 stub_1_6 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-11 stub_1_6 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-11 stub_1_6 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-11 stub_1_6 mean_gap_duration">5s</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-11 stub_1_6 missing_data">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-11 stub_1_6 missing_data_pct">0.0%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-11 stub_1_6 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-11 stub_1_6 missing_implicit_pct">0.0%</td>
<td class="gt_row gt_center" headers="VEET - 2024-06-11 stub_1_6 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">5s</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-11 stub_1_6 missing_explicit_pct">0.0%</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="14" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> If n &gt; 0: it is possible that the other summary statistics are affected, as they are calculated based on the most prominent interval.</td>
</tr>
<tr class="even">
<td colspan="14" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Number of (missing or actual) observations</td>
</tr>
<tr class="odd">
<td colspan="14" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Based on times, not necessarily number of observations</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
<section id="light-exposure" class="level4" data-number="4.2.1">
<h4 data-number="4.2.1" class="anchored" data-anchor-id="light-exposure"><span class="header-section-number">4.2.1</span> Light exposure</h4>
<p>Averages of light exposure can be calculated with just <code>summarize_numeric()</code>. See <a href="#tbl-lightexposure" class="quarto-xref">Table&nbsp;11</a></p>
<div class="cell-container"><div class="cell-decorator"><pre>In [33]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [34]:</pre></div><div><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Id, Date, Datetime, Lux) <span class="sc">|&gt;</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">"mean "</span>, <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"Datetime"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>() <span class="sc">|&gt;</span> </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">decimals =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> <span class="fu">cols_hide</span>(<span class="st">`</span><span class="at">average episodes</span><span class="st">`</span>) <span class="co">#table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-lightexposure" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-lightexposure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;11: Light exposure (mean) without transformation
</figcaption>
<div aria-describedby="tbl-lightexposure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="cuanvxhkvc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#cuanvxhkvc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#cuanvxhkvc thead, #cuanvxhkvc tbody, #cuanvxhkvc tfoot, #cuanvxhkvc tr, #cuanvxhkvc td, #cuanvxhkvc th {
  border-style: none;
}

#cuanvxhkvc p {
  margin: 0;
  padding: 0;
}

#cuanvxhkvc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cuanvxhkvc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#cuanvxhkvc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#cuanvxhkvc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#cuanvxhkvc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cuanvxhkvc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cuanvxhkvc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cuanvxhkvc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cuanvxhkvc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cuanvxhkvc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cuanvxhkvc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cuanvxhkvc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cuanvxhkvc .gt_spanner_row {
  border-bottom-style: hidden;
}

#cuanvxhkvc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#cuanvxhkvc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cuanvxhkvc .gt_from_md > :first-child {
  margin-top: 0;
}

#cuanvxhkvc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cuanvxhkvc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cuanvxhkvc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#cuanvxhkvc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#cuanvxhkvc .gt_row_group_first td {
  border-top-width: 2px;
}

#cuanvxhkvc .gt_row_group_first th {
  border-top-width: 2px;
}

#cuanvxhkvc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cuanvxhkvc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#cuanvxhkvc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#cuanvxhkvc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cuanvxhkvc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cuanvxhkvc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cuanvxhkvc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#cuanvxhkvc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cuanvxhkvc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cuanvxhkvc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cuanvxhkvc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cuanvxhkvc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cuanvxhkvc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cuanvxhkvc .gt_left {
  text-align: left;
}

#cuanvxhkvc .gt_center {
  text-align: center;
}

#cuanvxhkvc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cuanvxhkvc .gt_font_normal {
  font-weight: normal;
}

#cuanvxhkvc .gt_font_bold {
  font-weight: bold;
}

#cuanvxhkvc .gt_font_italic {
  font-style: italic;
}

#cuanvxhkvc .gt_super {
  font-size: 65%;
}

#cuanvxhkvc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#cuanvxhkvc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#cuanvxhkvc .gt_indent_1 {
  text-indent: 5px;
}

#cuanvxhkvc .gt_indent_2 {
  text-indent: 10px;
}

#cuanvxhkvc .gt_indent_3 {
  text-indent: 15px;
}

#cuanvxhkvc .gt_indent_4 {
  text-indent: 20px;
}

#cuanvxhkvc .gt_indent_5 {
  text-indent: 25px;
}

#cuanvxhkvc .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#cuanvxhkvc div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="average-mean-Lux" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">average mean Lux</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="2" id="VEET" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="VEET  Date">Mean daily</td>
<td class="gt_row gt_right" headers="VEET  average mean Lux">304.1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="VEET  Date">Weekday</td>
<td class="gt_row gt_right" headers="VEET  average mean Lux">357.8</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="VEET  Date">Weekend</td>
<td class="gt_row gt_right" headers="VEET  average mean Lux">169.8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
<p>As light exposure data is highly skewed and zero-inflated (see <a href="#fig-hist-VEETlight" class="quarto-xref">Figure&nbsp;9</a> &amp; <span class="citation" data-cites="ZaunerEtAl2025JBR">(<a href="#ref-ZaunerEtAl2025JBR" role="doc-biblioref">Johannes Zauner, Guidolin, and Spitschan</a>)</span>), a transformation is sensible for the mean to be <a href="https://tscnlab.github.io/LightLogR/articles/log.html">meaningful</a>. The resulting illuminance is commonly much lower, due to the skew and the influence of zero values, as can be seen in <a href="#tbl-lightexposure2" class="quarto-xref">Table&nbsp;12</a>. <a href="https://tscnlab.github.io/LightLogR/reference/log_zero_inflated.html">log_zero_inflated()</a> solves this by adding a small value to the dataset prior to logarithmic transformation. <a href="https://tscnlab.github.io/LightLogR/reference/log_zero_inflated.html">exp_zero_inflated()</a> does the opposite.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [35]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [36]:</pre></div><div><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Id, Date, Datetime, Lux) <span class="sc">|&gt;</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Lux =</span> Lux <span class="sc">|&gt;</span> <span class="fu">log_zero_inflated</span>()) <span class="sc">|&gt;</span> <span class="co">#convert to logarithmic data</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">"mean "</span>, <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"Datetime"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">mean Lux</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">mean Lux</span><span class="st">`</span> <span class="sc">|&gt;</span> <span class="fu">exp_zero_inflated</span>()) <span class="sc">|&gt;</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(<span class="at">decimals =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> <span class="fu">cols_hide</span>(episodes) <span class="co">#table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-lightexposure2" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-lightexposure2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;12: Light exposure (mean) with logarithmic transformation
</figcaption>
<div aria-describedby="tbl-lightexposure2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="zbfjxnlwno" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zbfjxnlwno table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zbfjxnlwno thead, #zbfjxnlwno tbody, #zbfjxnlwno tfoot, #zbfjxnlwno tr, #zbfjxnlwno td, #zbfjxnlwno th {
  border-style: none;
}

#zbfjxnlwno p {
  margin: 0;
  padding: 0;
}

#zbfjxnlwno .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zbfjxnlwno .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zbfjxnlwno .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zbfjxnlwno .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zbfjxnlwno .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zbfjxnlwno .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zbfjxnlwno .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zbfjxnlwno .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zbfjxnlwno .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zbfjxnlwno .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zbfjxnlwno .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zbfjxnlwno .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zbfjxnlwno .gt_spanner_row {
  border-bottom-style: hidden;
}

#zbfjxnlwno .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zbfjxnlwno .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zbfjxnlwno .gt_from_md > :first-child {
  margin-top: 0;
}

#zbfjxnlwno .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zbfjxnlwno .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zbfjxnlwno .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zbfjxnlwno .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zbfjxnlwno .gt_row_group_first td {
  border-top-width: 2px;
}

#zbfjxnlwno .gt_row_group_first th {
  border-top-width: 2px;
}

#zbfjxnlwno .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbfjxnlwno .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zbfjxnlwno .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zbfjxnlwno .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zbfjxnlwno .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbfjxnlwno .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zbfjxnlwno .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zbfjxnlwno .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zbfjxnlwno .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zbfjxnlwno .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zbfjxnlwno .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbfjxnlwno .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zbfjxnlwno .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbfjxnlwno .gt_left {
  text-align: left;
}

#zbfjxnlwno .gt_center {
  text-align: center;
}

#zbfjxnlwno .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zbfjxnlwno .gt_font_normal {
  font-weight: normal;
}

#zbfjxnlwno .gt_font_bold {
  font-weight: bold;
}

#zbfjxnlwno .gt_font_italic {
  font-style: italic;
}

#zbfjxnlwno .gt_super {
  font-size: 65%;
}

#zbfjxnlwno .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zbfjxnlwno .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zbfjxnlwno .gt_indent_1 {
  text-indent: 5px;
}

#zbfjxnlwno .gt_indent_2 {
  text-indent: 10px;
}

#zbfjxnlwno .gt_indent_3 {
  text-indent: 15px;
}

#zbfjxnlwno .gt_indent_4 {
  text-indent: 20px;
}

#zbfjxnlwno .gt_indent_5 {
  text-indent: 25px;
}

#zbfjxnlwno .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#zbfjxnlwno div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="mean-Lux" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mean Lux</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="2" id="VEET" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="VEET  Date">Mean daily</td>
<td class="gt_row gt_right" headers="VEET  mean Lux">6.3</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="VEET  Date">Weekday</td>
<td class="gt_row gt_right" headers="VEET  mean Lux">7.9</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="VEET  Date">Weekend</td>
<td class="gt_row gt_right" headers="VEET  mean Lux">3.5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</section>
<section id="duration-per-outdoor-range" class="level4" data-number="4.2.2">
<h4 data-number="4.2.2" class="anchored" data-anchor-id="duration-per-outdoor-range"><span class="header-section-number">4.2.2</span> Duration per outdoor range</h4>
<p>The same way how <a href="#distance-range">distance ranges</a> were calculated, illuminance ranges are summarized, displayed in <a href="#tbl-outdoor" class="quarto-xref">Table&nbsp;13</a>.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [37]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [38]:</pre></div><div><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#cutting distance into bands</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>out_breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span><span class="sc">*</span><span class="dv">10</span><span class="sc">^</span><span class="dv">3</span>, <span class="cn">Inf</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>out_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Outdoor bright"</span>,          <span class="co"># [1000, 2000)</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Outdoor very bright"</span>,     <span class="co"># [2000, 3000)</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Outdoor extremely bright"</span> <span class="co"># [3000, Inf)</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span> </span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Lux_range =</span> </span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>           <span class="fu">cut</span>(Lux, <span class="at">breaks =</span> out_breaks, <span class="at">labels =</span> out_labels) <span class="co">#create ranges</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(Lux_range) <span class="sc">|&gt;</span> <span class="co">#remove NAs</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Lux_range, <span class="at">.add =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="co">#group by ranges</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">durations</span>(Lux) <span class="sc">|&gt;</span> <span class="co">#calculate durations</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Lux_range, <span class="at">values_from =</span> duration) <span class="sc">|&gt;</span> <span class="co">#widen data</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>(<span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_duration</span>(<span class="at">input_units =</span> <span class="st">"seconds"</span>, <span class="at">output_units =</span> <span class="st">"minutes"</span>) <span class="co">#show minutes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-outdoor" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-outdoor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;13: Duration in outdoor ranges
</figcaption>
<div aria-describedby="tbl-outdoor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="vgqgvwdetg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vgqgvwdetg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vgqgvwdetg thead, #vgqgvwdetg tbody, #vgqgvwdetg tfoot, #vgqgvwdetg tr, #vgqgvwdetg td, #vgqgvwdetg th {
  border-style: none;
}

#vgqgvwdetg p {
  margin: 0;
  padding: 0;
}

#vgqgvwdetg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vgqgvwdetg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vgqgvwdetg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vgqgvwdetg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vgqgvwdetg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vgqgvwdetg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vgqgvwdetg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vgqgvwdetg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vgqgvwdetg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vgqgvwdetg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vgqgvwdetg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vgqgvwdetg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vgqgvwdetg .gt_spanner_row {
  border-bottom-style: hidden;
}

#vgqgvwdetg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vgqgvwdetg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vgqgvwdetg .gt_from_md > :first-child {
  margin-top: 0;
}

#vgqgvwdetg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vgqgvwdetg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vgqgvwdetg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vgqgvwdetg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vgqgvwdetg .gt_row_group_first td {
  border-top-width: 2px;
}

#vgqgvwdetg .gt_row_group_first th {
  border-top-width: 2px;
}

#vgqgvwdetg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vgqgvwdetg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vgqgvwdetg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vgqgvwdetg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vgqgvwdetg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vgqgvwdetg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vgqgvwdetg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vgqgvwdetg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vgqgvwdetg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vgqgvwdetg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vgqgvwdetg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vgqgvwdetg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vgqgvwdetg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vgqgvwdetg .gt_left {
  text-align: left;
}

#vgqgvwdetg .gt_center {
  text-align: center;
}

#vgqgvwdetg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vgqgvwdetg .gt_font_normal {
  font-weight: normal;
}

#vgqgvwdetg .gt_font_bold {
  font-weight: bold;
}

#vgqgvwdetg .gt_font_italic {
  font-style: italic;
}

#vgqgvwdetg .gt_super {
  font-size: 65%;
}

#vgqgvwdetg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vgqgvwdetg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vgqgvwdetg .gt_indent_1 {
  text-indent: 5px;
}

#vgqgvwdetg .gt_indent_2 {
  text-indent: 10px;
}

#vgqgvwdetg .gt_indent_3 {
  text-indent: 15px;
}

#vgqgvwdetg .gt_indent_4 {
  text-indent: 20px;
}

#vgqgvwdetg .gt_indent_5 {
  text-indent: 25px;
}

#vgqgvwdetg .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#vgqgvwdetg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="Outdoor-bright" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Outdoor bright</th>
<th id="Outdoor-very-bright" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Outdoor very bright</th>
<th id="Outdoor-extremely-bright" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Outdoor extremely bright</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="4" id="VEET" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="VEET  Date">Mean daily</td>
<td class="gt_row gt_center" headers="VEET  Outdoor bright">24m</td>
<td class="gt_row gt_center" headers="VEET  Outdoor very bright">32m</td>
<td class="gt_row gt_center" headers="VEET  Outdoor extremely bright">55m</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="VEET  Date">Weekday</td>
<td class="gt_row gt_center" headers="VEET  Outdoor bright">29m</td>
<td class="gt_row gt_center" headers="VEET  Outdoor very bright">41m</td>
<td class="gt_row gt_center" headers="VEET  Outdoor extremely bright">65m</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="VEET  Date">Weekend</td>
<td class="gt_row gt_center" headers="VEET  Outdoor bright">10m</td>
<td class="gt_row gt_center" headers="VEET  Outdoor very bright">10m</td>
<td class="gt_row gt_center" headers="VEET  Outdoor extremely bright">30m</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
<p>These states can also be easily visualized in <a href="#fig-outdoor" class="quarto-xref">Figure&nbsp;10</a>.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [39]:</pre></div><div id="cell-fig-outdoor" class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_day</span>(<span class="at">y.axis =</span> Lux, </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">y.axis.label =</span> <span class="st">"Illuminance (lx)"</span>, </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">geom =</span> <span class="st">"line"</span>, </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">jco_color =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_state</span>(Lux_range, <span class="at">aes_fill =</span> Lux_range, <span class="at">alpha =</span> <span class="fl">0.75</span>) <span class="sc">|&gt;</span> </span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_photoperiod</span>(coordinates) <span class="sc">+</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Illuminance conditions"</span>) <span class="sc">+</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-outdoor" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-outdoor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-outdoor-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10" title="Figure&nbsp;10: Outdoor ranges throughout the measurement period. Colored areas indicate times of outdoor lighting conditions. Violett indicates values above 1000 lx, green above 2000 lx, and yellow above 3000 lx. Grey shaded areas indicate nighttime from civil dusk to civil dawn"><img src="index_files/figure-html/fig-outdoor-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-outdoor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: Outdoor ranges throughout the measurement period. Colored areas indicate times of outdoor lighting conditions. Violett indicates values above 1000 lx, green above 2000 lx, and yellow above 3000 lx. Grey shaded areas indicate nighttime from civil dusk to civil dawn
</figcaption>
</figure>
</div>
</div>
</div></div>
</section>
<section id="changes-indoor-to-outdoor" class="level4" data-number="4.2.3">
<h4 data-number="4.2.3" class="anchored" data-anchor-id="changes-indoor-to-outdoor"><span class="header-section-number">4.2.3</span> Changes indoor to outdoor</h4>
<p>To calculate the number of times a change from indoor to outdoor happens, we can extract all states where this is the case in <a href="#tbl-changesoutdoor" class="quarto-xref">Table&nbsp;14</a>.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [40]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [41]:</pre></div><div><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_states</span>(Outdoor, Lux <span class="sc">&gt;=</span> <span class="dv">1000</span>, <span class="co">#get all instances of states and non-states</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">group.by.state =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#don't group output by the state </span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">lead</span>(Outdoor), Outdoor) <span class="sc">|&gt;</span>  <span class="co">#keep where the prior state is FALSE and current TRUE</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">prefix =</span> <span class="st">"mean "</span>,</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"Datetime"</span>, <span class="st">"Outdoor"</span>, <span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"duration"</span>),</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">add.total.duration =</span> <span class="cn">FALSE</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(episodes, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_duration</span>(<span class="st">`</span><span class="at">mean epoch</span><span class="st">`</span>, <span class="at">input_units =</span> <span class="st">"seconds"</span>, <span class="at">output_units =</span> <span class="st">"seconds"</span>)<span class="co">#table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-changesoutdoor" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-changesoutdoor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;14: Number of times light levels change from indoor (&lt;1000&nbsp;lx) to outdoor (&gt;1000&nbsp;lx)
</figcaption>
<div aria-describedby="tbl-changesoutdoor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="igiunkumga" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#igiunkumga table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#igiunkumga thead, #igiunkumga tbody, #igiunkumga tfoot, #igiunkumga tr, #igiunkumga td, #igiunkumga th {
  border-style: none;
}

#igiunkumga p {
  margin: 0;
  padding: 0;
}

#igiunkumga .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#igiunkumga .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#igiunkumga .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#igiunkumga .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#igiunkumga .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#igiunkumga .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#igiunkumga .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#igiunkumga .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#igiunkumga .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#igiunkumga .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#igiunkumga .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#igiunkumga .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#igiunkumga .gt_spanner_row {
  border-bottom-style: hidden;
}

#igiunkumga .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#igiunkumga .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#igiunkumga .gt_from_md > :first-child {
  margin-top: 0;
}

#igiunkumga .gt_from_md > :last-child {
  margin-bottom: 0;
}

#igiunkumga .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#igiunkumga .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#igiunkumga .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#igiunkumga .gt_row_group_first td {
  border-top-width: 2px;
}

#igiunkumga .gt_row_group_first th {
  border-top-width: 2px;
}

#igiunkumga .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#igiunkumga .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#igiunkumga .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#igiunkumga .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#igiunkumga .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#igiunkumga .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#igiunkumga .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#igiunkumga .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#igiunkumga .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#igiunkumga .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#igiunkumga .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#igiunkumga .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#igiunkumga .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#igiunkumga .gt_left {
  text-align: left;
}

#igiunkumga .gt_center {
  text-align: center;
}

#igiunkumga .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#igiunkumga .gt_font_normal {
  font-weight: normal;
}

#igiunkumga .gt_font_bold {
  font-weight: bold;
}

#igiunkumga .gt_font_italic {
  font-style: italic;
}

#igiunkumga .gt_super {
  font-size: 65%;
}

#igiunkumga .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#igiunkumga .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#igiunkumga .gt_indent_1 {
  text-indent: 5px;
}

#igiunkumga .gt_indent_2 {
  text-indent: 10px;
}

#igiunkumga .gt_indent_3 {
  text-indent: 15px;
}

#igiunkumga .gt_indent_4 {
  text-indent: 20px;
}

#igiunkumga .gt_indent_5 {
  text-indent: 25px;
}

#igiunkumga .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#igiunkumga div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="mean-epoch" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mean epoch</th>
<th id="episodes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">episodes</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="3" id="VEET" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="VEET  Date">Mean daily</td>
<td class="gt_row gt_right" headers="VEET  mean epoch">5s</td>
<td class="gt_row gt_right" headers="VEET  episodes">64</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="VEET  Date">Weekday</td>
<td class="gt_row gt_right" headers="VEET  mean epoch">5s</td>
<td class="gt_row gt_right" headers="VEET  episodes">72</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="VEET  Date">Weekend</td>
<td class="gt_row gt_right" headers="VEET  mean epoch">5s</td>
<td class="gt_row gt_right" headers="VEET  episodes">46</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
<p>This seems rather high and is certainly influenced by the small interval of 5 seconds. Requiring that the time outside has to at least persist for 5 minutes (and slight interruptions) will bring this number down. See <a href="#tbl-changesoutdoor2" class="quarto-xref">Table&nbsp;15</a> for comparison.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [42]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [43]:</pre></div><div><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_clusters</span>(Lux <span class="sc">&gt;=</span> <span class="dv">1000</span>, <span class="co">#cluster conditions</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"5 min"</span>, <span class="co">#require 1 minute durations</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">interruption.duration =</span> <span class="st">"20 secs"</span>, <span class="co">#allow for short interruptions</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">return.only.clusters =</span> <span class="cn">FALSE</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">drop.empty.groups =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#get all instances of clusters and non-clusters</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">lead</span>(is.cluster), is.cluster) <span class="sc">|&gt;</span>  <span class="co">#keep where the prior state is FALSE</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">prefix =</span> <span class="st">"mean "</span>,</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"Datetime"</span>, <span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"duration"</span>),</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">add.total.duration =</span> <span class="cn">FALSE</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(episodes, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="co">#table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-changesoutdoor2" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-changesoutdoor2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;15: Number of times light levels change from indoor (&lt;1000&nbsp;lx) to outdoor (&gt;1000&nbsp;lx) for at least 5 minutes
</figcaption>
<div aria-describedby="tbl-changesoutdoor2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="nqwauruixe" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nqwauruixe table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nqwauruixe thead, #nqwauruixe tbody, #nqwauruixe tfoot, #nqwauruixe tr, #nqwauruixe td, #nqwauruixe th {
  border-style: none;
}

#nqwauruixe p {
  margin: 0;
  padding: 0;
}

#nqwauruixe .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nqwauruixe .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nqwauruixe .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nqwauruixe .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nqwauruixe .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nqwauruixe .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nqwauruixe .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nqwauruixe .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nqwauruixe .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nqwauruixe .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nqwauruixe .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nqwauruixe .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nqwauruixe .gt_spanner_row {
  border-bottom-style: hidden;
}

#nqwauruixe .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nqwauruixe .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nqwauruixe .gt_from_md > :first-child {
  margin-top: 0;
}

#nqwauruixe .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nqwauruixe .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nqwauruixe .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nqwauruixe .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nqwauruixe .gt_row_group_first td {
  border-top-width: 2px;
}

#nqwauruixe .gt_row_group_first th {
  border-top-width: 2px;
}

#nqwauruixe .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nqwauruixe .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nqwauruixe .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nqwauruixe .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nqwauruixe .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nqwauruixe .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nqwauruixe .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nqwauruixe .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nqwauruixe .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nqwauruixe .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nqwauruixe .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nqwauruixe .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nqwauruixe .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nqwauruixe .gt_left {
  text-align: left;
}

#nqwauruixe .gt_center {
  text-align: center;
}

#nqwauruixe .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nqwauruixe .gt_font_normal {
  font-weight: normal;
}

#nqwauruixe .gt_font_bold {
  font-weight: bold;
}

#nqwauruixe .gt_font_italic {
  font-style: italic;
}

#nqwauruixe .gt_super {
  font-size: 65%;
}

#nqwauruixe .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nqwauruixe .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nqwauruixe .gt_indent_1 {
  text-indent: 5px;
}

#nqwauruixe .gt_indent_2 {
  text-indent: 10px;
}

#nqwauruixe .gt_indent_3 {
  text-indent: 15px;
}

#nqwauruixe .gt_indent_4 {
  text-indent: 20px;
}

#nqwauruixe .gt_indent_5 {
  text-indent: 25px;
}

#nqwauruixe .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#nqwauruixe div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="mean-epoch" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">mean epoch</th>
<th id="episodes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">episodes</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="3" id="VEET" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="VEET  Date">Mean daily</td>
<td class="gt_row gt_center" headers="VEET  mean epoch">5s</td>
<td class="gt_row gt_right" headers="VEET  episodes">5</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="VEET  Date">Weekday</td>
<td class="gt_row gt_center" headers="VEET  mean epoch">5s</td>
<td class="gt_row gt_right" headers="VEET  episodes">6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="VEET  Date">Weekend</td>
<td class="gt_row gt_center" headers="VEET  mean epoch">5s</td>
<td class="gt_row gt_right" headers="VEET  episodes">4</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</section>
<section id="longest-period-above-1000-lx" class="level4" data-number="4.2.4">
<h4 data-number="4.2.4" class="anchored" data-anchor-id="longest-period-above-1000-lx"><span class="header-section-number">4.2.4</span> Longest period above 1000 lx</h4>
<p>The last <code>Light</code> aspect from <a href="#tbl-one" class="quarto-xref">Table&nbsp;1</a> is the longest period above 1000&nbsp;lx (PAT1000). While this can be calculated based on what we have shown above by combining <a href="https://tscnlab.github.io/LightLogR/reference/extract_states.html">extract_states()</a> with a simple filter for maximal duration, this metric provides a good opportunity to show that some aspects can also be calculated with dedicated <a href="https://tscnlab.github.io/LightLogR/articles/Metrics.html">metric</a> functions in <code>LightLogR</code>. In this case, we use <a href="https://tscnlab.github.io/LightLogR/reference/period_above_threshold.html">period_above_threshold()</a>. The benefit of this approach is that multiple metrics can be calculated at once. Here, for example, we also calculate the duration above 1000&nbsp;lx (TAT1000) alongside in <a href="#tbl-periodoutdoor" class="quarto-xref">Table&nbsp;16</a>.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [44]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [45]:</pre></div><div><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">period_above_threshold</span>(Lux, </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>                           Datetime, </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">threshold =</span> <span class="dv">1000</span>, </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">na.rm =</span> <span class="cn">TRUE</span>, </span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>                           <span class="at">as.df =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">duration_above_threshold</span>(Lux,</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>                             Datetime,</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>                             <span class="at">threshold =</span> <span class="dv">1000</span>,</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">na.rm =</span> <span class="cn">TRUE</span>,</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">as.df =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"keep"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-periodoutdoor" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-periodoutdoor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;16: Longest period (PAT1000) and total duration (TAT1000) above 1000&nbsp;lx
</figcaption>
<div aria-describedby="tbl-periodoutdoor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="qciovwckwi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qciovwckwi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qciovwckwi thead, #qciovwckwi tbody, #qciovwckwi tfoot, #qciovwckwi tr, #qciovwckwi td, #qciovwckwi th {
  border-style: none;
}

#qciovwckwi p {
  margin: 0;
  padding: 0;
}

#qciovwckwi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qciovwckwi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qciovwckwi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qciovwckwi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qciovwckwi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qciovwckwi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qciovwckwi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qciovwckwi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qciovwckwi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qciovwckwi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qciovwckwi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qciovwckwi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qciovwckwi .gt_spanner_row {
  border-bottom-style: hidden;
}

#qciovwckwi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qciovwckwi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qciovwckwi .gt_from_md > :first-child {
  margin-top: 0;
}

#qciovwckwi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qciovwckwi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qciovwckwi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qciovwckwi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qciovwckwi .gt_row_group_first td {
  border-top-width: 2px;
}

#qciovwckwi .gt_row_group_first th {
  border-top-width: 2px;
}

#qciovwckwi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qciovwckwi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qciovwckwi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qciovwckwi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qciovwckwi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qciovwckwi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qciovwckwi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qciovwckwi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qciovwckwi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qciovwckwi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qciovwckwi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qciovwckwi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qciovwckwi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qciovwckwi .gt_left {
  text-align: left;
}

#qciovwckwi .gt_center {
  text-align: center;
}

#qciovwckwi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qciovwckwi .gt_font_normal {
  font-weight: normal;
}

#qciovwckwi .gt_font_bold {
  font-weight: bold;
}

#qciovwckwi .gt_font_italic {
  font-style: italic;
}

#qciovwckwi .gt_super {
  font-size: 65%;
}

#qciovwckwi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qciovwckwi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qciovwckwi .gt_indent_1 {
  text-indent: 5px;
}

#qciovwckwi .gt_indent_2 {
  text-indent: 10px;
}

#qciovwckwi .gt_indent_3 {
  text-indent: 15px;
}

#qciovwckwi .gt_indent_4 {
  text-indent: 20px;
}

#qciovwckwi .gt_indent_5 {
  text-indent: 25px;
}

#qciovwckwi .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#qciovwckwi div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="period-above-1000" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">period above 1000</th>
<th id="duration-above-1000" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">duration above 1000</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="3" id="VEET" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="VEET  Date">Mean daily</td>
<td class="gt_row gt_center" headers="VEET  period above 1000">1987s (~33.12 minutes)</td>
<td class="gt_row gt_center" headers="VEET  duration above 1000">6709s (~1.86 hours)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="VEET  Date">Weekday</td>
<td class="gt_row gt_center" headers="VEET  period above 1000">2501s (~41.68 minutes)</td>
<td class="gt_row gt_center" headers="VEET  duration above 1000">8164s (~2.27 hours)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="VEET  Date">Weekend</td>
<td class="gt_row gt_center" headers="VEET  period above 1000">702s (~11.7 minutes)</td>
<td class="gt_row gt_center" headers="VEET  duration above 1000">3070s (~51.17 minutes)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</section>
</section>
<section id="spectrum" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="spectrum"><span class="header-section-number">4.3</span> Spectrum</h3>
<p>Spectral data is not part of any of the datasets used in this article. Rather, it has to be reconstructed from sensor counts and a calibration matrix. The <code>VEET</code> device contains ten sensor channels that can be used for reconstruction. As these are contained in a different sensor than the ambient light sensor, a different modality needs to be imported from the same file. Data preparation will be analogous to <a href="#light">Light</a>. <code>PHO</code> contains the data from spectral sensor channels. For computational reasons, the data will be aggregated to <code>5 minutes</code> intervals. The first three rows are shown in <a href="#tbl-PHO" class="quarto-xref">Table&nbsp;17</a>.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [46]:</pre></div><div id="cell-fig-VEET-Spec-overview" class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span> import<span class="sc">$</span><span class="fu">VEET</span>(path, <span class="at">tz =</span> tz, <span class="at">modality =</span> <span class="st">"PHO"</span>, <span class="at">manual.id =</span> <span class="st">"VEET"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Multiple files in zip: reading '01_VEET_L.csv'</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Successfully read in 304'197 observations across 1 Ids from 1 VEET-file(s).
Timezone set is US/Central.
The system timezone is Europe/Berlin. Please correct if necessary!

First Observation: 2024-06-04 15:00:36
Last Observation: 2024-06-12 08:29:43
Timespan: 7.7 days

Observation intervals: 
   Id    interval.time              n pct      
 1 VEET  0s                         1 0.00033% 
 2 VEET  1s                      1753 0.57627% 
 3 VEET  2s                    300556 98.80340%
 4 VEET  3s                      1873 0.61572% 
 5 VEET  4s                         3 0.00099% 
 6 VEET  6s                         1 0.00033% 
 7 VEET  7s                         2 0.00066% 
 8 VEET  9s                         5 0.00164% 
 9 VEET  109s (~1.82 minutes)       1 0.00033% 
10 VEET  59077s (~16.41 hours)      1 0.00033% </code></pre>
</div>
<div class="cell-output-display">
<div id="fig-VEET-Spec-overview" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-VEET-Spec-overview-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-VEET-Spec-overview-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11" title="Figure&nbsp;11: Overview plot of imported VEET spectral data"><img src="index_files/figure-html/fig-VEET-Spec-overview-1.png" class="img-fluid figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-VEET-Spec-overview-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;11: Overview plot of imported VEET spectral data
</figcaption>
</figure>
</div>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [47]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Datetime</span>(<span class="at">unit =</span> <span class="st">"5 mins"</span>) <span class="sc">|&gt;</span> <span class="co">#aggregate to 5 minute intervals</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gap_handler</span>(<span class="at">full.days =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span>  <span class="co">#set implicit gaps to explicit gaps</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_Date_col</span>(<span class="at">group.by =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_partial_data</span>(Gain, <span class="at">threshold.missing =</span> <span class="st">"1 hour"</span>) <span class="co">#remove bad days</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [48]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [49]:</pre></div><div><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">3</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(modality, file.name, is.implicit, time_stamp)) <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(s415<span class="sc">:</span>ClearR) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-PHO" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-PHO-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;17: Overview of the spectral sensor import from the VEET device
</figcaption>
<div aria-describedby="tbl-PHO-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="clvvmslmoh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#clvvmslmoh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#clvvmslmoh thead, #clvvmslmoh tbody, #clvvmslmoh tfoot, #clvvmslmoh tr, #clvvmslmoh td, #clvvmslmoh th {
  border-style: none;
}

#clvvmslmoh p {
  margin: 0;
  padding: 0;
}

#clvvmslmoh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#clvvmslmoh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#clvvmslmoh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#clvvmslmoh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#clvvmslmoh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#clvvmslmoh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#clvvmslmoh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#clvvmslmoh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#clvvmslmoh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#clvvmslmoh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#clvvmslmoh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#clvvmslmoh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#clvvmslmoh .gt_spanner_row {
  border-bottom-style: hidden;
}

#clvvmslmoh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#clvvmslmoh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#clvvmslmoh .gt_from_md > :first-child {
  margin-top: 0;
}

#clvvmslmoh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#clvvmslmoh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#clvvmslmoh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#clvvmslmoh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#clvvmslmoh .gt_row_group_first td {
  border-top-width: 2px;
}

#clvvmslmoh .gt_row_group_first th {
  border-top-width: 2px;
}

#clvvmslmoh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#clvvmslmoh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#clvvmslmoh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#clvvmslmoh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#clvvmslmoh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#clvvmslmoh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#clvvmslmoh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#clvvmslmoh .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#clvvmslmoh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#clvvmslmoh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#clvvmslmoh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#clvvmslmoh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#clvvmslmoh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#clvvmslmoh .gt_left {
  text-align: left;
}

#clvvmslmoh .gt_center {
  text-align: center;
}

#clvvmslmoh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#clvvmslmoh .gt_font_normal {
  font-weight: normal;
}

#clvvmslmoh .gt_font_bold {
  font-weight: bold;
}

#clvvmslmoh .gt_font_italic {
  font-style: italic;
}

#clvvmslmoh .gt_super {
  font-size: 65%;
}

#clvvmslmoh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#clvvmslmoh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#clvvmslmoh .gt_indent_1 {
  text-indent: 5px;
}

#clvvmslmoh .gt_indent_2 {
  text-indent: 10px;
}

#clvvmslmoh .gt_indent_3 {
  text-indent: 15px;
}

#clvvmslmoh .gt_indent_4 {
  text-indent: 20px;
}

#clvvmslmoh .gt_indent_5 {
  text-indent: 25px;
}

#clvvmslmoh .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#clvvmslmoh div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Datetime" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Datetime</th>
<th id="integration_time" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">integration_time</th>
<th id="Gain" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Gain</th>
<th id="s415" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">s415</th>
<th id="s445" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">s445</th>
<th id="s480" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">s480</th>
<th id="s515" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">s515</th>
<th id="s555" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">s555</th>
<th id="s590" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">s590</th>
<th id="s630" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">s630</th>
<th id="s680" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">s680</th>
<th id="s940" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">s940</th>
<th id="Dark" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Dark</th>
<th id="ClearL" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ClearL</th>
<th id="ClearR" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ClearR</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="15" id="VEET - 2024-06-06" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET - 2024-06-06</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_right" headers="VEET - 2024-06-06  Datetime">2024-06-06</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  integration_time">50</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  Gain">512</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s415">0.14</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s445">4.77</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s480">5.89</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s515">12.95</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s555">27.06</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s590">41.85</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s630">54.49</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s680">33.61</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s940">14.67</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  Dark">0.00</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  ClearL">92.84</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  ClearR">95.39</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="VEET - 2024-06-06  Datetime">2024-06-06 00:05:00</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  integration_time">50</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  Gain">512</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s415">0.14</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s445">4.69</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s480">5.87</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s515">12.95</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s555">26.82</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s590">41.33</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s630">54.07</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s680">33.25</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s940">14.69</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  Dark">0.00</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  ClearL">91.93</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  ClearR">94.81</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="VEET - 2024-06-06  Datetime">2024-06-06 00:10:00</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  integration_time">50</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  Gain">512</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s415">0.14</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s445">4.73</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s480">5.94</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s515">12.98</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s555">27.39</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s590">42.43</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s630">55.07</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s680">33.80</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  s940">15.15</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  Dark">0.00</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  ClearL">93.63</td>
<td class="gt_row gt_right" headers="VEET - 2024-06-06  ClearR">96.57</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
<p>The channels <code>s415</code> through <code>ClearR</code> contain raw sensor counts and need to be normalized by the <code>Gain</code> value. Further, <code>ClearL</code> and <code>ClearR</code> need to be averaged prior to spectral reconstruction. The appropriate <code>gain.ratio.table</code> for the sensor <code>TSL2585</code> is integrated in <code>LightLogR</code>, but should also be confirmed by the manufacturer.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [50]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>count.columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"s415"</span>, <span class="st">"s445"</span>, <span class="st">"s480"</span>, <span class="st">"s515"</span>, <span class="st">"s555"</span>, <span class="st">"s590"</span>, <span class="st">"s630"</span>, </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"s680"</span>, <span class="st">"s940"</span>, <span class="st">"Dark"</span>, <span class="st">"ClearL"</span>, <span class="st">"ClearR"</span>) <span class="co">#column names</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co">#normalize data</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">normalize_counts</span>( <span class="co">#function to normalize counts</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">gain.columns =</span> <span class="fu">rep</span>(<span class="st">"Gain"</span>, <span class="dv">12</span>), <span class="co">#all sensor channels share the gain value</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">count.columns =</span> count.columns, <span class="co">#senso channels to normalize</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    gain.ratio.tables<span class="sc">$</span>TSL2585 <span class="co">#gain ratio channel for TSL2585 sensor</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="co">#average Clear Channels</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span> </span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Clear.normalized =</span> (ClearL<span class="sc">+</span>ClearR)<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a><span class="co">#remove raw sensor counts and rename normalized values</span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(s415<span class="sc">:</span>ClearR)) <span class="sc">|&gt;</span> </span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_with</span>(\(x) <span class="fu">str_remove</span>(x, <span class="st">".normalized"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<p>This closes the necessary preparation in the dataset. The calibration matrix was provided by the manufacturer and is specific to the make and model. It should not be used for research purposes without confirming its accuracy with the manufacturer.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [51]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">#import calibration matrix</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>calib_mtx <span class="ot">&lt;-</span> </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="st">"data/VEET_calibration_matrix.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_to_rownames</span>(<span class="st">"wavelength"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.matrix</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<p>Construction the spectrum is now straightforward.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [52]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Spectrum =</span> </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">spectral_reconstruction</span>(</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">sensor_channels =</span> <span class="fu">pick</span>(s415<span class="sc">:</span>s940, Clear),</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">calibration_matrix =</span> calib_mtx</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>               )</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>           )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<p>The dataset now contains a <code>list-column</code> containing the spectrum for each observation. We can visualize the data in <a href="#fig-spectrum" class="quarto-xref">Figure&nbsp;12</a>.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [53]:</pre></div><div id="cell-fig-spectrum" class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(Spectrum) <span class="sc">|&gt;</span> <span class="co">#unnest the list column</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Datetime) <span class="sc">|&gt;</span> <span class="co">#group by each spectrum</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">irradiance =</span> irradiance<span class="sc">/</span><span class="fu">max</span>(irradiance)) <span class="sc">|&gt;</span> <span class="co">#scale spectra relative</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>wavelength, <span class="at">y =</span> irradiance, <span class="at">group =</span> Datetime)) <span class="sc">+</span> <span class="co">#plot</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Relative spectral irradiance (%)"</span>, <span class="at">x =</span> <span class="st">"Wavelength (nm)"</span>) <span class="sc">+</span> </span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_percent</span>())<span class="sc">+</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">400</span>, <span class="dv">700</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">10</span>,<span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 400545 rows containing missing values or values outside the scale range
(`geom_path()`).</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-spectrum" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-spectrum-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-spectrum-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12" title="Figure&nbsp;12: Reconstructed light spectra. The plot shows light spectra for 5-minute aggregated time intervals across the whole dataset"><img src="index_files/figure-html/fig-spectrum-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-spectrum-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;12: Reconstructed light spectra. The plot shows light spectra for 5-minute aggregated time intervals across the whole dataset
</figcaption>
</figure>
</div>
</div>
</div></div>
<p>These spectral data will be the basis to calculate the last two metrics. Note that spectrum-based metrics are less developed in scientific research, compared to, e.g., distance and light. The following two examples thus simply show theoretical use cases that can be adapted to a researchers need.</p>
<section id="ratio-of-short-vs.-long-wavelength-light" class="level4" data-number="4.3.1">
<h4 data-number="4.3.1" class="anchored" data-anchor-id="ratio-of-short-vs.-long-wavelength-light"><span class="header-section-number">4.3.1</span> Ratio of short vs.&nbsp;long wavelength light</h4>
<p>The first spectral metric requires integration across two sections of the spectrum. <a href="https://tscnlab.github.io/LightLogR/reference/spectral_integration.html">spectral_integration()</a> makes this task straight forward. The results can be seen in <a href="#tbl-ratio" class="quarto-xref">Table&nbsp;18</a></p>
<div class="cell-container"><div class="cell-decorator"><pre>In [54]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Id, Date, Datetime, Spectrum) <span class="sc">|&gt;</span> </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">short =</span> Spectrum <span class="sc">|&gt;</span> <span class="fu">map_dbl</span>(spectral_integration, <span class="co">#short wavelength</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">wavelength.range =</span> <span class="fu">c</span>(<span class="dv">400</span>,<span class="dv">500</span>)),</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">long =</span> Spectrum <span class="sc">|&gt;</span> <span class="fu">map_dbl</span>(spectral_integration, <span class="co">#long wavelength</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">wavelength.range =</span> <span class="fu">c</span>(<span class="dv">600</span>,<span class="dv">700</span>)),</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">sl ratio</span><span class="st">`</span> <span class="ot">=</span> short <span class="sc">/</span> long <span class="co"># calculate the ratio</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [55]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [56]:</pre></div><div><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">""</span>, <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"Datetime"</span>, <span class="st">"Spectrum"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(<span class="sc">-</span><span class="st">`</span><span class="at">sl ratio</span><span class="st">`</span>, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">cols_hide</span>(episodes) <span class="co"># table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-ratio" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-ratio-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;18: Ratio of short vs.&nbsp;long wavelength light
</figcaption>
<div aria-describedby="tbl-ratio-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="qsouzrnxkm" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qsouzrnxkm table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qsouzrnxkm thead, #qsouzrnxkm tbody, #qsouzrnxkm tfoot, #qsouzrnxkm tr, #qsouzrnxkm td, #qsouzrnxkm th {
  border-style: none;
}

#qsouzrnxkm p {
  margin: 0;
  padding: 0;
}

#qsouzrnxkm .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qsouzrnxkm .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qsouzrnxkm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qsouzrnxkm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qsouzrnxkm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qsouzrnxkm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qsouzrnxkm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qsouzrnxkm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qsouzrnxkm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qsouzrnxkm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qsouzrnxkm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qsouzrnxkm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qsouzrnxkm .gt_spanner_row {
  border-bottom-style: hidden;
}

#qsouzrnxkm .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qsouzrnxkm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qsouzrnxkm .gt_from_md > :first-child {
  margin-top: 0;
}

#qsouzrnxkm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qsouzrnxkm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qsouzrnxkm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qsouzrnxkm .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qsouzrnxkm .gt_row_group_first td {
  border-top-width: 2px;
}

#qsouzrnxkm .gt_row_group_first th {
  border-top-width: 2px;
}

#qsouzrnxkm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qsouzrnxkm .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qsouzrnxkm .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qsouzrnxkm .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qsouzrnxkm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qsouzrnxkm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qsouzrnxkm .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qsouzrnxkm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qsouzrnxkm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qsouzrnxkm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qsouzrnxkm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qsouzrnxkm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qsouzrnxkm .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qsouzrnxkm .gt_left {
  text-align: left;
}

#qsouzrnxkm .gt_center {
  text-align: center;
}

#qsouzrnxkm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qsouzrnxkm .gt_font_normal {
  font-weight: normal;
}

#qsouzrnxkm .gt_font_bold {
  font-weight: bold;
}

#qsouzrnxkm .gt_font_italic {
  font-style: italic;
}

#qsouzrnxkm .gt_super {
  font-size: 65%;
}

#qsouzrnxkm .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qsouzrnxkm .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qsouzrnxkm .gt_indent_1 {
  text-indent: 5px;
}

#qsouzrnxkm .gt_indent_2 {
  text-indent: 10px;
}

#qsouzrnxkm .gt_indent_3 {
  text-indent: 15px;
}

#qsouzrnxkm .gt_indent_4 {
  text-indent: 20px;
}

#qsouzrnxkm .gt_indent_5 {
  text-indent: 25px;
}

#qsouzrnxkm .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#qsouzrnxkm div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="short" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">short</th>
<th id="long" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">long</th>
<th id="sl-ratio" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">sl ratio</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="4" id="VEET" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="VEET  Date">Mean daily</td>
<td class="gt_row gt_right" headers="VEET  short">37</td>
<td class="gt_row gt_right" headers="VEET  long">102</td>
<td class="gt_row gt_right" headers="VEET  sl ratio">-0.7410509</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="VEET  Date">Weekday</td>
<td class="gt_row gt_right" headers="VEET  short">70</td>
<td class="gt_row gt_right" headers="VEET  long">135</td>
<td class="gt_row gt_right" headers="VEET  sl ratio">-0.5457927</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="VEET  Date">Weekend</td>
<td class="gt_row gt_right" headers="VEET  short">−46</td>
<td class="gt_row gt_right" headers="VEET  long">20</td>
<td class="gt_row gt_right" headers="VEET  sl ratio">-1.2291965</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</section>
<section id="short-wavelength-light-at-certain-times-of-day" class="level4" data-number="4.3.2">
<h4 data-number="4.3.2" class="anchored" data-anchor-id="short-wavelength-light-at-certain-times-of-day"><span class="header-section-number">4.3.2</span> Short-wavelength light at certain times of day</h4>
<p>For the last metric we will look at only the <code>short</code> wavelength contribution (which was already calculated in the previous section), but do so through certain times of day. <a href="#tbl-shortfilter" class="quarto-xref">Table&nbsp;19</a> shows the first approach, which is about exclusively looking at local time (arbitrarily around noon). <a href="#fig-shorttime" class="quarto-xref">Figure&nbsp;13</a> expands this view to all hours of the day with a binned approach. Lastly, <a href="#tbl-daytime" class="quarto-xref">Table&nbsp;20</a> focuses on photoperiods.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Local time</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Across the day</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">Photoperiod</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell-container"><div class="cell-decorator"><pre>In [57]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [58]:</pre></div><div><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_Time</span>(<span class="at">start =</span> <span class="st">"11:00:00"</span>, <span class="at">end =</span> <span class="st">"14:00:00"</span>) <span class="sc">|&gt;</span> <span class="co">#filter out certain times</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Spectrum, long, <span class="st">`</span><span class="at">sl ratio</span><span class="st">`</span>, Time, Datetime)) <span class="sc">|&gt;</span> </span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(short) <span class="sc">|&gt;</span> <span class="fu">cols_label</span>(<span class="at">short =</span> <span class="st">"Short wavelength irradiance"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-shortfilter" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-shortfilter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;19: Short wavelength light exposure between 11:00 and 14:00
</figcaption>
<div aria-describedby="tbl-shortfilter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="nlybwaxakp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nlybwaxakp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nlybwaxakp thead, #nlybwaxakp tbody, #nlybwaxakp tfoot, #nlybwaxakp tr, #nlybwaxakp td, #nlybwaxakp th {
  border-style: none;
}

#nlybwaxakp p {
  margin: 0;
  padding: 0;
}

#nlybwaxakp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nlybwaxakp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nlybwaxakp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nlybwaxakp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nlybwaxakp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nlybwaxakp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nlybwaxakp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nlybwaxakp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nlybwaxakp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nlybwaxakp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nlybwaxakp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nlybwaxakp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nlybwaxakp .gt_spanner_row {
  border-bottom-style: hidden;
}

#nlybwaxakp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nlybwaxakp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nlybwaxakp .gt_from_md > :first-child {
  margin-top: 0;
}

#nlybwaxakp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nlybwaxakp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nlybwaxakp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nlybwaxakp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nlybwaxakp .gt_row_group_first td {
  border-top-width: 2px;
}

#nlybwaxakp .gt_row_group_first th {
  border-top-width: 2px;
}

#nlybwaxakp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nlybwaxakp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nlybwaxakp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nlybwaxakp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nlybwaxakp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nlybwaxakp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nlybwaxakp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nlybwaxakp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nlybwaxakp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nlybwaxakp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nlybwaxakp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nlybwaxakp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nlybwaxakp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nlybwaxakp .gt_left {
  text-align: left;
}

#nlybwaxakp .gt_center {
  text-align: center;
}

#nlybwaxakp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nlybwaxakp .gt_font_normal {
  font-weight: normal;
}

#nlybwaxakp .gt_font_bold {
  font-weight: bold;
}

#nlybwaxakp .gt_font_italic {
  font-style: italic;
}

#nlybwaxakp .gt_super {
  font-size: 65%;
}

#nlybwaxakp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nlybwaxakp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nlybwaxakp .gt_indent_1 {
  text-indent: 5px;
}

#nlybwaxakp .gt_indent_2 {
  text-indent: 10px;
}

#nlybwaxakp .gt_indent_3 {
  text-indent: 15px;
}

#nlybwaxakp .gt_indent_4 {
  text-indent: 20px;
}

#nlybwaxakp .gt_indent_5 {
  text-indent: 25px;
}

#nlybwaxakp .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#nlybwaxakp div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="short" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Short wavelength irradiance</th>
<th id="episodes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">episodes</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="3" id="VEET" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">VEET</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="VEET  Date">Mean daily</td>
<td class="gt_row gt_right" headers="VEET  short">−184.21</td>
<td class="gt_row gt_right" headers="VEET  episodes">37</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="VEET  Date">Weekday</td>
<td class="gt_row gt_right" headers="VEET  short">−202.23</td>
<td class="gt_row gt_right" headers="VEET  episodes">37</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="VEET  Date">Weekend</td>
<td class="gt_row gt_right" headers="VEET  short">−139.14</td>
<td class="gt_row gt_right" headers="VEET  episodes">37</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell-container"><div class="cell-decorator"><pre>In [59]:</pre></div><div id="cell-fig-shorttime" class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">#creating the data</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>dataVEETtime <span class="ot">&lt;-</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cut_Datetime</span>(<span class="at">unit =</span> <span class="st">"1 hour"</span>, <span class="co">#create time sections of one hour</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">"floor"</span>,</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">group_by =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Spectrum, long, <span class="st">`</span><span class="at">sl ratio</span><span class="st">`</span>, Datetime)) <span class="sc">|&gt;</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Datetime.rounded, <span class="at">.drop =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#group by the time state</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>, <span class="at">sub.zero =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_Time_col</span>(Datetime.rounded) <span class="co">#add a time column for plotting</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a><span class="co">#creating the plot</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>dataVEETtime <span class="sc">|&gt;</span> </span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y =</span> short<span class="sc">/</span><span class="fu">max</span>(short))) <span class="sc">+</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Date), <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>  ggsci<span class="sc">::</span><span class="fu">scale_fill_jco</span>() <span class="sc">+</span></span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Relative short wavelength contribution (%)"</span>, </span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Local time (HH:MM)"</span>) <span class="sc">+</span> </span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_time</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_time</span>(<span class="at">format =</span> <span class="st">"%H:%M"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-shorttime" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-shorttime-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="index_files/figure-html/fig-shorttime-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13" title="Figure&nbsp;13: Short wavelength light exposure across the day"><img src="index_files/figure-html/fig-shorttime-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-shorttime-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13: Short wavelength light exposure across the day
</figcaption>
</figure>
</div>
</div>
</div></div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell-container"><div class="cell-decorator"><pre>In [60]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [61]:</pre></div><div><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Spectrum, long, <span class="st">`</span><span class="at">sl ratio</span><span class="st">`</span>)) <span class="sc">|&gt;</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_photoperiod</span>(coordinates) <span class="sc">|&gt;</span> </span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(photoperiod.state, <span class="at">.add =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">""</span>, </span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"dawn"</span>, <span class="st">"dusk"</span>, <span class="st">"photoperiod"</span>, <span class="st">"Datetime"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(photoperiod.state) <span class="sc">|&gt;</span> </span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>episodes) <span class="sc">|&gt;</span> </span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span>photoperiod.state, <span class="at">values_from =</span> short) <span class="sc">|&gt;</span> </span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-daytime" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-daytime-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;20: Short wavelength light exposure during the day and at night
</figcaption>
<div aria-describedby="tbl-daytime-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="yonlagokig" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#yonlagokig table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#yonlagokig thead, #yonlagokig tbody, #yonlagokig tfoot, #yonlagokig tr, #yonlagokig td, #yonlagokig th {
  border-style: none;
}

#yonlagokig p {
  margin: 0;
  padding: 0;
}

#yonlagokig .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#yonlagokig .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#yonlagokig .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#yonlagokig .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#yonlagokig .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yonlagokig .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yonlagokig .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yonlagokig .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#yonlagokig .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#yonlagokig .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#yonlagokig .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#yonlagokig .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#yonlagokig .gt_spanner_row {
  border-bottom-style: hidden;
}

#yonlagokig .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#yonlagokig .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#yonlagokig .gt_from_md > :first-child {
  margin-top: 0;
}

#yonlagokig .gt_from_md > :last-child {
  margin-bottom: 0;
}

#yonlagokig .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#yonlagokig .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#yonlagokig .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#yonlagokig .gt_row_group_first td {
  border-top-width: 2px;
}

#yonlagokig .gt_row_group_first th {
  border-top-width: 2px;
}

#yonlagokig .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yonlagokig .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#yonlagokig .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#yonlagokig .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yonlagokig .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yonlagokig .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#yonlagokig .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#yonlagokig .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#yonlagokig .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yonlagokig .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yonlagokig .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#yonlagokig .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yonlagokig .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#yonlagokig .gt_left {
  text-align: left;
}

#yonlagokig .gt_center {
  text-align: center;
}

#yonlagokig .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#yonlagokig .gt_font_normal {
  font-weight: normal;
}

#yonlagokig .gt_font_bold {
  font-weight: bold;
}

#yonlagokig .gt_font_italic {
  font-style: italic;
}

#yonlagokig .gt_super {
  font-size: 65%;
}

#yonlagokig .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#yonlagokig .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#yonlagokig .gt_indent_1 {
  text-indent: 5px;
}

#yonlagokig .gt_indent_2 {
  text-indent: 10px;
}

#yonlagokig .gt_indent_3 {
  text-indent: 15px;
}

#yonlagokig .gt_indent_4 {
  text-indent: 20px;
}

#yonlagokig .gt_indent_5 {
  text-indent: 25px;
}

#yonlagokig .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#yonlagokig div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="day" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">day</th>
<th id="night" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">night</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Date">Mean daily</td>
<td class="gt_row gt_right" headers="day">80.14</td>
<td class="gt_row gt_right" headers="night">−27.73</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Date">Weekday</td>
<td class="gt_row gt_right" headers="day">140.09</td>
<td class="gt_row gt_right" headers="night">−33.96</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Date">Weekend</td>
<td class="gt_row gt_right" headers="day">−69.73</td>
<td class="gt_row gt_right" headers="night">−12.17</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="discussion-and-conclusion" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="discussion-and-conclusion"><span class="header-section-number">5</span> Discussion and conclusion</h2>
<p>This tutorial demonstrates how to calculate various metrics used in current and future research in a principled and standardized approach. While not brief overall, each metric has a dedicated pipeline that is verbose and comparatively easy to follow at each step. Those pipelines utilize <code>LightLogR</code>s framework and combine that with common data analysis workflows. The goal is to make the process transparent (function definitions open source), accessible (sound documentation, tutorials, speaking function and argument names, MIT license), robust (~900 unit tests for functions, continuous integration on GitHub, bug-tracking on Github), and community-driven (feature tracking on GitHub, open process for researchers who want to contribute code or suggest features).</p>
<p>The tutorial also demonstrates that even through these standardized pipelines, there are many decisions a researcher has to make (and document) to clean data, deal with measurement epochs, and calculate chosen metrics, especially where clusters of data are concerned, i.e., data are grouped in more than one dimension (e.g., by distance range, and minimal duration).</p>
<p>The slew of features aimed to explore the data and extracted metrics or clusters in plots and tables, and to handle measurement intervals, gaps, and irregular data, make <code>LightLogR</code> an excellent choice for the research field of visual experience, be it in circadian, myopia, or related fields of research.</p>
</section>
<section id="sessioninfo" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="sessioninfo"><span class="header-section-number">6</span> Session info</h2>
<div class="cell-container"><div class="cell-decorator"><pre>In [62]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.0 (2025-04-11)
Platform: aarch64-apple-darwin20
Running under: macOS Sequoia 15.5

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: Europe/Berlin
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] gt_1.0.0        LightLogR_0.9.2 lubridate_1.9.4 forcats_1.0.0  
 [5] stringr_1.5.1   dplyr_1.1.4     purrr_1.0.4     readr_2.1.5    
 [9] tidyr_1.3.1     tibble_3.3.0    ggplot2_3.5.2   tidyverse_2.0.0

loaded via a namespace (and not attached):
 [1] gtable_0.3.6       xfun_0.52          htmlwidgets_1.6.4  tzdb_0.5.0        
 [5] vctrs_0.6.5        tools_4.5.0        generics_0.1.4     parallel_4.5.0    
 [9] proxy_0.4-27       pkgconfig_2.0.3    KernSmooth_2.23-26 RColorBrewer_1.1-3
[13] lifecycle_1.0.4    compiler_4.5.0     farver_2.1.2       suntools_1.0.1    
[17] ggsci_3.2.0        janitor_2.2.1      snakecase_0.11.1   litedown_0.7      
[21] htmltools_0.5.8.1  class_7.3-23       sass_0.4.10        yaml_2.3.10       
[25] pillar_1.10.2      crayon_1.5.3       classInt_0.4-11    commonmark_1.9.5  
[29] tidyselect_1.2.1   digest_0.6.37      stringi_1.8.7      sf_1.0-21         
[33] labeling_0.4.3     cowplot_1.1.3      fastmap_1.2.0      grid_4.5.0        
[37] cli_3.6.5          magrittr_2.0.3     base64enc_0.1-3    utf8_1.2.6        
[41] e1071_1.7-16       withr_3.0.2        scales_1.4.0       bit64_4.6.0-1     
[45] timechange_0.3.0   rmarkdown_2.29     bit_4.6.0          ggtext_0.1.2      
[49] hms_1.1.3          evaluate_1.0.4     knitr_1.50         viridisLite_0.4.2 
[53] markdown_2.0       rlang_1.1.6        gridtext_0.1.5     Rcpp_1.0.14       
[57] glue_1.8.0         DBI_1.2.3          xml2_1.3.8         rstudioapi_0.17.1 
[61] vroom_1.6.5        jsonlite_2.0.0     R6_2.6.1           units_0.8-7       </code></pre>
</div>
</div></div>
</section>
<section id="references" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="references"><span class="header-section-number">7</span> References</h2>
<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Bhandari2020OphthalmicPhysiolOpt" class="csl-entry" role="listitem">
Bhandari, Khob R, and Lisa A Ostrin. 2020. <span>“Validation of the Clouclip and Utility in Measuring Viewing Distance in Adults.”</span> <em>Ophthalmic and Physiological Optics</em> 40 (6): 801–14. https://doi.org/<a href="https://doi.org/10.1111/opo.12735">https://doi.org/10.1111/opo.12735</a>.
</div>
<div id="ref-Biller2024CommunPsychol" class="csl-entry" role="listitem">
Biller, A. M., P. Balakrishnan, and M. Spitschan. 2024. <span>“Behavioural Determinants of Physiologically-Relevant Light Exposure.”</span> Journal Article. <em>Commun Psychol</em> 2 (1): 114. <a href="https://doi.org/10.1038/s44271-024-00159-5">https://doi.org/10.1038/s44271-024-00159-5</a>.
</div>
<div id="ref-Blume2019Somnologie" class="csl-entry" role="listitem">
Blume, C., C. Garbazza, and M. Spitschan. 2019. <span>“Effects of Light on Human Circadian Rhythms, Sleep and Mood.”</span> Journal Article. <em>Somnologie (Berl)</em> 23 (3): 147–56. <a href="https://doi.org/10.1007/s11818-019-00215-x">https://doi.org/10.1007/s11818-019-00215-x</a>.
</div>
<div id="ref-Brown2022PLoSBiol" class="csl-entry" role="listitem">
Brown, T. M., G. C. Brainard, C. Cajochen, C. A. Czeisler, J. P. Hanifin, S. W. Lockley, R. J. Lucas, et al. 2022. <span>“Recommendations for Daytime, Evening, and Nighttime Indoor Light Exposure to Best Support Physiology, Sleep, and Wakefulness in Healthy Adults.”</span> Journal Article. <em>PLoS Biol</em> 20 (3): e3001571. <a href="https://doi.org/10.1371/journal.pbio.3001571">https://doi.org/10.1371/journal.pbio.3001571</a>.
</div>
<div id="ref-DahlmannNoor2025GraefesArchClinExpOphthal" class="csl-entry" role="listitem">
Dahlmann-Noor, A. H., D. Bokre, M. Khazova, and L. L. A. Price. 2025. <span>“Measuring the Visual Environment of Children and Young People at Risk of Myopia: A Scoping Review.”</span> Journal Article. <em>Graefes Arch Clin Exp Ophthalmol</em>. <a href="https://doi.org/10.1007/s00417-024-06719-z">https://doi.org/10.1007/s00417-024-06719-z</a>.
</div>
<div id="ref-Gibaldi2024TranslVisSciTechnol" class="csl-entry" role="listitem">
Gibaldi, A., E. N. Harb, C. F. Wildsoet, and M. S. Banks. 2024. <span>“A Child-Friendly Wearable Device for Quantifying Environmental Risk Factors for Myopia.”</span> Journal Article. <em>Transl Vis Sci Technol</em> 13 (10): 28. <a href="https://doi.org/10.1167/tvst.13.10.28">https://doi.org/10.1167/tvst.13.10.28</a>.
</div>
<div id="ref-Hartmeyer2023LightResTechnol" class="csl-entry" role="listitem">
Hartmeyer, S. L., and M. Andersen. 2023. <span>“Towards a Framework for Light-Dosimetry Studies: Quantification Metrics.”</span> Journal Article. <em>Lighting Research &amp; Technology</em> 56 (4): 337–65. <a href="https://doi.org/10.1177/14771535231170500">https://doi.org/10.1177/14771535231170500</a>.
</div>
<div id="ref-Hartmeyer2022LightResTechnol" class="csl-entry" role="listitem">
Hartmeyer, S. L., F. S. Webler, and M. Andersen. 2022. <span>“Towards a Framework for Light-Dosimetry Studies: Methodological Considerations.”</span> Journal Article. <em>Lighting Research &amp; Technology</em> 55 (4-5): 377–99. <a href="https://doi.org/10.1177/14771535221103258">https://doi.org/10.1177/14771535221103258</a>.
</div>
<div id="ref-Honekopp2023ClinOphthalmol" class="csl-entry" role="listitem">
Hönekopp, A., and S. Weigelt. 2023. <span>“Using Light Meters to Investigate the Light-Myopia Association - a Literature Review of Devices and Research Methods.”</span> Journal Article. <em>Clin Ophthalmol</em> 17: 2737–60. <a href="https://doi.org/10.2147/OPTH.S420631">https://doi.org/10.2147/OPTH.S420631</a>.
</div>
<div id="ref-Mohamed2021OptExpress" class="csl-entry" role="listitem">
Mohamed, A., V. Kalavally, S. W. Cain, A. J. K. Phillips, E. M. McGlashan, and C. P. Tan. 2021. <span>“Wearable Light Spectral Sensor Optimized for Measuring Daily Alpha-Opic Light Exposure.”</span> Journal Article. <em>Opt Express</em> 29 (17): 27612–27. <a href="https://doi.org/10.1364/OE.431373">https://doi.org/10.1364/OE.431373</a>.
</div>
<div id="ref-Okudaira1983AmJPhysiol" class="csl-entry" role="listitem">
Okudaira, N., D. F. Kripke, and J. B. Webster. 1983. <span>“Naturalistic Studies of Human Light Exposure.”</span> Journal Article. <em>Am J Physiol</em> 245 (4): R613–5. <a href="https://doi.org/10.1152/ajpregu.1983.245.4.R613">https://doi.org/10.1152/ajpregu.1983.245.4.R613</a>.
</div>
<div id="ref-Sah2025OphtalmicPhysiolOpt" class="csl-entry" role="listitem">
Sah, Raman Prasad, Pavan Kalyan Narra, and Lisa A. Ostrin. 2025. <span>“A Novel Wearable Sensor for Objective Measurement of Distance and Illumination.”</span> <em>Ophthalmic and Physiological Optics</em> 00 (n/a): 1–13. https://doi.org/<a href="https://doi.org/10.1111/opo.13523">https://doi.org/10.1111/opo.13523</a>.
</div>
<div id="ref-Webler2019CurrOpinBehavSci" class="csl-entry" role="listitem">
Webler, F. S., M. Spitschan, R. G. Foster, M. Andersen, and S. N. Peirson. 2019. <span>“What Is the ’Spectral Diet’ of Humans?”</span> Journal Article. <em>Curr Opin Behav Sci</em> 30: 80–86. <a href="https://doi.org/10.1016/j.cobeha.2019.06.006">https://doi.org/10.1016/j.cobeha.2019.06.006</a>.
</div>
<div id="ref-Wen2020bjophthalmol" class="csl-entry" role="listitem">
Wen, Longbo, Yingpin Cao, Qian Cheng, Xiaoning Li, Lun Pan, Lei Li, HaoGang Zhu, Weizhong Lan, and Zhikuan Yang. 2020. <span>“Objectively Measured Near Work, Outdoor Exposure and Myopia in Children.”</span> <em>British Journal of Ophthalmology</em> 104 (11): 1542–47. <a href="https://doi.org/10.1136/bjophthalmol-2019-315258">https://doi.org/10.1136/bjophthalmol-2019-315258</a>.
</div>
<div id="ref-Wen2021ActaOphtalmol" class="csl-entry" role="listitem">
Wen, Longbo, Qian Cheng, Yingpin Cao, Xiaoning Li, Lun Pan, Lei Li, Haogang Zhu, Ian Mogran, Weizhong Lan, and Zhikuan Yang. 2021. <span>“The Clouclip, a Wearable Device for Measuring Near-Work and Outdoor Time: Validation and Comparison of Objective Measures with Questionnaire Estimates.”</span> <em>Acta Ophthalmologica</em> 99 (7): e1222–35. https://doi.org/<a href="https://doi.org/10.1111/aos.14785">https://doi.org/10.1111/aos.14785</a>.
</div>
<div id="ref-Wen2019TransVisSciTech" class="csl-entry" role="listitem">
Wen, Longbo, Qian Cheng, Weizhong Lan, Yingpin Cao, Xiaoning Li, Yiqiu Lu, Zhenghua Lin, Lun Pan, Haogang Zhu, and Zhikuan Yang. 2019. <span>“An Objective Comparison of Light Intensity and Near-Visual Tasks Between Rural and Urban School Children in China by a Wearable Device Clouclip.”</span> <em>Translational Vision Science &amp; Technology</em> 8 (6): 15–15. <a href="https://doi.org/10.1167/tvst.8.6.15">https://doi.org/10.1167/tvst.8.6.15</a>.
</div>
<div id="ref-Williams2019Scientificreports" class="csl-entry" role="listitem">
Williams, Rachel, Suyash Bakshi, Edwin J Ostrin, and Lisa A Ostrin. 2019. <span>“Continuous Objective Assessment of Near Work.”</span> <em>Scientific Reports</em> 9 (1): 6901.
</div>
<div id="ref-Zauner2025JOpenSourceSoftw" class="csl-entry" role="listitem">
Zauner, J., S. Hartmeyer, and M. Spitschan. 2025. <span>“LightLogR: Reproducible Analysis of Personal Light Exposure Data.”</span> Journal Article. <em>J Open Source Softw</em> 10 (107): 7601. <a href="https://doi.org/10.21105/joss.07601">https://doi.org/10.21105/joss.07601</a>.
</div>
<div id="ref-ZaunerEtAl2025JBR" class="csl-entry" role="listitem">
Zauner, Johannes, Carolina Guidolin, and Manuel Spitschan. <span>“How to Deal with Darkness: Modeling and Visualization of Zero-Inflated Personal Light Exposure Data on a Logarithmic Scale.”</span> <em>Journal of Biological Rhythms</em> 0 (0): 07487304251336624. <a href="https://doi.org/10.1177/07487304251336624">https://doi.org/10.1177/07487304251336624</a>.
</div>
<div id="ref-Zauner2024PLOSONE" class="csl-entry" role="listitem">
Zauner, Ljiljana AND Spitschan, Johannes AND Udovicic. 2024. <span>“Power Analysis for Personal Light Exposure Measurements and Interventions.”</span> <em>PLOS ONE</em> 19 (12): 1–15. <a href="https://doi.org/10.1371/journal.pone.0308768">https://doi.org/10.1371/journal.pone.0308768</a>.
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Functions from <code>LightLogR</code> are presented as links to the function documentation. General analysis functions (from package <code>dplyr</code>) are presented as normal text.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>This deviates from the common definition of luminous exposure, which is the sum of illuminance measurements scaled to hourly observation intervals<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>In programming, a sentinel value is a special, unique value used to signal a condition. It is distinct from regular data values and acts as a marker.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
     </main>
<!-- /main column -->  <script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/tscnlab\.github\.io\/ZaunerEtAl2025JOV\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb62" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Tutorial on analysis pipelines for visual experience datasets"</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Johannes Zauner, Aaron Nicholls, Lisa Ostrin, and Manuel Spitschan"</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="co">    html-math-method:</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="co">      method: mathjax</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="co">      url: "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML"</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a><span class="an">bibliography:</span><span class="co"> references.bib</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a><span class="an">lightbox:</span><span class="co"> true</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: true</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a><span class="fu">## Abstract</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a>This tutorial presents an analysis pipeline for visual experience datasets, with a focus on reproducible workflows tailored for use in human chronobiology and myopia research. Light exposure and its retinal encoding affect human physiology and behaviour over various time scales. Here, we provide step-by-step instructions for importing, visualising, and processing data for viewing distance and light exposure data using the open-source tool LightLogR. This includes time-series analysis for working distance, spectral characteristics, and biologically relevant light metrics. By leveraging a modular approach, this tutorial supports researchers in building flexible and robust pipelines that can accommodate diverse experimental paradigms and measurement systems.</span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a>Exposure to the optical environment — often referred to as visual experience — profoundly influences human physiology and behaviour across multiple time scales. Two notable examples, though from distinct research domains, can be understood through a common, retinally-referenced conceptual framework.</span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a>The first relates to the non-visual effects of light on human circadian and neuroendocrine physiology. The light–dark cycle entrains the circadian clock, and light exposure during the night suppresses melatonin production <span class="co">[</span><span class="ot">@Brown2022PLoSBiol; @Blume2019Somnologie</span><span class="co">]</span>.</span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a>The second concerns the influence of visual experience on ocular development, particularly myopia. Time spent outdoors — characterised by distinct optical environments — has been consistently associated with protective effects on ocular growth and health outcomes <span class="co">[</span><span class="ot">@DahlmannNoor2025GraefesArchClinExpOphthal</span><span class="co">]</span>.</span>
<span id="cb62-30"><a href="#cb62-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-31"><a href="#cb62-31" aria-hidden="true" tabindex="-1"></a>In controlled laboratory settings, light exposure can be held constant or manipulated parametrically. However, such exposures rarely replicate real-world conditions, which are inherently complex and dynamic. As people move in and between spaces (indoors and outdoors) and move their body, head, and eyes, the exposure to the optical environment varies significantly <span class="co">[</span><span class="ot">@Webler2019CurrOpinBehavSci</span><span class="co">]</span>, and is modulated by behaviour <span class="co">[</span><span class="ot">@Biller2024CommunPsychol</span><span class="co">]</span>. Wearable devices for measuring light exposure have thus emerged as vital tools in capturing the richness of ecological visual experience. These tools generate high-dimensional datasets that demand rigorous and flexible analysis strategies.</span>
<span id="cb62-32"><a href="#cb62-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-33"><a href="#cb62-33" aria-hidden="true" tabindex="-1"></a>Starting in the 1980s <span class="co">[</span><span class="ot">@Okudaira1983AmJPhysiol</span><span class="co">]</span>, technology to measure exposure to the optical environment has been developed and matured, with miniaturized illuminance sensors now (2025) being very common in consumer smartwatches. In research, several device and device types are available, which differ in their functionality, ranging from small pin-like devices measuring light exposure <span class="co">[</span><span class="ot">@Mohamed2021OptExpress</span><span class="co">]</span> to head-mounted multi-modal measurement devices capturing almost all relevant aspects of visual experience <span class="co">[</span><span class="ot">@Gibaldi2024TranslVisSciTechnol</span><span class="co">]</span>. With the increased technical capabilities in wearables come considerably complex and dense datasets. These go hand in hand with a significant number of metrics, as revealed by review papers, in both fields.</span>
<span id="cb62-34"><a href="#cb62-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-35"><a href="#cb62-35" aria-hidden="true" tabindex="-1"></a>At present, the analysis processes to derive metrics are often implemented on a by-workgroup, or even by-researcher basis, which is both a potential source of errors and inconsistencies between publications, and also a considerable time sink for researchers <span class="co">[</span><span class="ot">@Hartmeyer2022LightResTechnol</span><span class="co">]</span>. Too often, more time is spent preparing the data than in actually gaining insights through rigoruous statistical testing and exploration. The preparation tasks are best handled, or at least facilitated, by standardized, transparent, and community-based pipelines for analysis <span class="co">[</span><span class="ot">@Zauner2024PLOSONE</span><span class="co">]</span>.</span>
<span id="cb62-36"><a href="#cb62-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-37"><a href="#cb62-37" aria-hidden="true" tabindex="-1"></a>In circadian research, the package LightLogR for R statistical software was developed <span class="co">[</span><span class="ot">@Zauner2025JOpenSourceSoftw</span><span class="co">]</span>. LightLogR is an open-source, MIT licensed, and community-driven package specifically made to work with data from wearable light loggers and optical radiation dosimeters. It also contains functions to calculate over sixty different metrics used in the field <span class="co">[</span><span class="ot">@Hartmeyer2023LightResTechnol</span><span class="co">]</span>. In a recent <span class="co">[</span><span class="ot">update</span><span class="co">](https://tscnlab.github.io/LightLogR/news/index.html#lightlogr-090-sunrise)</span> the package was significantly expanded to deal with modalities beyond illuminance, like distance or even light spectra, which are highly relevant for myopia research <span class="co">[</span><span class="ot">@Honekopp2023ClinOphthalmol</span><span class="co">]</span>. </span>
<span id="cb62-38"><a href="#cb62-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-39"><a href="#cb62-39" aria-hidden="true" tabindex="-1"></a>In this article we show that the analysis pipelines and metric functions in LightLogR naturally apply to the whole field of visual experience, not just circadian research and chronobiology. Our approach is modular and extensible, allowing researchers to adapt it to a variety of devices and research questions. Emphasis is placed on clarity, transparency, and reproducibility, aligning with best practices in scientific computing and open science. We use data from two devices to demonstrate the LightLogR workflow and output with metrics relevant in the field of myopia, covering metrics for working distance, daylight exposure, and spectral analyses. It is recommended to recreate the analysis in this script. All necessary data and code are provided under an open license in the <span class="co">[</span><span class="ot">GitHub repository</span><span class="co">](https://github.com/tscnlab/ZaunerEtAl2025JOV)</span>.</span>
<span id="cb62-40"><a href="#cb62-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-41"><a href="#cb62-41" aria-hidden="true" tabindex="-1"></a><span class="fu">## Methods and materials</span></span>
<span id="cb62-42"><a href="#cb62-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-43"><a href="#cb62-43" aria-hidden="true" tabindex="-1"></a><span class="fu">### Software</span></span>
<span id="cb62-44"><a href="#cb62-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-45"><a href="#cb62-45" aria-hidden="true" tabindex="-1"></a>This tutorial is built with <span class="in">`Quarto`</span>, an open-source scientific and technical publishing system, integrating text, code, and code-output into a single document. The source-code to reproduce the outcomes is part of the document and accessible via the <span class="in">`code-tools`</span> menu.</span>
<span id="cb62-46"><a href="#cb62-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-47"><a href="#cb62-47" aria-hidden="true" tabindex="-1"></a>Package <span class="in">`LightLogR`</span> (Version 0.9.1 "Sunrise") was used with R statistical software (Version 4.4.3 "Trophy Case"). We further used the <span class="in">`tidyverse`</span> package (Version 2.0.0) for principled data analysis, which <span class="in">`LightLogR`</span> follows. Finally, the <span class="in">`gt`</span> package (Version 1.0.0) was used for table generation. A comprehensive overview of the R computing environment can be found in the <span class="co">[</span><span class="ot">session info</span><span class="co">](#sessioninfo)</span></span>
<span id="cb62-48"><a href="#cb62-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-49"><a href="#cb62-49" aria-hidden="true" tabindex="-1"></a><span class="fu">### Metric selection and definitions</span></span>
<span id="cb62-50"><a href="#cb62-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-51"><a href="#cb62-51" aria-hidden="true" tabindex="-1"></a>In March of 2025, two workshops with researchers in the field of myopia, initiated by the Research Data Alliance (RDA) Working Group on Optical Radiation Exposure and Visual Experience Data focused on the current needs and future opportunities regarding data analysis, including metrics. Out of the expert inputs in these workshops, a list of visual experience metrics was collected, which is shown in @tbl-one. These include currently used metrics and definitions <span class="co">[</span><span class="ot">@Wen2020bjophthalmol; @Wen2019TransVisSciTech; @Bhandari2020OphthalmicPhysiolOpt; @Williams2019Scientificreports</span><span class="co">]</span>, but also new metrics that are possible through spectrally-resolved measurements.</span>
<span id="cb62-52"><a href="#cb62-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-53"><a href="#cb62-53" aria-hidden="true" tabindex="-1"></a>{{&lt; include _Table1.qmd &gt;}}</span>
<span id="cb62-54"><a href="#cb62-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-55"><a href="#cb62-55" aria-hidden="true" tabindex="-1"></a>@tbl-two contains definitions for the terms in @tbl-one. Note that these definitions may vary depending on the research question or device capabilities.</span>
<span id="cb62-56"><a href="#cb62-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-57"><a href="#cb62-57" aria-hidden="true" tabindex="-1"></a>{{&lt; include _Table2.qmd &gt;}}</span>
<span id="cb62-58"><a href="#cb62-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-59"><a href="#cb62-59" aria-hidden="true" tabindex="-1"></a><span class="fu">### Devices</span></span>
<span id="cb62-60"><a href="#cb62-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-61"><a href="#cb62-61" aria-hidden="true" tabindex="-1"></a>Data from two devices will be used for analysis:</span>
<span id="cb62-62"><a href="#cb62-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-63"><a href="#cb62-63" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Distance and light metrics will be calculated based on export from the <span class="in">`Clouclip`</span> device <span class="co">[</span><span class="ot">Glasson Technology Co., Ltd, Hangzhou, China, @Wen2021ActaOphtalmol; @Wen2020bjophthalmol</span><span class="co">]</span>. This device has a simple output of only <span class="in">`Distance`</span> and <span class="in">`Illuminance`</span> measurements. Data were recorded in <span class="in">`5-second intervals`</span>. A weeks worth of data takes up about 1.6&nbsp;MB of storage.</span>
<span id="cb62-64"><a href="#cb62-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-65"><a href="#cb62-65" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Spectrum metrics will be calculated using data from a multi-modal device, the <span class="in">`Visual Environment Evaluation Tool`</span> or <span class="in">`VEET`</span> <span class="co">[</span><span class="ot">Meta Platforms, Inc., Menlo Park, California, USA, @Sah2025OphtalmicPhysiolOpt</span><span class="co">]</span>. This dense dataset contains distance (spatially resolved), light, activity (accellerometer &amp; gyroscope), and spectrum measurements, recorded in <span class="in">`2-second intervals`</span>. A weeks worth of data takes up about 270&nbsp;MB of storage.</span>
<span id="cb62-66"><a href="#cb62-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-67"><a href="#cb62-67" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data import &amp; preparation</span></span>
<span id="cb62-68"><a href="#cb62-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-69"><a href="#cb62-69" aria-hidden="true" tabindex="-1"></a>This tutorial will start by importing a <span class="in">`Clouclip`</span> dataset and providing an overview of the data. The <span class="in">`Clouclip`</span> export is considerably simpler compared to the <span class="in">`VEET`</span> export, only containing <span class="in">`Distance`</span> and <span class="in">`Illuminance`</span> measurements. The <span class="in">`VEET`</span> dataset will be imported later for the spectrum related metrics.</span>
<span id="cb62-70"><a href="#cb62-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-73"><a href="#cb62-73" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-74"><a href="#cb62-74" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb62-75"><a href="#cb62-75" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb62-76"><a href="#cb62-76" aria-hidden="true" tabindex="-1"></a><span class="co"># load libraries</span></span>
<span id="cb62-77"><a href="#cb62-77" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb62-78"><a href="#cb62-78" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(LightLogR)</span>
<span id="cb62-79"><a href="#cb62-79" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb62-80"><a href="#cb62-80" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-81"><a href="#cb62-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-82"><a href="#cb62-82" aria-hidden="true" tabindex="-1"></a><span class="in">`LightLogR`</span> provides accessible import functionality for many wearable devices (18 at the time of writing). Required information are the file(s) and the time zone the device was set up with/recorded in (default is <span class="in">`UTC`</span>). Many optional arguments let a user, e.g., extract <span class="in">`ID`</span>s from the file name or correct for daylight savings jumps. The import also provides a comprehensive overview of the data, letting the user know of any gaps and irregularities in the data.</span>
<span id="cb62-83"><a href="#cb62-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-86"><a href="#cb62-86" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-87"><a href="#cb62-87" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-importCC</span></span>
<span id="cb62-88"><a href="#cb62-88" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Overview plot of imported Clouclip data"</span></span>
<span id="cb62-89"><a href="#cb62-89" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 2</span></span>
<span id="cb62-90"><a href="#cb62-90" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb62-91"><a href="#cb62-91" aria-hidden="true" tabindex="-1"></a><span class="co"># import the data</span></span>
<span id="cb62-92"><a href="#cb62-92" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"data/Sample_Clouclip.csv"</span></span>
<span id="cb62-93"><a href="#cb62-93" aria-hidden="true" tabindex="-1"></a>tz <span class="ot">&lt;-</span> <span class="st">"US/Central"</span></span>
<span id="cb62-94"><a href="#cb62-94" aria-hidden="true" tabindex="-1"></a>dataCC <span class="ot">&lt;-</span> import<span class="sc">$</span><span class="fu">Clouclip</span>(path, <span class="at">tz =</span> tz, <span class="at">manual.id =</span> <span class="st">"Clouclip"</span>)</span>
<span id="cb62-95"><a href="#cb62-95" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-96"><a href="#cb62-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-97"><a href="#cb62-97" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exploration</span></span>
<span id="cb62-98"><a href="#cb62-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-99"><a href="#cb62-99" aria-hidden="true" tabindex="-1"></a>Any dataset may conain gaps. The example <span class="in">`Clouclip`</span> dataset here has many gaps in the data (see @fig-importCC). Understanding how these relate to the measurements and the time of recording is essential. <span class="in">`LightLogR`</span> provides tools to visualize and summarize these gaps.</span>
<span id="cb62-100"><a href="#cb62-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-101"><a href="#cb62-101" aria-hidden="true" tabindex="-1"></a>In the presence of irregular data, i.e. data that does not fall in a regular sequence of datetimes, gap summaries can be computationally very expensive and inaccurate. For that reason, if it is not already visible from the import summary, it makes sense to check for irregular data.</span>
<span id="cb62-102"><a href="#cb62-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-105"><a href="#cb62-105" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-106"><a href="#cb62-106" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: irregular</span></span>
<span id="cb62-107"><a href="#cb62-107" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> <span class="fu">has_irregulars</span>() <span class="co">#test for irregulars</span></span>
<span id="cb62-108"><a href="#cb62-108" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-109"><a href="#cb62-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-110"><a href="#cb62-110" aria-hidden="true" tabindex="-1"></a>In the case of irregular data, it is recommended to visualize irregulars without recalculating implicit gaps, which are missing observations at regular intervals. See @fig-irregular.</span>
<span id="cb62-111"><a href="#cb62-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-114"><a href="#cb62-114" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-115"><a href="#cb62-115" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-irregular</span></span>
<span id="cb62-116"><a href="#cb62-116" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 12</span></span>
<span id="cb62-117"><a href="#cb62-117" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-118"><a href="#cb62-118" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Visualization of gaps and irregular data. Black traces show available data. Red shaded areas show times of missing data. Red dots show instances where observations occur off the regular interval from start to finish, i.e., irregular data."</span></span>
<span id="cb62-119"><a href="#cb62-119" aria-hidden="true" tabindex="-1"></a>y.label <span class="ot">&lt;-</span> <span class="st">"Distance (cm)"</span></span>
<span id="cb62-120"><a href="#cb62-120" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> <span class="fu">gg_gaps</span>(Dis, </span>
<span id="cb62-121"><a href="#cb62-121" aria-hidden="true" tabindex="-1"></a>                  <span class="at">include.implicit.gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb62-122"><a href="#cb62-122" aria-hidden="true" tabindex="-1"></a>                  <span class="at">show.irregulars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-123"><a href="#cb62-123" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y.axis.label =</span> y.label,</span>
<span id="cb62-124"><a href="#cb62-124" aria-hidden="true" tabindex="-1"></a>                  <span class="at">group.by.days =</span> <span class="cn">TRUE</span></span>
<span id="cb62-125"><a href="#cb62-125" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="cn">NULL</span>)</span>
<span id="cb62-126"><a href="#cb62-126" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-127"><a href="#cb62-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-128"><a href="#cb62-128" aria-hidden="true" tabindex="-1"></a>In @fig-irregular, it looks like data in every day but the first and last are considered irregular. This happens with some devices and requires manual handling. Strategies include:</span>
<span id="cb62-129"><a href="#cb62-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-130"><a href="#cb62-130" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Removing some intervals from the start if the irregularities are due to the setup process. See <span class="co">[</span><span class="ot">filter_Date() / filter_Datetime()</span><span class="co">](https://tscnlab.github.io/LightLogR/reference/filter_Datetime.html)</span> for a way to remove these. This is usually a good solution if only the first day has regular data and the rest is all irregular.</span>
<span id="cb62-131"><a href="#cb62-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-132"><a href="#cb62-132" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Rounding datetime values to the closest (5 second) interval. See <span class="co">[</span><span class="ot">cut_Datetime()</span><span class="co">](https://tscnlab.github.io/LightLogR/reference/cut_Datetime.html)</span> for a helper function. This is appropriate if deviations from the dominant interval (5 seconds in this case) are infrequent and if rounded datetimes don't lead to duplicated datetetimes.</span>
<span id="cb62-133"><a href="#cb62-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-134"><a href="#cb62-134" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Aggregating data into a coarser recording interval. See <span class="co">[</span><span class="ot">aggregate_Datetime()</span><span class="co">](https://tscnlab.github.io/LightLogR/reference/aggregate_Datetime.html)</span> for this option. This is appropriate in most cases, but leads to a loss in granularity.</span>
<span id="cb62-135"><a href="#cb62-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-136"><a href="#cb62-136" aria-hidden="true" tabindex="-1"></a>Based on the import summary, and the graph, we use the second option to deal with the irregular data.</span>
<span id="cb62-137"><a href="#cb62-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-140"><a href="#cb62-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-141"><a href="#cb62-141" aria-hidden="true" tabindex="-1"></a><span class="co"># round observation times to the next 5-second interval</span></span>
<span id="cb62-142"><a href="#cb62-142" aria-hidden="true" tabindex="-1"></a>dataCC <span class="ot">&lt;-</span></span>
<span id="cb62-143"><a href="#cb62-143" aria-hidden="true" tabindex="-1"></a>  dataCC <span class="sc">|&gt;</span></span>
<span id="cb62-144"><a href="#cb62-144" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cut_Datetime</span>(<span class="st">"5 secs"</span>, <span class="at">New.colname =</span> Datetime) <span class="sc">|&gt;</span> </span>
<span id="cb62-145"><a href="#cb62-145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_Date_col</span>(<span class="at">group.by =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-146"><a href="#cb62-146" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-147"><a href="#cb62-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-150"><a href="#cb62-150" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-151"><a href="#cb62-151" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-gaps</span></span>
<span id="cb62-152"><a href="#cb62-152" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Summary of missing and observed data for the Clouclip device"</span></span>
<span id="cb62-153"><a href="#cb62-153" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize the data</span></span>
<span id="cb62-154"><a href="#cb62-154" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> <span class="fu">gap_table</span>(Dis, <span class="at">Variable.label =</span> <span class="st">"Distance (cm)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-155"><a href="#cb62-155" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_hide</span>(<span class="fu">contains</span>(<span class="st">"_n"</span>)) <span class="co">#remove the absolute number of data points</span></span>
<span id="cb62-156"><a href="#cb62-156" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-157"><a href="#cb62-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-158"><a href="#cb62-158" aria-hidden="true" tabindex="-1"></a>@tbl-gaps shows that there are no more irregular data after treatment. There are, however, considerable implicitly missing data, which can be converted to explicitly missing data with <span class="co">[</span><span class="ot">gap_handler()</span><span class="co">](https://tscnlab.github.io/LightLogR/reference/gap_handler.html)</span>, which will make calculations based on the dataset much more robust. Furthermore, there are two days that have less than an hours worth of data. These will be removed.</span>
<span id="cb62-159"><a href="#cb62-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-162"><a href="#cb62-162" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-163"><a href="#cb62-163" aria-hidden="true" tabindex="-1"></a><span class="co">#make implicit gaps explicit</span></span>
<span id="cb62-164"><a href="#cb62-164" aria-hidden="true" tabindex="-1"></a>dataCC <span class="ot">&lt;-</span> </span>
<span id="cb62-165"><a href="#cb62-165" aria-hidden="true" tabindex="-1"></a>  dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-166"><a href="#cb62-166" aria-hidden="true" tabindex="-1"></a>  <span class="co">#add the operational tag to have all rows with a status:</span></span>
<span id="cb62-167"><a href="#cb62-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(Lux_status, Dis_status), \(x) <span class="fu">replace_na</span>(x, <span class="st">"operational"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb62-168"><a href="#cb62-168" aria-hidden="true" tabindex="-1"></a>  <span class="co">#make gaps explicit:</span></span>
<span id="cb62-169"><a href="#cb62-169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gap_handler</span>(<span class="at">full.days =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb62-170"><a href="#cb62-170" aria-hidden="true" tabindex="-1"></a>  <span class="co">#remove days that have less than one hour of data</span></span>
<span id="cb62-171"><a href="#cb62-171" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_partial_data</span>(Dis, <span class="at">threshold.missing =</span> <span class="st">"23 hours"</span>)</span>
<span id="cb62-172"><a href="#cb62-172" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-173"><a href="#cb62-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-174"><a href="#cb62-174" aria-hidden="true" tabindex="-1"></a>The <span class="in">`Clouclip`</span> device uses sentinel values<span class="ot">[^sentinel]</span> to encode states in the measurement values. <span class="in">`LightLogR`</span> converts these to a dedicated column upon import, and we can visualize them, alongside showing the photoperiod.</span>
<span id="cb62-175"><a href="#cb62-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-176"><a href="#cb62-176" aria-hidden="true" tabindex="-1"></a><span class="ot">[^sentinel]: </span>In programming, a sentinel value is a special, unique value used to signal a condition. It is distinct from regular data values and acts as a marker.</span>
<span id="cb62-177"><a href="#cb62-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-180"><a href="#cb62-180" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-181"><a href="#cb62-181" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb62-182"><a href="#cb62-182" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-183"><a href="#cb62-183" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-state</span></span>
<span id="cb62-184"><a href="#cb62-184" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Distance measurements across days. Blue, grey and yellow-colored areas show sentinel states of the device. Blue indicates an operational status, grey sleep mode (not recording), and yellow an out of range measurement. Red boxed areas show nighttime from civil dusk until dawn, which are calculated based on the recording date and geographic coordinates"</span></span>
<span id="cb62-185"><a href="#cb62-185" aria-hidden="true" tabindex="-1"></a><span class="co">#setting coordinates for Houston, Texas</span></span>
<span id="cb62-186"><a href="#cb62-186" aria-hidden="true" tabindex="-1"></a>coordinates <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">29.75</span>, <span class="sc">-</span><span class="fl">95.36</span>)</span>
<span id="cb62-187"><a href="#cb62-187" aria-hidden="true" tabindex="-1"></a><span class="co"># visualize observations</span></span>
<span id="cb62-188"><a href="#cb62-188" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-189"><a href="#cb62-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(<span class="fu">c</span>(Lux_status, Dis_status), <span class="at">.direction =</span> <span class="st">"downup"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-190"><a href="#cb62-190" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_day</span>(<span class="at">y.axis =</span> Dis, <span class="at">geom =</span> <span class="st">"line"</span>, <span class="at">y.axis.label =</span> y.label) <span class="sc">|&gt;</span> <span class="co">#create a basic plot</span></span>
<span id="cb62-191"><a href="#cb62-191" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_state</span>(Dis_status, <span class="at">aes_fill =</span> Dis_status) <span class="sc">|&gt;</span> <span class="co">#add the status times</span></span>
<span id="cb62-192"><a href="#cb62-192" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_photoperiod</span>(coordinates, <span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span> <span class="co">#add the photoperiod (day/night)</span></span>
<span id="cb62-193"><a href="#cb62-193" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb62-194"><a href="#cb62-194" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-195"><a href="#cb62-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-196"><a href="#cb62-196" aria-hidden="true" tabindex="-1"></a>With these data, the metrics can be calculated.</span>
<span id="cb62-197"><a href="#cb62-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-198"><a href="#cb62-198" aria-hidden="true" tabindex="-1"></a><span class="fu">## Results</span></span>
<span id="cb62-199"><a href="#cb62-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-200"><a href="#cb62-200" aria-hidden="true" tabindex="-1"></a><span class="fu">### Distance</span></span>
<span id="cb62-201"><a href="#cb62-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-202"><a href="#cb62-202" aria-hidden="true" tabindex="-1"></a>In the following sections, daily values are calculated. The following helper function takes these daily values and calculates averages for <span class="in">`weekend`</span>, <span class="in">`weekday`</span>, and <span class="in">`mean daily`</span>:</span>
<span id="cb62-203"><a href="#cb62-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-206"><a href="#cb62-206" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-207"><a href="#cb62-207" aria-hidden="true" tabindex="-1"></a>to_mean_daily <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">prefix =</span> <span class="st">"average_"</span>) {</span>
<span id="cb62-208"><a href="#cb62-208" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">|&gt;</span> </span>
<span id="cb62-209"><a href="#cb62-209" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>(Date) <span class="sc">|&gt;</span> <span class="co">#ungroup by days</span></span>
<span id="cb62-210"><a href="#cb62-210" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean_daily</span>(<span class="at">prefix =</span> prefix) <span class="sc">|&gt;</span> <span class="co">#calculate the averages</span></span>
<span id="cb62-211"><a href="#cb62-211" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_with</span>(<span class="at">.fn =</span> \(x) <span class="fu">str_replace_all</span>(x,<span class="st">"_"</span>,<span class="st">" "</span>)) <span class="sc">|&gt;</span> <span class="co">#remove underscores</span></span>
<span id="cb62-212"><a href="#cb62-212" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gt</span>() <span class="co">#table output</span></span>
<span id="cb62-213"><a href="#cb62-213" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb62-214"><a href="#cb62-214" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-215"><a href="#cb62-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-216"><a href="#cb62-216" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Total wear time daily</span></span>
<span id="cb62-217"><a href="#cb62-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-218"><a href="#cb62-218" aria-hidden="true" tabindex="-1"></a>For <span class="in">`Total wear time daily`</span>, only instances where there is actual distance data available will be taken into account in @tbl-wear.</span>
<span id="cb62-219"><a href="#cb62-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-222"><a href="#cb62-222" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-223"><a href="#cb62-223" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-wear</span></span>
<span id="cb62-224"><a href="#cb62-224" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Total wear time daily"</span></span>
<span id="cb62-225"><a href="#cb62-225" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-226"><a href="#cb62-226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">durations</span>(Dis) <span class="sc">|&gt;</span> <span class="co">#calculate the durations per group (day)</span></span>
<span id="cb62-227"><a href="#cb62-227" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>(<span class="st">"Total wear "</span>)</span>
<span id="cb62-228"><a href="#cb62-228" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-229"><a href="#cb62-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-230"><a href="#cb62-230" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Duration within distance ranges {#distance-range}</span></span>
<span id="cb62-231"><a href="#cb62-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-232"><a href="#cb62-232" aria-hidden="true" tabindex="-1"></a>This metric can be calculated in two ways. @tbl-nearwork shows the <span class="in">`duration of near work`</span>, whereas @tbl-ranges shows the <span class="in">`duration of distance ranges`</span>.</span>
<span id="cb62-233"><a href="#cb62-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-234"><a href="#cb62-234" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset}</span>
<span id="cb62-235"><a href="#cb62-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-236"><a href="#cb62-236" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Duration of near work</span></span>
<span id="cb62-237"><a href="#cb62-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-240"><a href="#cb62-240" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-241"><a href="#cb62-241" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-nearwork</span></span>
<span id="cb62-242"><a href="#cb62-242" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Duration of near work"</span></span>
<span id="cb62-243"><a href="#cb62-243" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-244"><a href="#cb62-244" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Dis <span class="sc">&gt;=</span> <span class="dv">10</span>, Dis <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-245"><a href="#cb62-245" aria-hidden="true" tabindex="-1"></a>  <span class="fu">durations</span>(Dis) <span class="sc">|&gt;</span> </span>
<span id="cb62-246"><a href="#cb62-246" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>(<span class="st">"Near work "</span>)</span>
<span id="cb62-247"><a href="#cb62-247" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-248"><a href="#cb62-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-249"><a href="#cb62-249" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Duration within distance ranges</span></span>
<span id="cb62-250"><a href="#cb62-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-253"><a href="#cb62-253" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-254"><a href="#cb62-254" aria-hidden="true" tabindex="-1"></a><span class="co">#defining distance ranges</span></span>
<span id="cb62-255"><a href="#cb62-255" aria-hidden="true" tabindex="-1"></a>dist_breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>, <span class="dv">90</span>, <span class="dv">100</span>, <span class="cn">Inf</span>)</span>
<span id="cb62-256"><a href="#cb62-256" aria-hidden="true" tabindex="-1"></a>dist_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb62-257"><a href="#cb62-257" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Extremely near"</span>,          <span class="co"># [10, 20)</span></span>
<span id="cb62-258"><a href="#cb62-258" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Very near"</span>,               <span class="co"># [20, 30)</span></span>
<span id="cb62-259"><a href="#cb62-259" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Fairly near"</span>,             <span class="co"># [30, 40)</span></span>
<span id="cb62-260"><a href="#cb62-260" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Near"</span>,                    <span class="co"># [40, 50)</span></span>
<span id="cb62-261"><a href="#cb62-261" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Moderately near"</span>,         <span class="co"># [50, 60)</span></span>
<span id="cb62-262"><a href="#cb62-262" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Near Intermediate"</span>,       <span class="co"># [60, 70)</span></span>
<span id="cb62-263"><a href="#cb62-263" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Intermediate"</span>,            <span class="co"># [70, 80)</span></span>
<span id="cb62-264"><a href="#cb62-264" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Moderately intermediate"</span>, <span class="co"># [80, 90)</span></span>
<span id="cb62-265"><a href="#cb62-265" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Far intermediate"</span>,        <span class="co"># [90, 100)</span></span>
<span id="cb62-266"><a href="#cb62-266" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Far"</span>                      <span class="co"># [100, Inf)</span></span>
<span id="cb62-267"><a href="#cb62-267" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-268"><a href="#cb62-268" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-269"><a href="#cb62-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-270"><a href="#cb62-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-273"><a href="#cb62-273" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-274"><a href="#cb62-274" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-ranges</span></span>
<span id="cb62-275"><a href="#cb62-275" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Duration in distance ranges"</span></span>
<span id="cb62-276"><a href="#cb62-276" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-277"><a href="#cb62-277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Dis_range =</span> </span>
<span id="cb62-278"><a href="#cb62-278" aria-hidden="true" tabindex="-1"></a>           <span class="fu">cut</span>(Dis, <span class="at">breaks =</span> dist_breaks, <span class="at">labels =</span> dist_labels) <span class="co">#create ranges</span></span>
<span id="cb62-279"><a href="#cb62-279" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb62-280"><a href="#cb62-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(Dis_range) <span class="sc">|&gt;</span> <span class="co">#remove NAs</span></span>
<span id="cb62-281"><a href="#cb62-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Dis_range, <span class="at">.add =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="co">#group by ranges</span></span>
<span id="cb62-282"><a href="#cb62-282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">durations</span>(Dis) <span class="sc">|&gt;</span> <span class="co">#calculate durations</span></span>
<span id="cb62-283"><a href="#cb62-283" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Dis_range, <span class="at">values_from =</span> duration) <span class="sc">|&gt;</span> <span class="co">#widen data</span></span>
<span id="cb62-284"><a href="#cb62-284" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>(<span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-285"><a href="#cb62-285" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_duration</span>(<span class="at">input_units =</span> <span class="st">"seconds"</span>, <span class="at">output_units =</span> <span class="st">"minutes"</span>) <span class="co">#show minutes</span></span>
<span id="cb62-286"><a href="#cb62-286" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-287"><a href="#cb62-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-288"><a href="#cb62-288" aria-hidden="true" tabindex="-1"></a>@fig-ranges shows the distribution of relative times within each distance range.</span>
<span id="cb62-289"><a href="#cb62-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-292"><a href="#cb62-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-293"><a href="#cb62-293" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ranges</span></span>
<span id="cb62-294"><a href="#cb62-294" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percentage of total time in distance ranges"</span></span>
<span id="cb62-295"><a href="#cb62-295" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb62-296"><a href="#cb62-296" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-297"><a href="#cb62-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Dis_range =</span> </span>
<span id="cb62-298"><a href="#cb62-298" aria-hidden="true" tabindex="-1"></a>           <span class="fu">cut</span>(Dis, <span class="at">breaks =</span> dist_breaks, <span class="at">labels =</span> dist_labels) <span class="co">#create ranges</span></span>
<span id="cb62-299"><a href="#cb62-299" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb62-300"><a href="#cb62-300" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(Dis_range) <span class="sc">|&gt;</span> <span class="co">#remove NAs</span></span>
<span id="cb62-301"><a href="#cb62-301" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Dis_range, <span class="at">.add =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="co">#group by ranges</span></span>
<span id="cb62-302"><a href="#cb62-302" aria-hidden="true" tabindex="-1"></a>  <span class="fu">durations</span>(Dis) <span class="sc">|&gt;</span> </span>
<span id="cb62-303"><a href="#cb62-303" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Dis_range) <span class="sc">|&gt;</span> </span>
<span id="cb62-304"><a href="#cb62-304" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-305"><a href="#cb62-305" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb62-306"><a href="#cb62-306" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Dis_range =</span> </span>
<span id="cb62-307"><a href="#cb62-307" aria-hidden="true" tabindex="-1"></a>           forcats<span class="sc">::</span><span class="fu">fct_relabel</span>(Dis_range, \(x) <span class="fu">str_replace</span>(x, <span class="st">" "</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb62-308"><a href="#cb62-308" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">duration =</span> duration<span class="sc">/</span><span class="fu">sum</span>(duration), <span class="at">.by =</span> Date) <span class="sc">|&gt;</span> </span>
<span id="cb62-309"><a href="#cb62-309" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Dis_range, <span class="at">y =</span> duration, <span class="at">fill =</span> Date)) <span class="sc">+</span></span>
<span id="cb62-310"><a href="#cb62-310" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb62-311"><a href="#cb62-311" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb62-312"><a href="#cb62-312" aria-hidden="true" tabindex="-1"></a>  ggsci<span class="sc">::</span><span class="fu">scale_fill_jco</span>() <span class="sc">+</span></span>
<span id="cb62-313"><a href="#cb62-313" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb62-314"><a href="#cb62-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Relative duration (%)"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">fill =</span> <span class="st">"Type"</span>) <span class="sc">+</span></span>
<span id="cb62-315"><a href="#cb62-315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span>
<span id="cb62-316"><a href="#cb62-316" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-317"><a href="#cb62-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-318"><a href="#cb62-318" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb62-319"><a href="#cb62-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-320"><a href="#cb62-320" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Frequency of Continuous near work</span></span>
<span id="cb62-321"><a href="#cb62-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-322"><a href="#cb62-322" aria-hidden="true" tabindex="-1"></a>Continuous near work has more than one condition. Beyond a distance range, it requires a certain length, but also allows for interruptions. This is what <span class="co">[</span><span class="ot">extract_clusters()</span><span class="co">](https://tscnlab.github.io/LightLogR/reference/extract_clusters.html)</span> allows.</span>
<span id="cb62-323"><a href="#cb62-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-324"><a href="#cb62-324" aria-hidden="true" tabindex="-1"></a>@tbl-continuousnear summarizes the results, and @fig-cluster visualizes them.</span>
<span id="cb62-325"><a href="#cb62-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-328"><a href="#cb62-328" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-329"><a href="#cb62-329" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-continuousnear</span></span>
<span id="cb62-330"><a href="#cb62-330" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Frequency of continuous near work"</span></span>
<span id="cb62-331"><a href="#cb62-331" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-332"><a href="#cb62-332" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_clusters</span>(Dis <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">&amp;</span> Dis <span class="sc">&lt;</span> <span class="dv">60</span>, <span class="co">#define the condition</span></span>
<span id="cb62-333"><a href="#cb62-333" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"30 mins"</span>, <span class="co">#define the minimum duration</span></span>
<span id="cb62-334"><a href="#cb62-334" aria-hidden="true" tabindex="-1"></a>                   <span class="at">interruption.duration =</span> <span class="st">"1 min"</span>, <span class="co">#define max interruption</span></span>
<span id="cb62-335"><a href="#cb62-335" aria-hidden="true" tabindex="-1"></a>                   <span class="at">drop.empty.groups =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#make certain days without clusters remain</span></span>
<span id="cb62-336"><a href="#cb62-336" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"epoch"</span>, <span class="st">"duration"</span>),</span>
<span id="cb62-337"><a href="#cb62-337" aria-hidden="true" tabindex="-1"></a>                    <span class="at">add.total.duration =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#count the number of episodes</span></span>
<span id="cb62-338"><a href="#cb62-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">"Frequency of "</span>) <span class="sc">|&gt;</span><span class="co"># daily means</span></span>
<span id="cb62-339"><a href="#cb62-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>() <span class="co">#table</span></span>
<span id="cb62-340"><a href="#cb62-340" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-341"><a href="#cb62-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-344"><a href="#cb62-344" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-345"><a href="#cb62-345" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-visbreak</span></span>
<span id="cb62-346"><a href="#cb62-346" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Continuous near work episodes (red shaded areas). Black traces show measurement data, and two red dashed lines indicate the range of near work between 20 and 60 cm distance"</span></span>
<span id="cb62-347"><a href="#cb62-347" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-348"><a href="#cb62-348" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb62-349"><a href="#cb62-349" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-350"><a href="#cb62-350" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_clusters</span>(Dis <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">&amp;</span> Dis <span class="sc">&lt;</span> <span class="dv">60</span>, <span class="co">#define the condition</span></span>
<span id="cb62-351"><a href="#cb62-351" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"30 mins"</span>, <span class="co">#define the minimum duration</span></span>
<span id="cb62-352"><a href="#cb62-352" aria-hidden="true" tabindex="-1"></a>                   <span class="at">interruption.duration =</span> <span class="st">"1 min"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-353"><a href="#cb62-353" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_day</span>(<span class="at">y.axis =</span> Dis, <span class="at">y.axis.label =</span> y.label, <span class="at">geom =</span> <span class="st">"line"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-354"><a href="#cb62-354" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_state</span>(state, <span class="at">fill =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb62-355"><a href="#cb62-355" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">60</span>), <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>)</span>
<span id="cb62-356"><a href="#cb62-356" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-357"><a href="#cb62-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-358"><a href="#cb62-358" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Near Work episodes</span></span>
<span id="cb62-359"><a href="#cb62-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-360"><a href="#cb62-360" aria-hidden="true" tabindex="-1"></a>This section of the metrics consists of three aspects: <span class="in">`Frequency`</span>, <span class="in">`Duration`</span>, and <span class="in">`Distances`</span>. The first two aspects are collected the same way as in the previous section, whereas the <span class="in">`Distance`</span> aspect is extracted from the base data. All are summarized in @tbl-nearworkepisodes</span>
<span id="cb62-361"><a href="#cb62-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-364"><a href="#cb62-364" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-365"><a href="#cb62-365" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-nearworkepisodes</span></span>
<span id="cb62-366"><a href="#cb62-366" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Frequency, duration, and distance of near work episodes"</span></span>
<span id="cb62-367"><a href="#cb62-367" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-368"><a href="#cb62-368" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_clusters</span>(Dis <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">&amp;</span> Dis <span class="sc">&lt;</span> <span class="dv">60</span>, <span class="co">#define the condition</span></span>
<span id="cb62-369"><a href="#cb62-369" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"5 secs"</span>, <span class="co">#define the minimum duration</span></span>
<span id="cb62-370"><a href="#cb62-370" aria-hidden="true" tabindex="-1"></a>                   <span class="at">interruption.duration =</span> <span class="st">"20 secs"</span>, <span class="co">#define max interruption</span></span>
<span id="cb62-371"><a href="#cb62-371" aria-hidden="true" tabindex="-1"></a>                   <span class="at">drop.empty.groups =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#make certain days without clusters remain</span></span>
<span id="cb62-372"><a href="#cb62-372" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_metric</span>(dataCC, <span class="at">distance =</span> <span class="fu">mean</span>(Dis, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb62-373"><a href="#cb62-373" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"epoch"</span>), <span class="at">prefix =</span> <span class="st">""</span>,</span>
<span id="cb62-374"><a href="#cb62-374" aria-hidden="true" tabindex="-1"></a>                    <span class="at">add.total.duration =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span>  <span class="co">#count the number of episodes</span></span>
<span id="cb62-375"><a href="#cb62-375" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> <span class="co">#daily means</span></span>
<span id="cb62-376"><a href="#cb62-376" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(<span class="fu">c</span>(distance, episodes), <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="co">#table</span></span>
<span id="cb62-377"><a href="#cb62-377" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_units</span>(<span class="at">distance =</span> <span class="st">"cm"</span>)</span>
<span id="cb62-378"><a href="#cb62-378" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-379"><a href="#cb62-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-380"><a href="#cb62-380" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Visual breaks</span></span>
<span id="cb62-381"><a href="#cb62-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-382"><a href="#cb62-382" aria-hidden="true" tabindex="-1"></a><span class="in">`Visual breaks`</span> are a little different, compared to the previous metrics. The difference is that in this case, the minimum break and the previous episode is important. This leads to a two step process, where we first extract instances of <span class="in">`Distance`</span> above 100 cm for at least 20 seconds, before we filter for a previous duration of at maximum 20 minutes. @tbl-visualbreaks provides the daily frequency of visual breaks.</span>
<span id="cb62-383"><a href="#cb62-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-386"><a href="#cb62-386" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-387"><a href="#cb62-387" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-visualbreaks</span></span>
<span id="cb62-388"><a href="#cb62-388" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Frequency of visual breaks"</span></span>
<span id="cb62-389"><a href="#cb62-389" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-390"><a href="#cb62-390" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_clusters</span>(Dis <span class="sc">&gt;=</span> <span class="dv">100</span>, <span class="co">#define the condition, greater 100 cm away</span></span>
<span id="cb62-391"><a href="#cb62-391" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"20 secs"</span>, <span class="co">#define the minimum duration</span></span>
<span id="cb62-392"><a href="#cb62-392" aria-hidden="true" tabindex="-1"></a>                   <span class="at">return.only.clusters =</span> <span class="cn">FALSE</span>, <span class="co">#return non-clusters as well</span></span>
<span id="cb62-393"><a href="#cb62-393" aria-hidden="true" tabindex="-1"></a>                   <span class="at">drop.empty.groups =</span> <span class="cn">FALSE</span> <span class="co">#keep all days, even without clusters</span></span>
<span id="cb62-394"><a href="#cb62-394" aria-hidden="true" tabindex="-1"></a>                   ) <span class="sc">|&gt;</span> </span>
<span id="cb62-395"><a href="#cb62-395" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return only clusters with previous episode lengths of maximum 20 minutes:</span></span>
<span id="cb62-396"><a href="#cb62-396" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((start <span class="sc">-</span> <span class="fu">lag</span>(end) <span class="sc">&lt;=</span> <span class="fu">duration</span>(<span class="st">"20 mins"</span>)), is.cluster) <span class="sc">|&gt;</span> </span>
<span id="cb62-397"><a href="#cb62-397" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"epoch"</span>, <span class="st">"is.cluster"</span>, <span class="st">"duration"</span>), </span>
<span id="cb62-398"><a href="#cb62-398" aria-hidden="true" tabindex="-1"></a>                    <span class="at">prefix =</span> <span class="st">""</span>,</span>
<span id="cb62-399"><a href="#cb62-399" aria-hidden="true" tabindex="-1"></a>                    <span class="at">add.total.duration =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span>  <span class="co">#count the number of episodes</span></span>
<span id="cb62-400"><a href="#cb62-400" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">"Daily "</span>) <span class="sc">|&gt;</span> <span class="co">#daily means</span></span>
<span id="cb62-401"><a href="#cb62-401" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(<span class="at">decimals =</span> <span class="dv">1</span>) <span class="co">#table</span></span>
<span id="cb62-402"><a href="#cb62-402" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-403"><a href="#cb62-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-406"><a href="#cb62-406" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-407"><a href="#cb62-407" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-cluster</span></span>
<span id="cb62-408"><a href="#cb62-408" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Plot of visual breaks (red dots). Black traces show distance measurement data. Grey shaded areas show nighttime between civil dusk and civil dawn"</span></span>
<span id="cb62-409"><a href="#cb62-409" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-410"><a href="#cb62-410" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb62-411"><a href="#cb62-411" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-412"><a href="#cb62-412" aria-hidden="true" tabindex="-1"></a>    <span class="fu">extract_clusters</span>(Dis <span class="sc">&gt;=</span> <span class="dv">100</span>, <span class="co">#define the condition, greater 100 cm away</span></span>
<span id="cb62-413"><a href="#cb62-413" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"20 secs"</span>, <span class="co">#define the minimum duration</span></span>
<span id="cb62-414"><a href="#cb62-414" aria-hidden="true" tabindex="-1"></a>                   <span class="at">return.only.clusters =</span> <span class="cn">FALSE</span>, <span class="co">#return non-clusters as well</span></span>
<span id="cb62-415"><a href="#cb62-415" aria-hidden="true" tabindex="-1"></a>                   <span class="at">drop.empty.groups =</span> <span class="cn">FALSE</span> <span class="co">#keep all days, even without clusters</span></span>
<span id="cb62-416"><a href="#cb62-416" aria-hidden="true" tabindex="-1"></a>                   ) <span class="sc">|&gt;</span> </span>
<span id="cb62-417"><a href="#cb62-417" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return only clusters with previous episode lengths of maximum 20 minutes:</span></span>
<span id="cb62-418"><a href="#cb62-418" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((start <span class="sc">-</span> <span class="fu">lag</span>(end) <span class="sc">&lt;=</span> <span class="fu">duration</span>(<span class="st">"20 mins"</span>)), is.cluster) <span class="sc">%&gt;%</span></span>
<span id="cb62-419"><a href="#cb62-419" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_states</span>(dataCC, ., ) <span class="sc">|&gt;</span> </span>
<span id="cb62-420"><a href="#cb62-420" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_day</span>(<span class="at">y.axis =</span> Dis, <span class="at">y.axis.label =</span> y.label, <span class="at">geom =</span> <span class="st">"line"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-421"><a href="#cb62-421" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_photoperiod</span>(coordinates) <span class="sc">+</span></span>
<span id="cb62-422"><a href="#cb62-422" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> \(x) <span class="fu">filter</span>(x, is.cluster), <span class="at">col =</span> <span class="st">"red"</span>)</span>
<span id="cb62-423"><a href="#cb62-423" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-424"><a href="#cb62-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-425"><a href="#cb62-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-426"><a href="#cb62-426" aria-hidden="true" tabindex="-1"></a><span class="fu">### Light {#light}</span></span>
<span id="cb62-427"><a href="#cb62-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-428"><a href="#cb62-428" aria-hidden="true" tabindex="-1"></a>Illuminance values are very low in the example dataset from the <span class="in">`Clouclip`</span> device, which would not yield satisfying summaries in the <span class="in">`Light`</span> section. Thus, we will import data from the <span class="in">`VEET`</span> device next. Because there are different modalities stored in the data, we need to specify which modality we want to access. <span class="in">`ALS`</span> is the acronym for <span class="in">`Ambient Light Sensor`</span>.</span>
<span id="cb62-429"><a href="#cb62-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-432"><a href="#cb62-432" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-433"><a href="#cb62-433" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-hist-CClight</span></span>
<span id="cb62-434"><a href="#cb62-434" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: margin</span></span>
<span id="cb62-435"><a href="#cb62-435" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb62-436"><a href="#cb62-436" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogram of Clouclip light data"</span></span>
<span id="cb62-437"><a href="#cb62-437" aria-hidden="true" tabindex="-1"></a>dataCC <span class="sc">|&gt;</span> </span>
<span id="cb62-438"><a href="#cb62-438" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Lux)) <span class="sc">+</span> </span>
<span id="cb62-439"><a href="#cb62-439" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">100</span>) <span class="sc">+</span> </span>
<span id="cb62-440"><a href="#cb62-440" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb62-441"><a href="#cb62-441" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"symlog"</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1000</span>))</span>
<span id="cb62-442"><a href="#cb62-442" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-443"><a href="#cb62-443" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-444"><a href="#cb62-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-447"><a href="#cb62-447" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-448"><a href="#cb62-448" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-VEET-overview</span></span>
<span id="cb62-449"><a href="#cb62-449" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Overview plot of imported VEET data"</span></span>
<span id="cb62-450"><a href="#cb62-450" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 2</span></span>
<span id="cb62-451"><a href="#cb62-451" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb62-452"><a href="#cb62-452" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"data/01_VEET_L.csv.zip"</span></span>
<span id="cb62-453"><a href="#cb62-453" aria-hidden="true" tabindex="-1"></a>tz <span class="ot">&lt;-</span> <span class="st">"US/Central"</span></span>
<span id="cb62-454"><a href="#cb62-454" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span> import<span class="sc">$</span><span class="fu">VEET</span>(path, <span class="at">tz =</span> tz, <span class="at">modality =</span> <span class="st">"ALS"</span>, <span class="at">manual.id =</span> <span class="st">"VEET"</span>)</span>
<span id="cb62-455"><a href="#cb62-455" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-456"><a href="#cb62-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-457"><a href="#cb62-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-460"><a href="#cb62-460" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-461"><a href="#cb62-461" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-hist-VEETlight</span></span>
<span id="cb62-462"><a href="#cb62-462" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: margin</span></span>
<span id="cb62-463"><a href="#cb62-463" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb62-464"><a href="#cb62-464" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogram of VEET light data"</span></span>
<span id="cb62-465"><a href="#cb62-465" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-466"><a href="#cb62-466" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Lux)) <span class="sc">+</span> </span>
<span id="cb62-467"><a href="#cb62-467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">100</span>) <span class="sc">+</span> </span>
<span id="cb62-468"><a href="#cb62-468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb62-469"><a href="#cb62-469" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"symlog"</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1000</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">4</span>))</span>
<span id="cb62-470"><a href="#cb62-470" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-471"><a href="#cb62-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-472"><a href="#cb62-472" aria-hidden="true" tabindex="-1"></a>The <span class="in">`VEET`</span> dataset has gaps and irregular data, similarly to the <span class="in">`Clouclip`</span> data. For consistency, We will aggregate the data to 5-second intervals and set gaps explicitly. We will also remove days that have more than one hour missing data. Remaining are six days with good data coverage, as seen in @tbl-gaps2.</span>
<span id="cb62-473"><a href="#cb62-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-476"><a href="#cb62-476" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-477"><a href="#cb62-477" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span></span>
<span id="cb62-478"><a href="#cb62-478" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span></span>
<span id="cb62-479"><a href="#cb62-479" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Datetime</span>(<span class="at">unit =</span> <span class="st">"5 seconds"</span>) <span class="sc">|&gt;</span> <span class="co">#aggregate to 5 second interval</span></span>
<span id="cb62-480"><a href="#cb62-480" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gap_handler</span>(<span class="at">full.days =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span>  <span class="co">#set implicit gaps to explicit gaps</span></span>
<span id="cb62-481"><a href="#cb62-481" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_Date_col</span>(<span class="at">group.by =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-482"><a href="#cb62-482" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_partial_data</span>(Lux, <span class="at">threshold.missing =</span> <span class="st">"1 hour"</span>) <span class="co">#remove partial days</span></span>
<span id="cb62-483"><a href="#cb62-483" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-484"><a href="#cb62-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-485"><a href="#cb62-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-488"><a href="#cb62-488" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-489"><a href="#cb62-489" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-gaps2</span></span>
<span id="cb62-490"><a href="#cb62-490" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Summary of missing and observed data for the VEET device"</span></span>
<span id="cb62-491"><a href="#cb62-491" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> <span class="fu">gap_table</span>(Lux, <span class="st">"Illuminance (lx)"</span>) <span class="sc">|&gt;</span>   </span>
<span id="cb62-492"><a href="#cb62-492" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_hide</span>(<span class="fu">contains</span>(<span class="st">"_n"</span>)) <span class="co">#remove the absolute number of data points</span></span>
<span id="cb62-493"><a href="#cb62-493" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-494"><a href="#cb62-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-495"><a href="#cb62-495" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Light exposure</span></span>
<span id="cb62-496"><a href="#cb62-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-497"><a href="#cb62-497" aria-hidden="true" tabindex="-1"></a>Averages of light exposure can be calculated with just <span class="in">`summarize_numeric()`</span>. See @tbl-lightexposure</span>
<span id="cb62-498"><a href="#cb62-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-501"><a href="#cb62-501" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-502"><a href="#cb62-502" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-lightexposure</span></span>
<span id="cb62-503"><a href="#cb62-503" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Light exposure (mean) without transformation"</span></span>
<span id="cb62-504"><a href="#cb62-504" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-505"><a href="#cb62-505" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Id, Date, Datetime, Lux) <span class="sc">|&gt;</span> </span>
<span id="cb62-506"><a href="#cb62-506" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">"mean "</span>, <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"Datetime"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb62-507"><a href="#cb62-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>() <span class="sc">|&gt;</span> </span>
<span id="cb62-508"><a href="#cb62-508" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">decimals =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> <span class="fu">cols_hide</span>(<span class="st">`</span><span class="at">average episodes</span><span class="st">`</span>) <span class="co">#table</span></span>
<span id="cb62-509"><a href="#cb62-509" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-510"><a href="#cb62-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-511"><a href="#cb62-511" aria-hidden="true" tabindex="-1"></a>As light exposure data is highly skewed and zero-inflated (see @fig-hist-VEETlight &amp; <span class="co">[</span><span class="ot">@ZaunerEtAl2025JBR</span><span class="co">]</span>), a transformation is sensible for the mean to be <span class="co">[</span><span class="ot">meaningful</span><span class="co">](https://tscnlab.github.io/LightLogR/articles/log.html)</span>. The resulting illuminance is commonly much lower, due to the skew and the influence of zero values, as can be seen in @tbl-lightexposure2. <span class="co">[</span><span class="ot">log_zero_inflated()</span><span class="co">](https://tscnlab.github.io/LightLogR/reference/log_zero_inflated.html)</span> solves this by adding a small value to the dataset prior to logarithmic transformation. <span class="co">[</span><span class="ot">exp_zero_inflated()</span><span class="co">](https://tscnlab.github.io/LightLogR/reference/log_zero_inflated.html)</span> does the opposite.</span>
<span id="cb62-512"><a href="#cb62-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-515"><a href="#cb62-515" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-516"><a href="#cb62-516" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-lightexposure2</span></span>
<span id="cb62-517"><a href="#cb62-517" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Light exposure (mean) with logarithmic transformation"</span></span>
<span id="cb62-518"><a href="#cb62-518" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-519"><a href="#cb62-519" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Id, Date, Datetime, Lux) <span class="sc">|&gt;</span> </span>
<span id="cb62-520"><a href="#cb62-520" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Lux =</span> Lux <span class="sc">|&gt;</span> <span class="fu">log_zero_inflated</span>()) <span class="sc">|&gt;</span> <span class="co">#convert to logarithmic data</span></span>
<span id="cb62-521"><a href="#cb62-521" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">"mean "</span>, <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"Datetime"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb62-522"><a href="#cb62-522" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-523"><a href="#cb62-523" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">mean Lux</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">mean Lux</span><span class="st">`</span> <span class="sc">|&gt;</span> <span class="fu">exp_zero_inflated</span>()) <span class="sc">|&gt;</span></span>
<span id="cb62-524"><a href="#cb62-524" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(<span class="at">decimals =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> <span class="fu">cols_hide</span>(episodes) <span class="co">#table</span></span>
<span id="cb62-525"><a href="#cb62-525" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-526"><a href="#cb62-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-527"><a href="#cb62-527" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Duration per outdoor range</span></span>
<span id="cb62-528"><a href="#cb62-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-529"><a href="#cb62-529" aria-hidden="true" tabindex="-1"></a>The same way how <span class="co">[</span><span class="ot">distance ranges</span><span class="co">](#distance-range)</span> were calculated, illuminance ranges are summarized, displayed in @tbl-outdoor.</span>
<span id="cb62-530"><a href="#cb62-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-533"><a href="#cb62-533" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-534"><a href="#cb62-534" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-outdoor</span></span>
<span id="cb62-535"><a href="#cb62-535" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Duration in outdoor ranges"</span></span>
<span id="cb62-536"><a href="#cb62-536" aria-hidden="true" tabindex="-1"></a><span class="co">#cutting distance into bands</span></span>
<span id="cb62-537"><a href="#cb62-537" aria-hidden="true" tabindex="-1"></a>out_breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span><span class="sc">*</span><span class="dv">10</span><span class="sc">^</span><span class="dv">3</span>, <span class="cn">Inf</span>)</span>
<span id="cb62-538"><a href="#cb62-538" aria-hidden="true" tabindex="-1"></a>out_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb62-539"><a href="#cb62-539" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Outdoor bright"</span>,          <span class="co"># [1000, 2000)</span></span>
<span id="cb62-540"><a href="#cb62-540" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Outdoor very bright"</span>,     <span class="co"># [2000, 3000)</span></span>
<span id="cb62-541"><a href="#cb62-541" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Outdoor extremely bright"</span> <span class="co"># [3000, Inf)</span></span>
<span id="cb62-542"><a href="#cb62-542" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-543"><a href="#cb62-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-544"><a href="#cb62-544" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span> </span>
<span id="cb62-545"><a href="#cb62-545" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-546"><a href="#cb62-546" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Lux_range =</span> </span>
<span id="cb62-547"><a href="#cb62-547" aria-hidden="true" tabindex="-1"></a>           <span class="fu">cut</span>(Lux, <span class="at">breaks =</span> out_breaks, <span class="at">labels =</span> out_labels) <span class="co">#create ranges</span></span>
<span id="cb62-548"><a href="#cb62-548" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb62-549"><a href="#cb62-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-550"><a href="#cb62-550" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-551"><a href="#cb62-551" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(Lux_range) <span class="sc">|&gt;</span> <span class="co">#remove NAs</span></span>
<span id="cb62-552"><a href="#cb62-552" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Lux_range, <span class="at">.add =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="co">#group by ranges</span></span>
<span id="cb62-553"><a href="#cb62-553" aria-hidden="true" tabindex="-1"></a>  <span class="fu">durations</span>(Lux) <span class="sc">|&gt;</span> <span class="co">#calculate durations</span></span>
<span id="cb62-554"><a href="#cb62-554" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Lux_range, <span class="at">values_from =</span> duration) <span class="sc">|&gt;</span> <span class="co">#widen data</span></span>
<span id="cb62-555"><a href="#cb62-555" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>(<span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-556"><a href="#cb62-556" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_duration</span>(<span class="at">input_units =</span> <span class="st">"seconds"</span>, <span class="at">output_units =</span> <span class="st">"minutes"</span>) <span class="co">#show minutes</span></span>
<span id="cb62-557"><a href="#cb62-557" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-558"><a href="#cb62-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-559"><a href="#cb62-559" aria-hidden="true" tabindex="-1"></a>These states can also be easily visualized in @fig-outdoor.</span>
<span id="cb62-560"><a href="#cb62-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-563"><a href="#cb62-563" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-564"><a href="#cb62-564" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb62-565"><a href="#cb62-565" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-566"><a href="#cb62-566" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-outdoor</span></span>
<span id="cb62-567"><a href="#cb62-567" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Outdoor ranges throughout the measurement period. Colored areas indicate times of outdoor lighting conditions. Violett indicates values above 1000 lx, green above 2000 lx, and yellow above 3000 lx. Grey shaded areas indicate nighttime from civil dusk to civil dawn"</span></span>
<span id="cb62-568"><a href="#cb62-568" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-569"><a href="#cb62-569" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_day</span>(<span class="at">y.axis =</span> Lux, </span>
<span id="cb62-570"><a href="#cb62-570" aria-hidden="true" tabindex="-1"></a>         <span class="at">y.axis.label =</span> <span class="st">"Illuminance (lx)"</span>, </span>
<span id="cb62-571"><a href="#cb62-571" aria-hidden="true" tabindex="-1"></a>         <span class="at">geom =</span> <span class="st">"line"</span>, </span>
<span id="cb62-572"><a href="#cb62-572" aria-hidden="true" tabindex="-1"></a>         <span class="at">jco_color =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-573"><a href="#cb62-573" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_state</span>(Lux_range, <span class="at">aes_fill =</span> Lux_range, <span class="at">alpha =</span> <span class="fl">0.75</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-574"><a href="#cb62-574" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_photoperiod</span>(coordinates) <span class="sc">+</span></span>
<span id="cb62-575"><a href="#cb62-575" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb62-576"><a href="#cb62-576" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Illuminance conditions"</span>) <span class="sc">+</span></span>
<span id="cb62-577"><a href="#cb62-577" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb62-578"><a href="#cb62-578" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-579"><a href="#cb62-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-580"><a href="#cb62-580" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Changes indoor to outdoor</span></span>
<span id="cb62-581"><a href="#cb62-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-582"><a href="#cb62-582" aria-hidden="true" tabindex="-1"></a>To calculate the number of times a change from indoor to outdoor happens, we can extract all states where this is the case in @tbl-changesoutdoor.</span>
<span id="cb62-583"><a href="#cb62-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-586"><a href="#cb62-586" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-587"><a href="#cb62-587" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-changesoutdoor</span></span>
<span id="cb62-588"><a href="#cb62-588" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Number of times light levels change from indoor (&lt;1000&nbsp;lx) to outdoor (&gt;1000&nbsp;lx)"</span></span>
<span id="cb62-589"><a href="#cb62-589" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-590"><a href="#cb62-590" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_states</span>(Outdoor, Lux <span class="sc">&gt;=</span> <span class="dv">1000</span>, <span class="co">#get all instances of states and non-states</span></span>
<span id="cb62-591"><a href="#cb62-591" aria-hidden="true" tabindex="-1"></a>                 <span class="at">group.by.state =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#don't group output by the state </span></span>
<span id="cb62-592"><a href="#cb62-592" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">lead</span>(Outdoor), Outdoor) <span class="sc">|&gt;</span>  <span class="co">#keep where the prior state is FALSE and current TRUE</span></span>
<span id="cb62-593"><a href="#cb62-593" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(</span>
<span id="cb62-594"><a href="#cb62-594" aria-hidden="true" tabindex="-1"></a>    <span class="at">prefix =</span> <span class="st">"mean "</span>,</span>
<span id="cb62-595"><a href="#cb62-595" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"Datetime"</span>, <span class="st">"Outdoor"</span>, <span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"duration"</span>),</span>
<span id="cb62-596"><a href="#cb62-596" aria-hidden="true" tabindex="-1"></a>    <span class="at">add.total.duration =</span> <span class="cn">FALSE</span></span>
<span id="cb62-597"><a href="#cb62-597" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb62-598"><a href="#cb62-598" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-599"><a href="#cb62-599" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(episodes, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-600"><a href="#cb62-600" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_duration</span>(<span class="st">`</span><span class="at">mean epoch</span><span class="st">`</span>, <span class="at">input_units =</span> <span class="st">"seconds"</span>, <span class="at">output_units =</span> <span class="st">"seconds"</span>)<span class="co">#table</span></span>
<span id="cb62-601"><a href="#cb62-601" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-602"><a href="#cb62-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-603"><a href="#cb62-603" aria-hidden="true" tabindex="-1"></a>This seems rather high and is certainly influenced by the small interval of 5 seconds. Requiring that the time outside has to at least persist for 5 minutes (and slight interruptions) will bring this number down. See @tbl-changesoutdoor2 for comparison.</span>
<span id="cb62-604"><a href="#cb62-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-607"><a href="#cb62-607" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-608"><a href="#cb62-608" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-changesoutdoor2</span></span>
<span id="cb62-609"><a href="#cb62-609" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Number of times light levels change from indoor (&lt;1000&nbsp;lx) to outdoor (&gt;1000&nbsp;lx) for at least 5 minutes"</span></span>
<span id="cb62-610"><a href="#cb62-610" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-611"><a href="#cb62-611" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_clusters</span>(Lux <span class="sc">&gt;=</span> <span class="dv">1000</span>, <span class="co">#cluster conditions</span></span>
<span id="cb62-612"><a href="#cb62-612" aria-hidden="true" tabindex="-1"></a>                   <span class="at">cluster.duration =</span> <span class="st">"5 min"</span>, <span class="co">#require 1 minute durations</span></span>
<span id="cb62-613"><a href="#cb62-613" aria-hidden="true" tabindex="-1"></a>                   <span class="at">interruption.duration =</span> <span class="st">"20 secs"</span>, <span class="co">#allow for short interruptions</span></span>
<span id="cb62-614"><a href="#cb62-614" aria-hidden="true" tabindex="-1"></a>                   <span class="at">return.only.clusters =</span> <span class="cn">FALSE</span>,</span>
<span id="cb62-615"><a href="#cb62-615" aria-hidden="true" tabindex="-1"></a>                   <span class="at">drop.empty.groups =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#get all instances of clusters and non-clusters</span></span>
<span id="cb62-616"><a href="#cb62-616" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">lead</span>(is.cluster), is.cluster) <span class="sc">|&gt;</span>  <span class="co">#keep where the prior state is FALSE</span></span>
<span id="cb62-617"><a href="#cb62-617" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(</span>
<span id="cb62-618"><a href="#cb62-618" aria-hidden="true" tabindex="-1"></a>    <span class="at">prefix =</span> <span class="st">"mean "</span>,</span>
<span id="cb62-619"><a href="#cb62-619" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"Datetime"</span>, <span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"duration"</span>),</span>
<span id="cb62-620"><a href="#cb62-620" aria-hidden="true" tabindex="-1"></a>    <span class="at">add.total.duration =</span> <span class="cn">FALSE</span></span>
<span id="cb62-621"><a href="#cb62-621" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb62-622"><a href="#cb62-622" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-623"><a href="#cb62-623" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(episodes, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="co">#table</span></span>
<span id="cb62-624"><a href="#cb62-624" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-625"><a href="#cb62-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-626"><a href="#cb62-626" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Longest period above 1000 lx</span></span>
<span id="cb62-627"><a href="#cb62-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-628"><a href="#cb62-628" aria-hidden="true" tabindex="-1"></a>The last <span class="in">`Light`</span> aspect from @tbl-one is the longest period above 1000&nbsp;lx (PAT1000). While this can be calculated based on what we have shown above by combining <span class="co">[</span><span class="ot">extract_states()</span><span class="co">](https://tscnlab.github.io/LightLogR/reference/extract_states.html)</span> with a simple filter for maximal duration, this metric provides a good opportunity to show that some aspects can also be calculated with dedicated <span class="co">[</span><span class="ot">metric</span><span class="co">](https://tscnlab.github.io/LightLogR/articles/Metrics.html)</span> functions in <span class="in">`LightLogR`</span>. In this case, we use <span class="co">[</span><span class="ot">period_above_threshold()</span><span class="co">](https://tscnlab.github.io/LightLogR/reference/period_above_threshold.html)</span>. The benefit of this approach is that multiple metrics can be calculated at once. Here, for example, we also calculate the duration above 1000&nbsp;lx (TAT1000) alongside in @tbl-periodoutdoor.</span>
<span id="cb62-629"><a href="#cb62-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-632"><a href="#cb62-632" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-633"><a href="#cb62-633" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-periodoutdoor</span></span>
<span id="cb62-634"><a href="#cb62-634" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Longest period (PAT1000) and total duration (TAT1000) above 1000&nbsp;lx"</span></span>
<span id="cb62-635"><a href="#cb62-635" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-636"><a href="#cb62-636" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb62-637"><a href="#cb62-637" aria-hidden="true" tabindex="-1"></a>    <span class="fu">period_above_threshold</span>(Lux, </span>
<span id="cb62-638"><a href="#cb62-638" aria-hidden="true" tabindex="-1"></a>                           Datetime, </span>
<span id="cb62-639"><a href="#cb62-639" aria-hidden="true" tabindex="-1"></a>                           <span class="at">threshold =</span> <span class="dv">1000</span>, </span>
<span id="cb62-640"><a href="#cb62-640" aria-hidden="true" tabindex="-1"></a>                           <span class="at">na.rm =</span> <span class="cn">TRUE</span>, </span>
<span id="cb62-641"><a href="#cb62-641" aria-hidden="true" tabindex="-1"></a>                           <span class="at">as.df =</span> <span class="cn">TRUE</span>),</span>
<span id="cb62-642"><a href="#cb62-642" aria-hidden="true" tabindex="-1"></a>    <span class="fu">duration_above_threshold</span>(Lux,</span>
<span id="cb62-643"><a href="#cb62-643" aria-hidden="true" tabindex="-1"></a>                             Datetime,</span>
<span id="cb62-644"><a href="#cb62-644" aria-hidden="true" tabindex="-1"></a>                             <span class="at">threshold =</span> <span class="dv">1000</span>,</span>
<span id="cb62-645"><a href="#cb62-645" aria-hidden="true" tabindex="-1"></a>                             <span class="at">na.rm =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-646"><a href="#cb62-646" aria-hidden="true" tabindex="-1"></a>                             <span class="at">as.df =</span> <span class="cn">TRUE</span>),</span>
<span id="cb62-647"><a href="#cb62-647" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"keep"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-648"><a href="#cb62-648" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_mean_daily</span>(<span class="st">""</span>)</span>
<span id="cb62-649"><a href="#cb62-649" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-650"><a href="#cb62-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-651"><a href="#cb62-651" aria-hidden="true" tabindex="-1"></a><span class="fu">### Spectrum</span></span>
<span id="cb62-652"><a href="#cb62-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-653"><a href="#cb62-653" aria-hidden="true" tabindex="-1"></a>Spectral data is not part of any of the datasets used in this article. Rather, it has to be reconstructed from sensor counts and a calibration matrix. The <span class="in">`VEET`</span> device contains ten sensor channels that can be used for reconstruction. As these are contained in a different sensor than the ambient light sensor, a different modality needs to be imported from the same file. Data preparation will be analogous to <span class="co">[</span><span class="ot">Light</span><span class="co">](#light)</span>. <span class="in">`PHO`</span> contains the data from spectral sensor channels. For computational reasons, the data will be aggregated to <span class="in">`5 minutes`</span> intervals. The first three rows are shown in @tbl-PHO.</span>
<span id="cb62-654"><a href="#cb62-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-657"><a href="#cb62-657" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-658"><a href="#cb62-658" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-VEET-Spec-overview</span></span>
<span id="cb62-659"><a href="#cb62-659" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Overview plot of imported VEET spectral data"</span></span>
<span id="cb62-660"><a href="#cb62-660" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 2</span></span>
<span id="cb62-661"><a href="#cb62-661" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb62-662"><a href="#cb62-662" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span> import<span class="sc">$</span><span class="fu">VEET</span>(path, <span class="at">tz =</span> tz, <span class="at">modality =</span> <span class="st">"PHO"</span>, <span class="at">manual.id =</span> <span class="st">"VEET"</span>)</span>
<span id="cb62-663"><a href="#cb62-663" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-664"><a href="#cb62-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-667"><a href="#cb62-667" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-668"><a href="#cb62-668" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span></span>
<span id="cb62-669"><a href="#cb62-669" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span></span>
<span id="cb62-670"><a href="#cb62-670" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Datetime</span>(<span class="at">unit =</span> <span class="st">"5 mins"</span>) <span class="sc">|&gt;</span> <span class="co">#aggregate to 5 minute intervals</span></span>
<span id="cb62-671"><a href="#cb62-671" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gap_handler</span>(<span class="at">full.days =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span>  <span class="co">#set implicit gaps to explicit gaps</span></span>
<span id="cb62-672"><a href="#cb62-672" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_Date_col</span>(<span class="at">group.by =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-673"><a href="#cb62-673" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_partial_data</span>(Gain, <span class="at">threshold.missing =</span> <span class="st">"1 hour"</span>) <span class="co">#remove bad days</span></span>
<span id="cb62-674"><a href="#cb62-674" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-675"><a href="#cb62-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-678"><a href="#cb62-678" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-679"><a href="#cb62-679" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-PHO</span></span>
<span id="cb62-680"><a href="#cb62-680" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Overview of the spectral sensor import from the VEET device"</span></span>
<span id="cb62-681"><a href="#cb62-681" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">3</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(modality, file.name, is.implicit, time_stamp)) <span class="sc">|&gt;</span> </span>
<span id="cb62-682"><a href="#cb62-682" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(s415<span class="sc">:</span>ClearR) </span>
<span id="cb62-683"><a href="#cb62-683" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-684"><a href="#cb62-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-685"><a href="#cb62-685" aria-hidden="true" tabindex="-1"></a>The channels <span class="in">`s415`</span> through <span class="in">`ClearR`</span> contain raw sensor counts and need to be normalized by the <span class="in">`Gain`</span> value. Further, <span class="in">`ClearL`</span> and <span class="in">`ClearR`</span> need to be averaged prior to spectral reconstruction. The appropriate <span class="in">`gain.ratio.table`</span> for the sensor <span class="in">`TSL2585`</span> is integrated in <span class="in">`LightLogR`</span>, but should also be confirmed by the manufacturer.</span>
<span id="cb62-686"><a href="#cb62-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-689"><a href="#cb62-689" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-690"><a href="#cb62-690" aria-hidden="true" tabindex="-1"></a>count.columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"s415"</span>, <span class="st">"s445"</span>, <span class="st">"s480"</span>, <span class="st">"s515"</span>, <span class="st">"s555"</span>, <span class="st">"s590"</span>, <span class="st">"s630"</span>, </span>
<span id="cb62-691"><a href="#cb62-691" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"s680"</span>, <span class="st">"s940"</span>, <span class="st">"Dark"</span>, <span class="st">"ClearL"</span>, <span class="st">"ClearR"</span>) <span class="co">#column names</span></span>
<span id="cb62-692"><a href="#cb62-692" aria-hidden="true" tabindex="-1"></a><span class="co">#normalize data</span></span>
<span id="cb62-693"><a href="#cb62-693" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span></span>
<span id="cb62-694"><a href="#cb62-694" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-695"><a href="#cb62-695" aria-hidden="true" tabindex="-1"></a>  <span class="fu">normalize_counts</span>( <span class="co">#function to normalize counts</span></span>
<span id="cb62-696"><a href="#cb62-696" aria-hidden="true" tabindex="-1"></a>    <span class="at">gain.columns =</span> <span class="fu">rep</span>(<span class="st">"Gain"</span>, <span class="dv">12</span>), <span class="co">#all sensor channels share the gain value</span></span>
<span id="cb62-697"><a href="#cb62-697" aria-hidden="true" tabindex="-1"></a>    <span class="at">count.columns =</span> count.columns, <span class="co">#senso channels to normalize</span></span>
<span id="cb62-698"><a href="#cb62-698" aria-hidden="true" tabindex="-1"></a>    gain.ratio.tables<span class="sc">$</span>TSL2585 <span class="co">#gain ratio channel for TSL2585 sensor</span></span>
<span id="cb62-699"><a href="#cb62-699" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-700"><a href="#cb62-700" aria-hidden="true" tabindex="-1"></a><span class="co">#average Clear Channels</span></span>
<span id="cb62-701"><a href="#cb62-701" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span> </span>
<span id="cb62-702"><a href="#cb62-702" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-703"><a href="#cb62-703" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Clear.normalized =</span> (ClearL<span class="sc">+</span>ClearR)<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb62-704"><a href="#cb62-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-705"><a href="#cb62-705" aria-hidden="true" tabindex="-1"></a><span class="co">#remove raw sensor counts and rename normalized values</span></span>
<span id="cb62-706"><a href="#cb62-706" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span></span>
<span id="cb62-707"><a href="#cb62-707" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-708"><a href="#cb62-708" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(s415<span class="sc">:</span>ClearR)) <span class="sc">|&gt;</span> </span>
<span id="cb62-709"><a href="#cb62-709" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_with</span>(\(x) <span class="fu">str_remove</span>(x, <span class="st">".normalized"</span>))</span>
<span id="cb62-710"><a href="#cb62-710" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-711"><a href="#cb62-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-712"><a href="#cb62-712" aria-hidden="true" tabindex="-1"></a>This closes the necessary preparation in the dataset. The calibration matrix was provided by the manufacturer and is specific to the make and model. It should not be used for research purposes without confirming its accuracy with the manufacturer.</span>
<span id="cb62-713"><a href="#cb62-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-716"><a href="#cb62-716" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-717"><a href="#cb62-717" aria-hidden="true" tabindex="-1"></a><span class="co">#import calibration matrix</span></span>
<span id="cb62-718"><a href="#cb62-718" aria-hidden="true" tabindex="-1"></a>calib_mtx <span class="ot">&lt;-</span> </span>
<span id="cb62-719"><a href="#cb62-719" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="st">"data/VEET_calibration_matrix.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-720"><a href="#cb62-720" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_to_rownames</span>(<span class="st">"wavelength"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-721"><a href="#cb62-721" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.matrix</span>()</span>
<span id="cb62-722"><a href="#cb62-722" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-723"><a href="#cb62-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-724"><a href="#cb62-724" aria-hidden="true" tabindex="-1"></a>Construction the spectrum is now straightforward.</span>
<span id="cb62-725"><a href="#cb62-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-728"><a href="#cb62-728" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-729"><a href="#cb62-729" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span></span>
<span id="cb62-730"><a href="#cb62-730" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-731"><a href="#cb62-731" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Spectrum =</span> </span>
<span id="cb62-732"><a href="#cb62-732" aria-hidden="true" tabindex="-1"></a>             <span class="fu">spectral_reconstruction</span>(</span>
<span id="cb62-733"><a href="#cb62-733" aria-hidden="true" tabindex="-1"></a>               <span class="at">sensor_channels =</span> <span class="fu">pick</span>(s415<span class="sc">:</span>s940, Clear),</span>
<span id="cb62-734"><a href="#cb62-734" aria-hidden="true" tabindex="-1"></a>               <span class="at">calibration_matrix =</span> calib_mtx</span>
<span id="cb62-735"><a href="#cb62-735" aria-hidden="true" tabindex="-1"></a>               )</span>
<span id="cb62-736"><a href="#cb62-736" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb62-737"><a href="#cb62-737" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-738"><a href="#cb62-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-739"><a href="#cb62-739" aria-hidden="true" tabindex="-1"></a>The dataset now contains a <span class="in">`list-column`</span> containing the spectrum for each observation. We can visualize the data in @fig-spectrum.</span>
<span id="cb62-740"><a href="#cb62-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-743"><a href="#cb62-743" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-744"><a href="#cb62-744" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb62-745"><a href="#cb62-745" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-746"><a href="#cb62-746" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-spectrum</span></span>
<span id="cb62-747"><a href="#cb62-747" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Reconstructed light spectra. The plot shows light spectra for 5-minute aggregated time intervals across the whole dataset"</span></span>
<span id="cb62-748"><a href="#cb62-748" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span></span>
<span id="cb62-749"><a href="#cb62-749" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(Spectrum) <span class="sc">|&gt;</span> <span class="co">#unnest the list column</span></span>
<span id="cb62-750"><a href="#cb62-750" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Datetime) <span class="sc">|&gt;</span> <span class="co">#group by each spectrum</span></span>
<span id="cb62-751"><a href="#cb62-751" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">irradiance =</span> irradiance<span class="sc">/</span><span class="fu">max</span>(irradiance)) <span class="sc">|&gt;</span> <span class="co">#scale spectra relative</span></span>
<span id="cb62-752"><a href="#cb62-752" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>wavelength, <span class="at">y =</span> irradiance, <span class="at">group =</span> Datetime)) <span class="sc">+</span> <span class="co">#plot</span></span>
<span id="cb62-753"><a href="#cb62-753" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb62-754"><a href="#cb62-754" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb62-755"><a href="#cb62-755" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Relative spectral irradiance (%)"</span>, <span class="at">x =</span> <span class="st">"Wavelength (nm)"</span>) <span class="sc">+</span> </span>
<span id="cb62-756"><a href="#cb62-756" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_percent</span>())<span class="sc">+</span></span>
<span id="cb62-757"><a href="#cb62-757" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">400</span>, <span class="dv">700</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb62-758"><a href="#cb62-758" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">10</span>,<span class="dv">10</span>))</span>
<span id="cb62-759"><a href="#cb62-759" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-760"><a href="#cb62-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-761"><a href="#cb62-761" aria-hidden="true" tabindex="-1"></a>These spectral data will be the basis to calculate the last two metrics. Note that spectrum-based metrics are less developed in scientific research, compared to, e.g., distance and light. The following two examples thus simply show theoretical use cases that can be adapted to a researchers need.</span>
<span id="cb62-762"><a href="#cb62-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-763"><a href="#cb62-763" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ratio of short vs. long wavelength light</span></span>
<span id="cb62-764"><a href="#cb62-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-765"><a href="#cb62-765" aria-hidden="true" tabindex="-1"></a>The first spectral metric requires integration across two sections of the spectrum. <span class="co">[</span><span class="ot">spectral_integration()</span><span class="co">](https://tscnlab.github.io/LightLogR/reference/spectral_integration.html)</span> makes this task straight forward. The results can be seen in @tbl-ratio</span>
<span id="cb62-766"><a href="#cb62-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-769"><a href="#cb62-769" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-770"><a href="#cb62-770" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="ot">&lt;-</span> </span>
<span id="cb62-771"><a href="#cb62-771" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-772"><a href="#cb62-772" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Id, Date, Datetime, Spectrum) <span class="sc">|&gt;</span> </span>
<span id="cb62-773"><a href="#cb62-773" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-774"><a href="#cb62-774" aria-hidden="true" tabindex="-1"></a>    <span class="at">short =</span> Spectrum <span class="sc">|&gt;</span> <span class="fu">map_dbl</span>(spectral_integration, <span class="co">#short wavelength</span></span>
<span id="cb62-775"><a href="#cb62-775" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">wavelength.range =</span> <span class="fu">c</span>(<span class="dv">400</span>,<span class="dv">500</span>)),</span>
<span id="cb62-776"><a href="#cb62-776" aria-hidden="true" tabindex="-1"></a>    <span class="at">long =</span> Spectrum <span class="sc">|&gt;</span> <span class="fu">map_dbl</span>(spectral_integration, <span class="co">#long wavelength</span></span>
<span id="cb62-777"><a href="#cb62-777" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">wavelength.range =</span> <span class="fu">c</span>(<span class="dv">600</span>,<span class="dv">700</span>)),</span>
<span id="cb62-778"><a href="#cb62-778" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">sl ratio</span><span class="st">`</span> <span class="ot">=</span> short <span class="sc">/</span> long <span class="co"># calculate the ratio</span></span>
<span id="cb62-779"><a href="#cb62-779" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-780"><a href="#cb62-780" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-781"><a href="#cb62-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-782"><a href="#cb62-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-785"><a href="#cb62-785" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-786"><a href="#cb62-786" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-ratio</span></span>
<span id="cb62-787"><a href="#cb62-787" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Ratio of short vs. long wavelength light"</span></span>
<span id="cb62-788"><a href="#cb62-788" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-789"><a href="#cb62-789" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">""</span>, <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"Datetime"</span>, <span class="st">"Spectrum"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb62-790"><a href="#cb62-790" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-791"><a href="#cb62-791" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(<span class="sc">-</span><span class="st">`</span><span class="at">sl ratio</span><span class="st">`</span>, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">cols_hide</span>(episodes) <span class="co"># table</span></span>
<span id="cb62-792"><a href="#cb62-792" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-793"><a href="#cb62-793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-794"><a href="#cb62-794" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Short-wavelength light at certain times of day</span></span>
<span id="cb62-795"><a href="#cb62-795" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-796"><a href="#cb62-796" aria-hidden="true" tabindex="-1"></a>For the last metric we will look at only the <span class="in">`short`</span> wavelength contribution (which was already calculated in the previous section), but do so through certain times of day. @tbl-shortfilter shows the first approach, which is about exclusively looking at local time (arbitrarily around noon). @fig-shorttime expands this view to all hours of the day with a binned approach. Lastly, @tbl-daytime focuses on photoperiods.</span>
<span id="cb62-797"><a href="#cb62-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-798"><a href="#cb62-798" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset}</span>
<span id="cb62-799"><a href="#cb62-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-800"><a href="#cb62-800" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Local time</span></span>
<span id="cb62-801"><a href="#cb62-801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-804"><a href="#cb62-804" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-805"><a href="#cb62-805" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-shortfilter</span></span>
<span id="cb62-806"><a href="#cb62-806" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Short wavelength light exposure between 11:00 and 14:00"</span></span>
<span id="cb62-807"><a href="#cb62-807" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span> </span>
<span id="cb62-808"><a href="#cb62-808" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_Time</span>(<span class="at">start =</span> <span class="st">"11:00:00"</span>, <span class="at">end =</span> <span class="st">"14:00:00"</span>) <span class="sc">|&gt;</span> <span class="co">#filter out certain times</span></span>
<span id="cb62-809"><a href="#cb62-809" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Spectrum, long, <span class="st">`</span><span class="at">sl ratio</span><span class="st">`</span>, Time, Datetime)) <span class="sc">|&gt;</span> </span>
<span id="cb62-810"><a href="#cb62-810" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-811"><a href="#cb62-811" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-812"><a href="#cb62-812" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>(short) <span class="sc">|&gt;</span> <span class="fu">cols_label</span>(<span class="at">short =</span> <span class="st">"Short wavelength irradiance"</span>)</span>
<span id="cb62-813"><a href="#cb62-813" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-814"><a href="#cb62-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-815"><a href="#cb62-815" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Across the day</span></span>
<span id="cb62-816"><a href="#cb62-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-819"><a href="#cb62-819" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-820"><a href="#cb62-820" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-shorttime</span></span>
<span id="cb62-821"><a href="#cb62-821" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Short wavelength light exposure across the day"</span></span>
<span id="cb62-822"><a href="#cb62-822" aria-hidden="true" tabindex="-1"></a><span class="co">#creating the data</span></span>
<span id="cb62-823"><a href="#cb62-823" aria-hidden="true" tabindex="-1"></a>dataVEETtime <span class="ot">&lt;-</span></span>
<span id="cb62-824"><a href="#cb62-824" aria-hidden="true" tabindex="-1"></a>  dataVEET <span class="sc">|&gt;</span></span>
<span id="cb62-825"><a href="#cb62-825" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cut_Datetime</span>(<span class="at">unit =</span> <span class="st">"1 hour"</span>, <span class="co">#create time sections of one hour</span></span>
<span id="cb62-826"><a href="#cb62-826" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">"floor"</span>,</span>
<span id="cb62-827"><a href="#cb62-827" aria-hidden="true" tabindex="-1"></a>               <span class="at">group_by =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-828"><a href="#cb62-828" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Spectrum, long, <span class="st">`</span><span class="at">sl ratio</span><span class="st">`</span>, Datetime)) <span class="sc">|&gt;</span></span>
<span id="cb62-829"><a href="#cb62-829" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-830"><a href="#cb62-830" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Datetime.rounded, <span class="at">.drop =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> <span class="co">#group by the time state</span></span>
<span id="cb62-831"><a href="#cb62-831" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>, <span class="at">sub.zero =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-832"><a href="#cb62-832" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_Time_col</span>(Datetime.rounded) <span class="co">#add a time column for plotting</span></span>
<span id="cb62-833"><a href="#cb62-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-834"><a href="#cb62-834" aria-hidden="true" tabindex="-1"></a><span class="co">#creating the plot</span></span>
<span id="cb62-835"><a href="#cb62-835" aria-hidden="true" tabindex="-1"></a>dataVEETtime <span class="sc">|&gt;</span> </span>
<span id="cb62-836"><a href="#cb62-836" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y =</span> short<span class="sc">/</span><span class="fu">max</span>(short))) <span class="sc">+</span></span>
<span id="cb62-837"><a href="#cb62-837" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Date), <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb62-838"><a href="#cb62-838" aria-hidden="true" tabindex="-1"></a>  ggsci<span class="sc">::</span><span class="fu">scale_fill_jco</span>() <span class="sc">+</span></span>
<span id="cb62-839"><a href="#cb62-839" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb62-840"><a href="#cb62-840" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Relative short wavelength contribution (%)"</span>, </span>
<span id="cb62-841"><a href="#cb62-841" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Local time (HH:MM)"</span>) <span class="sc">+</span> </span>
<span id="cb62-842"><a href="#cb62-842" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb62-843"><a href="#cb62-843" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_time</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_time</span>(<span class="at">format =</span> <span class="st">"%H:%M"</span>))</span>
<span id="cb62-844"><a href="#cb62-844" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-845"><a href="#cb62-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-846"><a href="#cb62-846" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Photoperiod</span></span>
<span id="cb62-847"><a href="#cb62-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-850"><a href="#cb62-850" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-851"><a href="#cb62-851" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-daytime</span></span>
<span id="cb62-852"><a href="#cb62-852" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Short wavelength light exposure during the day and at night"</span></span>
<span id="cb62-853"><a href="#cb62-853" aria-hidden="true" tabindex="-1"></a>dataVEET <span class="sc">|&gt;</span></span>
<span id="cb62-854"><a href="#cb62-854" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Spectrum, long, <span class="st">`</span><span class="at">sl ratio</span><span class="st">`</span>)) <span class="sc">|&gt;</span></span>
<span id="cb62-855"><a href="#cb62-855" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_photoperiod</span>(coordinates) <span class="sc">|&gt;</span> </span>
<span id="cb62-856"><a href="#cb62-856" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(photoperiod.state, <span class="at">.add =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-857"><a href="#cb62-857" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">""</span>, </span>
<span id="cb62-858"><a href="#cb62-858" aria-hidden="true" tabindex="-1"></a>                    <span class="at">remove =</span> <span class="fu">c</span>(<span class="st">"dawn"</span>, <span class="st">"dusk"</span>, <span class="st">"photoperiod"</span>, <span class="st">"Datetime"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb62-859"><a href="#cb62-859" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(photoperiod.state) <span class="sc">|&gt;</span> </span>
<span id="cb62-860"><a href="#cb62-860" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean_daily</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-861"><a href="#cb62-861" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>episodes) <span class="sc">|&gt;</span> </span>
<span id="cb62-862"><a href="#cb62-862" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span>photoperiod.state, <span class="at">values_from =</span> short) <span class="sc">|&gt;</span> </span>
<span id="cb62-863"><a href="#cb62-863" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>()</span>
<span id="cb62-864"><a href="#cb62-864" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-865"><a href="#cb62-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-866"><a href="#cb62-866" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb62-867"><a href="#cb62-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-868"><a href="#cb62-868" aria-hidden="true" tabindex="-1"></a><span class="fu">## Discussion and conclusion</span></span>
<span id="cb62-869"><a href="#cb62-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-870"><a href="#cb62-870" aria-hidden="true" tabindex="-1"></a>This tutorial demonstrates how to calculate various metrics used in current and future research in a principled and standardized approach. While not brief overall, each metric has a dedicated pipeline that is verbose and comparatively easy to follow at each step. Those pipelines utilize <span class="in">`LightLogR`</span>s framework and combine that with common data analysis workflows. The goal is to make the process transparent (function definitions open source), accessible (sound documentation, tutorials, speaking function and argument names, MIT license), robust (~900 unit tests for functions, continuous integration on GitHub, bug-tracking on Github), and community-driven (feature tracking on GitHub, open process for researchers who want to contribute code or suggest features).</span>
<span id="cb62-871"><a href="#cb62-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-872"><a href="#cb62-872" aria-hidden="true" tabindex="-1"></a>The tutorial also demonstrates that even through these standardized pipelines, there are many decisions a researcher has to make (and document) to clean data, deal with measurement epochs, and calculate chosen metrics, especially where clusters of data are concerned, i.e., data are grouped in more than one dimension (e.g., by distance range, and minimal duration).</span>
<span id="cb62-873"><a href="#cb62-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-874"><a href="#cb62-874" aria-hidden="true" tabindex="-1"></a>The slew of features aimed to explore the data and extracted metrics or clusters in plots and tables, and to handle measurement intervals, gaps, and irregular data, make <span class="in">`LightLogR`</span> an excellent choice for the research field of visual experience, be it in circadian, myopia, or related fields of research.</span>
<span id="cb62-875"><a href="#cb62-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-876"><a href="#cb62-876" aria-hidden="true" tabindex="-1"></a><span class="fu">## Session info {#sessioninfo}</span></span>
<span id="cb62-877"><a href="#cb62-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-880"><a href="#cb62-880" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-881"><a href="#cb62-881" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span>
<span id="cb62-882"><a href="#cb62-882" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-883"><a href="#cb62-883" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-884"><a href="#cb62-884" aria-hidden="true" tabindex="-1"></a><span class="fu">## References</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>  </div> <!-- /content -->  <script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script> 
  
</body></html>